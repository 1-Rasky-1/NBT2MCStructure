(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function a(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=a(r);fetch(r.href,i)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof{}<"u"?{}:typeof self<"u"?self:{};function getAugmentedNamespace(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var a=function n(){if(this instanceof n){var r=[null];r.push.apply(r,arguments);var i=Function.bind.apply(e,r);return new i}return e.apply(this,arguments)};a.prototype=e.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(a,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),a}const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);var protodefExports={},protodef$1={get exports(){return protodefExports},set exports(t){protodefExports=t}};function getField(t,e){const a=t.split("/");let n=0;if(a[n]===""){for(;e[".."]!==void 0;)e=e[".."];n++}for(;n<a.length;n++)e=e[a[n]];return e}function getFieldInfo$1(t){if(typeof t=="string")return{type:t};if(Array.isArray(t))return{type:t[0],typeArgs:t[1]};if(typeof t.type=="string")return t;throw new Error("Not a fieldinfo")}function getCount$1(t,e,{count:a,countType:n},r){let i=0,s=0;return typeof a=="number"?i=a:typeof a<"u"?i=getField(a,r):typeof n<"u"?{size:s,value:i}=tryDoc(()=>this.read(t,e,getFieldInfo$1(n),r),"$count"):i=0,{count:i,size:s}}function sendCount$1(t,e,a,{count:n,countType:r},i){return typeof n<"u"&&t!==n||typeof r<"u"&&(a=this.write(t,e,a,getFieldInfo$1(r),i)),a}function calcCount$1(t,{count:e,countType:a},n){return typeof e>"u"&&typeof a<"u"?tryDoc(()=>this.sizeOf(t,getFieldInfo$1(a),n),"$count"):0}function addErrorField(t,e){throw t.field=t.field?e+"."+t.field:e,t}function tryCatch$2(t,e){try{return t()}catch(a){e(a)}}function tryDoc(t,e){return tryCatch$2(t,a=>addErrorField(a,e))}class ExtendableError extends Error{constructor(e){super(e),this.name=this.constructor.name,this.message=e,Error.captureStackTrace!=null&&Error.captureStackTrace(this,this.constructor.name)}}let PartialReadError$2=class extends ExtendableError{constructor(e){super(e),this.partialReadError=!0}};var utils$2={getField,getFieldInfo:getFieldInfo$1,addErrorField,getCount:getCount$1,sendCount:sendCount$1,calcCount:calcCount$1,tryCatch:tryCatch$2,tryDoc,PartialReadError:PartialReadError$2},lodash_reduceExports={},lodash_reduce={get exports(){return lodash_reduceExports},set exports(t){lodash_reduceExports=t}};(function(t,e){var a=200,n="Expected a function",r="__lodash_hash_undefined__",i=1,s=2,o=1/0,f=9007199254740991,p="[object Arguments]",h="[object Array]",E="[object Boolean]",w="[object Date]",l="[object Error]",c="[object Function]",y="[object GeneratorFunction]",b="[object Map]",d="[object Number]",_="[object Object]",T="[object Promise]",I="[object RegExp]",D="[object Set]",L="[object String]",H="[object Symbol]",M="[object WeakMap]",j="[object ArrayBuffer]",K="[object DataView]",Q="[object Float32Array]",V="[object Float64Array]",B="[object Int8Array]",q="[object Int16Array]",J="[object Int32Array]",oe="[object Uint8Array]",ae="[object Uint8ClampedArray]",se="[object Uint16Array]",ne="[object Uint32Array]",X=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ee=/^\w*$/,Pe=/^\./,we=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,he=/[\\^$.*+?()[\]{}|]/g,xe=/\\(\\)?/g,A=/^\[object .+?Constructor\]$/,O=/^(?:0|[1-9]\d*)$/,N={};N[Q]=N[V]=N[B]=N[q]=N[J]=N[oe]=N[ae]=N[se]=N[ne]=!0,N[p]=N[h]=N[j]=N[E]=N[K]=N[w]=N[l]=N[c]=N[b]=N[d]=N[_]=N[I]=N[D]=N[L]=N[M]=!1;var G=typeof{}=="object"&&{}&&{}.Object===Object&&{},Y=typeof self=="object"&&self&&self.Object===Object&&self,v=G||Y||Function("return this")(),g=e&&!e.nodeType&&e,z=g&&!0&&t&&!t.nodeType&&t,k=z&&z.exports===g,de=k&&G.process,ee=function(){try{return de&&de.binding("util")}catch{}}(),ue=ee&&ee.isTypedArray;function Fe(u,S,x,U){var te=-1,W=u?u.length:0;for(U&&W&&(x=u[++te]);++te<W;)x=S(x,u[te],te,u);return x}function Se(u,S){for(var x=-1,U=u?u.length:0;++x<U;)if(S(u[x],x,u))return!0;return!1}function je(u){return function(S){return S==null?void 0:S[u]}}function rr(u,S,x,U,te){return te(u,function(W,ce,ye){x=U?(U=!1,W):S(x,W,ce,ye)}),x}function Te(u,S){for(var x=-1,U=Array(u);++x<u;)U[x]=S(x);return U}function $e(u){return function(S){return u(S)}}function Oe(u,S){return u==null?void 0:u[S]}function Me(u){var S=!1;if(u!=null&&typeof u.toString!="function")try{S=!!(u+"")}catch{}return S}function Ge(u){var S=-1,x=Array(u.size);return u.forEach(function(U,te){x[++S]=[te,U]}),x}function qe(u,S){return function(x){return u(S(x))}}function Xe(u){var S=-1,x=Array(u.size);return u.forEach(function(U){x[++S]=U}),x}var Je=Array.prototype,cr=Function.prototype,dr=Object.prototype,yr=v["__core-js_shared__"],sr=function(){var u=/[^.]+$/.exec(yr&&yr.keys&&yr.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),_r=cr.toString,Ye=dr.hasOwnProperty,tr=dr.toString,Be=RegExp("^"+_r.call(Ye).replace(he,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Tr=v.Symbol,Rr=v.Uint8Array,kr=dr.propertyIsEnumerable,Hr=Je.splice,Vr=qe(Object.keys,Object),Sr=br(v,"DataView"),Ue=br(v,"Map"),$r=br(v,"Promise"),gr=br(v,"Set"),Pr=br(v,"WeakMap"),ar=br(Object,"create"),Ir=vr(Sr),Wr=vr(Ue),Or=vr($r),Kr=vr(gr),Ar=vr(Pr),P=Tr?Tr.prototype:void 0,m=P?P.valueOf:void 0,R=P?P.toString:void 0;function C(u){var S=-1,x=u?u.length:0;for(this.clear();++S<x;){var U=u[S];this.set(U[0],U[1])}}function F(){this.__data__=ar?ar(null):{}}function Z(u){return this.has(u)&&delete this.__data__[u]}function re(u){var S=this.__data__;if(ar){var x=S[u];return x===r?void 0:x}return Ye.call(S,u)?S[u]:void 0}function fe(u){var S=this.__data__;return ar?S[u]!==void 0:Ye.call(S,u)}function ge(u,S){var x=this.__data__;return x[u]=ar&&S===void 0?r:S,this}C.prototype.clear=F,C.prototype.delete=Z,C.prototype.get=re,C.prototype.has=fe,C.prototype.set=ge;function pe(u){var S=-1,x=u?u.length:0;for(this.clear();++S<x;){var U=u[S];this.set(U[0],U[1])}}function le(){this.__data__=[]}function me(u){var S=this.__data__,x=nr(S,u);if(x<0)return!1;var U=S.length-1;return x==U?S.pop():Hr.call(S,x,1),!0}function Re(u){var S=this.__data__,x=nr(S,u);return x<0?void 0:S[x][1]}function ie(u){return nr(this.__data__,u)>-1}function be(u,S){var x=this.__data__,U=nr(x,u);return U<0?x.push([u,S]):x[U][1]=S,this}pe.prototype.clear=le,pe.prototype.delete=me,pe.prototype.get=Re,pe.prototype.has=ie,pe.prototype.set=be;function ve(u){var S=-1,x=u?u.length:0;for(this.clear();++S<x;){var U=u[S];this.set(U[0],U[1])}}function _e(){this.__data__={hash:new C,map:new(Ue||pe),string:new C}}function er(u){return Nr(this,u).delete(u)}function ke(u){return Nr(this,u).get(u)}function He(u){return Nr(this,u).has(u)}function or(u,S){return Nr(this,u).set(u,S),this}ve.prototype.clear=_e,ve.prototype.delete=er,ve.prototype.get=ke,ve.prototype.has=He,ve.prototype.set=or;function Ve(u){var S=-1,x=u?u.length:0;for(this.__data__=new ve;++S<x;)this.add(u[S])}function ze(u){return this.__data__.set(u,r),this}function We(u){return this.__data__.has(u)}Ve.prototype.add=Ve.prototype.push=ze,Ve.prototype.has=We;function De(u){this.__data__=new pe(u)}function Ze(){this.__data__=new pe}function hr(u){return this.__data__.delete(u)}function Cr(u){return this.__data__.get(u)}function Dr(u){return this.__data__.has(u)}function Er(u,S){var x=this.__data__;if(x instanceof pe){var U=x.__data__;if(!Ue||U.length<a-1)return U.push([u,S]),this;x=this.__data__=new ve(U)}return x.set(u,S),this}De.prototype.clear=Ze,De.prototype.delete=hr,De.prototype.get=Cr,De.prototype.has=Dr,De.prototype.set=Er;function wr(u,S){var x=ur(u)||st(u)?Te(u.length,String):[],U=x.length,te=!!U;for(var W in u)(S||Ye.call(u,W))&&!(te&&(W=="length"||tt(W,U)))&&x.push(W);return x}function nr(u,S){for(var x=u.length;x--;)if(it(u[x][0],S))return x;return-1}var Fr=bt(pr),xr=_t();function pr(u,S){return u&&xr(u,S,qr)}function Xr(u,S){S=zr(S,u)?[S]:et(S);for(var x=0,U=S.length;u!=null&&x<U;)u=u[Lr(S[x++])];return x&&x==U?u:void 0}function ut(u){return tr.call(u)}function ft(u,S){return u!=null&&S in Object(u)}function Qr(u,S,x,U,te){return u===S?!0:u==null||S==null||!jr(u)&&!Mr(S)?u!==u&&S!==S:ct(u,S,Qr,x,U,te)}function ct(u,S,x,U,te,W){var ce=ur(u),ye=ur(S),Ie=h,Ae=h;ce||(Ie=lr(u),Ie=Ie==p?_:Ie),ye||(Ae=lr(S),Ae=Ae==p?_:Ae);var Ne=Ie==_&&!Me(u),Le=Ae==_&&!Me(S),Ce=Ie==Ae;if(Ce&&!Ne)return W||(W=new De),ce||Ft(u)?rt(u,S,x,U,te,W):St(u,S,Ie,x,U,te,W);if(!(te&s)){var Ke=Ne&&Ye.call(u,"__wrapped__"),Qe=Le&&Ye.call(S,"__wrapped__");if(Ke||Qe){var fr=Ke?u.value():u,ir=Qe?S.value():S;return W||(W=new De),x(fr,ir,U,te,W)}}return Ce?(W||(W=new De),$t(u,S,x,U,te,W)):!1}function dt(u,S,x,U){var te=x.length,W=te,ce=!U;if(u==null)return!W;for(u=Object(u);te--;){var ye=x[te];if(ce&&ye[2]?ye[1]!==u[ye[0]]:!(ye[0]in u))return!1}for(;++te<W;){ye=x[te];var Ie=ye[0],Ae=u[Ie],Ne=ye[1];if(ce&&ye[2]){if(Ae===void 0&&!(Ie in u))return!1}else{var Le=new De;if(U)var Ce=U(Ae,Ne,Ie,u,S,Le);if(!(Ce===void 0?Qr(Ne,Ae,U,i|s,Le):Ce))return!1}}return!0}function ht(u){if(!jr(u)||It(u))return!1;var S=ot(u)||Me(u)?Be:A;return S.test(vr(u))}function pt(u){return Mr(u)&&Yr(u.length)&&!!N[tr.call(u)]}function vt(u){return typeof u=="function"?u:u==null?Lt:typeof u=="object"?ur(u)?gt(u[0],u[1]):yt(u):jt(u)}function mt(u){if(!Ot(u))return Vr(u);var S=[];for(var x in Object(u))Ye.call(u,x)&&x!="constructor"&&S.push(x);return S}function yt(u){var S=Pt(u);return S.length==1&&S[0][2]?nt(S[0][0],S[0][1]):function(x){return x===u||dt(x,u,S)}}function gt(u,S){return zr(u)&&at(S)?nt(Lr(u),S):function(x){var U=Nt(x,u);return U===void 0&&U===S?zt(x,u):Qr(S,U,void 0,i|s)}}function Et(u){return function(S){return Xr(S,u)}}function wt(u){if(typeof u=="string")return u;if(Zr(u))return R?R.call(u):"";var S=u+"";return S=="0"&&1/u==-o?"-0":S}function et(u){return ur(u)?u:At(u)}function bt(u,S){return function(x,U){if(x==null)return x;if(!Jr(x))return u(x,U);for(var te=x.length,W=S?te:-1,ce=Object(x);(S?W--:++W<te)&&U(ce[W],W,ce)!==!1;);return x}}function _t(u){return function(S,x,U){for(var te=-1,W=Object(S),ce=U(S),ye=ce.length;ye--;){var Ie=ce[u?ye:++te];if(x(W[Ie],Ie,W)===!1)break}return S}}function rt(u,S,x,U,te,W){var ce=te&s,ye=u.length,Ie=S.length;if(ye!=Ie&&!(ce&&Ie>ye))return!1;var Ae=W.get(u);if(Ae&&W.get(S))return Ae==S;var Ne=-1,Le=!0,Ce=te&i?new Ve:void 0;for(W.set(u,S),W.set(S,u);++Ne<ye;){var Ke=u[Ne],Qe=S[Ne];if(U)var fr=ce?U(Qe,Ke,Ne,S,u,W):U(Ke,Qe,Ne,u,S,W);if(fr!==void 0){if(fr)continue;Le=!1;break}if(Ce){if(!Se(S,function(ir,mr){if(!Ce.has(mr)&&(Ke===ir||x(Ke,ir,U,te,W)))return Ce.add(mr)})){Le=!1;break}}else if(!(Ke===Qe||x(Ke,Qe,U,te,W))){Le=!1;break}}return W.delete(u),W.delete(S),Le}function St(u,S,x,U,te,W,ce){switch(x){case K:if(u.byteLength!=S.byteLength||u.byteOffset!=S.byteOffset)return!1;u=u.buffer,S=S.buffer;case j:return!(u.byteLength!=S.byteLength||!U(new Rr(u),new Rr(S)));case E:case w:case d:return it(+u,+S);case l:return u.name==S.name&&u.message==S.message;case I:case L:return u==S+"";case b:var ye=Ge;case D:var Ie=W&s;if(ye||(ye=Xe),u.size!=S.size&&!Ie)return!1;var Ae=ce.get(u);if(Ae)return Ae==S;W|=i,ce.set(u,S);var Ne=rt(ye(u),ye(S),U,te,W,ce);return ce.delete(u),Ne;case H:if(m)return m.call(u)==m.call(S)}return!1}function $t(u,S,x,U,te,W){var ce=te&s,ye=qr(u),Ie=ye.length,Ae=qr(S),Ne=Ae.length;if(Ie!=Ne&&!ce)return!1;for(var Le=Ie;Le--;){var Ce=ye[Le];if(!(ce?Ce in S:Ye.call(S,Ce)))return!1}var Ke=W.get(u);if(Ke&&W.get(S))return Ke==S;var Qe=!0;W.set(u,S),W.set(S,u);for(var fr=ce;++Le<Ie;){Ce=ye[Le];var ir=u[Ce],mr=S[Ce];if(U)var lt=ce?U(mr,ir,Ce,S,u,W):U(ir,mr,Ce,u,S,W);if(!(lt===void 0?ir===mr||x(ir,mr,U,te,W):lt)){Qe=!1;break}fr||(fr=Ce=="constructor")}if(Qe&&!fr){var Br=u.constructor,Ur=S.constructor;Br!=Ur&&"constructor"in u&&"constructor"in S&&!(typeof Br=="function"&&Br instanceof Br&&typeof Ur=="function"&&Ur instanceof Ur)&&(Qe=!1)}return W.delete(u),W.delete(S),Qe}function Nr(u,S){var x=u.__data__;return Rt(S)?x[typeof S=="string"?"string":"hash"]:x.map}function Pt(u){for(var S=qr(u),x=S.length;x--;){var U=S[x],te=u[U];S[x]=[U,te,at(te)]}return S}function br(u,S){var x=Oe(u,S);return ht(x)?x:void 0}var lr=ut;(Sr&&lr(new Sr(new ArrayBuffer(1)))!=K||Ue&&lr(new Ue)!=b||$r&&lr($r.resolve())!=T||gr&&lr(new gr)!=D||Pr&&lr(new Pr)!=M)&&(lr=function(u){var S=tr.call(u),x=S==_?u.constructor:void 0,U=x?vr(x):void 0;if(U)switch(U){case Ir:return K;case Wr:return b;case Or:return T;case Kr:return D;case Ar:return M}return S});function Tt(u,S,x){S=zr(S,u)?[S]:et(S);for(var U,te=-1,ce=S.length;++te<ce;){var W=Lr(S[te]);if(!(U=u!=null&&x(u,W)))break;u=u[W]}if(U)return U;var ce=u?u.length:0;return!!ce&&Yr(ce)&&tt(W,ce)&&(ur(u)||st(u))}function tt(u,S){return S=S??f,!!S&&(typeof u=="number"||O.test(u))&&u>-1&&u%1==0&&u<S}function zr(u,S){if(ur(u))return!1;var x=typeof u;return x=="number"||x=="symbol"||x=="boolean"||u==null||Zr(u)?!0:Ee.test(u)||!X.test(u)||S!=null&&u in Object(S)}function Rt(u){var S=typeof u;return S=="string"||S=="number"||S=="symbol"||S=="boolean"?u!=="__proto__":u===null}function It(u){return!!sr&&sr in u}function Ot(u){var S=u&&u.constructor,x=typeof S=="function"&&S.prototype||dr;return u===x}function at(u){return u===u&&!jr(u)}function nt(u,S){return function(x){return x==null?!1:x[u]===S&&(S!==void 0||u in Object(x))}}var At=Gr(function(u){u=xt(u);var S=[];return Pe.test(u)&&S.push(""),u.replace(we,function(x,U,te,W){S.push(te?W.replace(xe,"$1"):U||x)}),S});function Lr(u){if(typeof u=="string"||Zr(u))return u;var S=u+"";return S=="0"&&1/u==-o?"-0":S}function vr(u){if(u!=null){try{return _r.call(u)}catch{}try{return u+""}catch{}}return""}function Ct(u,S,x){var U=ur(u)?Fe:rr,te=arguments.length<3;return U(u,vt(S),x,te,Fr)}function Gr(u,S){if(typeof u!="function"||S&&typeof S!="function")throw new TypeError(n);var x=function(){var U=arguments,te=S?S.apply(this,U):U[0],W=x.cache;if(W.has(te))return W.get(te);var ce=u.apply(this,U);return x.cache=W.set(te,ce),ce};return x.cache=new(Gr.Cache||ve),x}Gr.Cache=ve;function it(u,S){return u===S||u!==u&&S!==S}function st(u){return Dt(u)&&Ye.call(u,"callee")&&(!kr.call(u,"callee")||tr.call(u)==p)}var ur=Array.isArray;function Jr(u){return u!=null&&Yr(u.length)&&!ot(u)}function Dt(u){return Mr(u)&&Jr(u)}function ot(u){var S=jr(u)?tr.call(u):"";return S==c||S==y}function Yr(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=f}function jr(u){var S=typeof u;return!!u&&(S=="object"||S=="function")}function Mr(u){return!!u&&typeof u=="object"}function Zr(u){return typeof u=="symbol"||Mr(u)&&tr.call(u)==H}var Ft=ue?$e(ue):pt;function xt(u){return u==null?"":wt(u)}function Nt(u,S,x){var U=u==null?void 0:Xr(u,S);return U===void 0?x:U}function zt(u,S){return u!=null&&Tt(u,S,ft)}function qr(u){return Jr(u)?wr(u):mt(u)}function Lt(u){return u}function jt(u){return zr(u)?je(Lr(u)):Et(u)}t.exports=Ct})(lodash_reduce,lodash_reduceExports);var FUNC_ERROR_TEXT="Expected a function",HASH_UNDEFINED="__lodash_hash_undefined__",INFINITY=1/0,funcTag="[object Function]",genTag="[object GeneratorFunction]",symbolTag="[object Symbol]",reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reEscapeChar=/\\(\\)?/g,reIsHostCtor=/^\[object .+?Constructor\]$/,freeGlobal=typeof{}=="object"&&{}&&{}.Object===Object&&{},freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();function getValue(t,e){return t==null?void 0:t[e]}function isHostObject(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var t=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Symbol$1=root.Symbol,splice=arrayProto.splice,Map$1=getNative(root,"Map"),nativeCreate=getNative(Object,"create"),symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function Hash(t){var e=-1,a=t?t.length:0;for(this.clear();++e<a;){var n=t[e];this.set(n[0],n[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}}function hashDelete(t){return this.has(t)&&delete this.__data__[t]}function hashGet(t){var e=this.__data__;if(nativeCreate){var a=e[t];return a===HASH_UNDEFINED?void 0:a}return hasOwnProperty.call(e,t)?e[t]:void 0}function hashHas(t){var e=this.__data__;return nativeCreate?e[t]!==void 0:hasOwnProperty.call(e,t)}function hashSet(t,e){var a=this.__data__;return a[t]=nativeCreate&&e===void 0?HASH_UNDEFINED:e,this}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function ListCache(t){var e=-1,a=t?t.length:0;for(this.clear();++e<a;){var n=t[e];this.set(n[0],n[1])}}function listCacheClear(){this.__data__=[]}function listCacheDelete(t){var e=this.__data__,a=assocIndexOf(e,t);if(a<0)return!1;var n=e.length-1;return a==n?e.pop():splice.call(e,a,1),!0}function listCacheGet(t){var e=this.__data__,a=assocIndexOf(e,t);return a<0?void 0:e[a][1]}function listCacheHas(t){return assocIndexOf(this.__data__,t)>-1}function listCacheSet(t,e){var a=this.__data__,n=assocIndexOf(a,t);return n<0?a.push([t,e]):a[n][1]=e,this}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function MapCache(t){var e=-1,a=t?t.length:0;for(this.clear();++e<a;){var n=t[e];this.set(n[0],n[1])}}function mapCacheClear(){this.__data__={hash:new Hash,map:new(Map$1||ListCache),string:new Hash}}function mapCacheDelete(t){return getMapData(this,t).delete(t)}function mapCacheGet(t){return getMapData(this,t).get(t)}function mapCacheHas(t){return getMapData(this,t).has(t)}function mapCacheSet(t,e){return getMapData(this,t).set(t,e),this}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function assocIndexOf(t,e){for(var a=t.length;a--;)if(eq(t[a][0],e))return a;return-1}function baseGet(t,e){e=isKey(e,t)?[e]:castPath(e);for(var a=0,n=e.length;t!=null&&a<n;)t=t[toKey(e[a++])];return a&&a==n?t:void 0}function baseIsNative(t){if(!isObject(t)||isMasked(t))return!1;var e=isFunction(t)||isHostObject(t)?reIsNative:reIsHostCtor;return e.test(toSource(t))}function baseToString(t){if(typeof t=="string")return t;if(isSymbol(t))return symbolToString?symbolToString.call(t):"";var e=t+"";return e=="0"&&1/t==-INFINITY?"-0":e}function castPath(t){return isArray(t)?t:stringToPath(t)}function getMapData(t,e){var a=t.__data__;return isKeyable(e)?a[typeof e=="string"?"string":"hash"]:a.map}function getNative(t,e){var a=getValue(t,e);return baseIsNative(a)?a:void 0}function isKey(t,e){if(isArray(t))return!1;var a=typeof t;return a=="number"||a=="symbol"||a=="boolean"||t==null||isSymbol(t)?!0:reIsPlainProp.test(t)||!reIsDeepProp.test(t)||e!=null&&t in Object(e)}function isKeyable(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function isMasked(t){return!!maskSrcKey&&maskSrcKey in t}var stringToPath=memoize(function(t){t=toString(t);var e=[];return reLeadingDot.test(t)&&e.push(""),t.replace(rePropName,function(a,n,r,i){e.push(r?i.replace(reEscapeChar,"$1"):n||a)}),e});function toKey(t){if(typeof t=="string"||isSymbol(t))return t;var e=t+"";return e=="0"&&1/t==-INFINITY?"-0":e}function toSource(t){if(t!=null){try{return funcToString.call(t)}catch{}try{return t+""}catch{}}return""}function memoize(t,e){if(typeof t!="function"||e&&typeof e!="function")throw new TypeError(FUNC_ERROR_TEXT);var a=function(){var n=arguments,r=e?e.apply(this,n):n[0],i=a.cache;if(i.has(r))return i.get(r);var s=t.apply(this,n);return a.cache=i.set(r,s),s};return a.cache=new(memoize.Cache||MapCache),a}memoize.Cache=MapCache;function eq(t,e){return t===e||t!==t&&e!==e}var isArray=Array.isArray;function isFunction(t){var e=isObject(t)?objectToString.call(t):"";return e==funcTag||e==genTag}function isObject(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function isObjectLike(t){return!!t&&typeof t=="object"}function isSymbol(t){return typeof t=="symbol"||isObjectLike(t)&&objectToString.call(t)==symbolTag}function toString(t){return t==null?"":baseToString(t)}function get$1(t,e,a){var n=t==null?void 0:baseGet(t,e);return n===void 0?a:n}var lodash_get=get$1,uri_allExports={},uri_all={get exports(){return uri_allExports},set exports(t){uri_allExports=t}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(t,e){(function({},a){a(e)})(commonjsGlobal,function(a){function n(){for(var P=arguments.length,m=Array(P),R=0;R<P;R++)m[R]=arguments[R];if(m.length>1){m[0]=m[0].slice(0,-1);for(var C=m.length-1,F=1;F<C;++F)m[F]=m[F].slice(1,-1);return m[C]=m[C].slice(1),m.join("")}else return m[0]}function r(P){return"(?:"+P+")"}function i(P){return P===void 0?"undefined":P===null?"null":Object.prototype.toString.call(P).split(" ").pop().split("]").shift().toLowerCase()}function s(P){return P.toUpperCase()}function o(P){return P!=null?P instanceof Array?P:typeof P.length!="number"||P.split||P.setInterval||P.call?[P]:Array.prototype.slice.call(P):[]}function f(P,m){var R=P;if(m)for(var C in m)R[C]=m[C];return R}function p(P){var m="[A-Za-z]",R="[0-9]",C=n(R,"[A-Fa-f]"),F=r(r("%[EFef]"+C+"%"+C+C+"%"+C+C)+"|"+r("%[89A-Fa-f]"+C+"%"+C+C)+"|"+r("%"+C+C)),Z="[\\:\\/\\?\\#\\[\\]\\@]",re="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",fe=n(Z,re),ge=P?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",pe=P?"[\\uE000-\\uF8FF]":"[]",le=n(m,R,"[\\-\\.\\_\\~]",ge);r(m+n(m,R,"[\\+\\-\\.]")+"*"),r(r(F+"|"+n(le,re,"[\\:]"))+"*");var me=r(r("25[0-5]")+"|"+r("2[0-4]"+R)+"|"+r("1"+R+R)+"|"+r("0?[1-9]"+R)+"|0?0?"+R),Re=r(me+"\\."+me+"\\."+me+"\\."+me),ie=r(C+"{1,4}"),be=r(r(ie+"\\:"+ie)+"|"+Re),ve=r(r(ie+"\\:")+"{6}"+be),_e=r("\\:\\:"+r(ie+"\\:")+"{5}"+be),er=r(r(ie)+"?\\:\\:"+r(ie+"\\:")+"{4}"+be),ke=r(r(r(ie+"\\:")+"{0,1}"+ie)+"?\\:\\:"+r(ie+"\\:")+"{3}"+be),He=r(r(r(ie+"\\:")+"{0,2}"+ie)+"?\\:\\:"+r(ie+"\\:")+"{2}"+be),or=r(r(r(ie+"\\:")+"{0,3}"+ie)+"?\\:\\:"+ie+"\\:"+be),Ve=r(r(r(ie+"\\:")+"{0,4}"+ie)+"?\\:\\:"+be),ze=r(r(r(ie+"\\:")+"{0,5}"+ie)+"?\\:\\:"+ie),We=r(r(r(ie+"\\:")+"{0,6}"+ie)+"?\\:\\:"),De=r([ve,_e,er,ke,He,or,Ve,ze,We].join("|")),Ze=r(r(le+"|"+F)+"+");r("[vV]"+C+"+\\."+n(le,re,"[\\:]")+"+"),r(r(F+"|"+n(le,re))+"*");var hr=r(F+"|"+n(le,re,"[\\:\\@]"));return r(r(F+"|"+n(le,re,"[\\@]"))+"+"),r(r(hr+"|"+n("[\\/\\?]",pe))+"*"),{NOT_SCHEME:new RegExp(n("[^]",m,R,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(n("[^\\%\\:]",le,re),"g"),NOT_HOST:new RegExp(n("[^\\%\\[\\]\\:]",le,re),"g"),NOT_PATH:new RegExp(n("[^\\%\\/\\:\\@]",le,re),"g"),NOT_PATH_NOSCHEME:new RegExp(n("[^\\%\\/\\@]",le,re),"g"),NOT_QUERY:new RegExp(n("[^\\%]",le,re,"[\\:\\@\\/\\?]",pe),"g"),NOT_FRAGMENT:new RegExp(n("[^\\%]",le,re,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(n("[^]",le,re),"g"),UNRESERVED:new RegExp(le,"g"),OTHER_CHARS:new RegExp(n("[^\\%]",le,fe),"g"),PCT_ENCODED:new RegExp(F,"g"),IPV4ADDRESS:new RegExp("^("+Re+")$"),IPV6ADDRESS:new RegExp("^\\[?("+De+")"+r(r("\\%25|\\%(?!"+C+"{2})")+"("+Ze+")")+"?\\]?$")}}var h=p(!1),E=p(!0),w=function(){function P(m,R){var C=[],F=!0,Z=!1,re=void 0;try{for(var fe=m[Symbol.iterator](),ge;!(F=(ge=fe.next()).done)&&(C.push(ge.value),!(R&&C.length===R));F=!0);}catch(pe){Z=!0,re=pe}finally{try{!F&&fe.return&&fe.return()}finally{if(Z)throw re}}return C}return function(m,R){if(Array.isArray(m))return m;if(Symbol.iterator in Object(m))return P(m,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(P){if(Array.isArray(P)){for(var m=0,R=Array(P.length);m<P.length;m++)R[m]=P[m];return R}else return Array.from(P)},c=2147483647,y=36,b=1,d=26,_=38,T=700,I=72,D=128,L="-",H=/^xn--/,M=/[^\0-\x7E]/,j=/[\x2E\u3002\uFF0E\uFF61]/g,K={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Q=y-b,V=Math.floor,B=String.fromCharCode;function q(P){throw new RangeError(K[P])}function J(P,m){for(var R=[],C=P.length;C--;)R[C]=m(P[C]);return R}function oe(P,m){var R=P.split("@"),C="";R.length>1&&(C=R[0]+"@",P=R[1]),P=P.replace(j,".");var F=P.split("."),Z=J(F,m).join(".");return C+Z}function ae(P){for(var m=[],R=0,C=P.length;R<C;){var F=P.charCodeAt(R++);if(F>=55296&&F<=56319&&R<C){var Z=P.charCodeAt(R++);(Z&64512)==56320?m.push(((F&1023)<<10)+(Z&1023)+65536):(m.push(F),R--)}else m.push(F)}return m}var se=function(m){return String.fromCodePoint.apply(String,l(m))},ne=function(m){return m-48<10?m-22:m-65<26?m-65:m-97<26?m-97:y},X=function(m,R){return m+22+75*(m<26)-((R!=0)<<5)},Ee=function(m,R,C){var F=0;for(m=C?V(m/T):m>>1,m+=V(m/R);m>Q*d>>1;F+=y)m=V(m/Q);return V(F+(Q+1)*m/(m+_))},Pe=function(m){var R=[],C=m.length,F=0,Z=D,re=I,fe=m.lastIndexOf(L);fe<0&&(fe=0);for(var ge=0;ge<fe;++ge)m.charCodeAt(ge)>=128&&q("not-basic"),R.push(m.charCodeAt(ge));for(var pe=fe>0?fe+1:0;pe<C;){for(var le=F,me=1,Re=y;;Re+=y){pe>=C&&q("invalid-input");var ie=ne(m.charCodeAt(pe++));(ie>=y||ie>V((c-F)/me))&&q("overflow"),F+=ie*me;var be=Re<=re?b:Re>=re+d?d:Re-re;if(ie<be)break;var ve=y-be;me>V(c/ve)&&q("overflow"),me*=ve}var _e=R.length+1;re=Ee(F-le,_e,le==0),V(F/_e)>c-Z&&q("overflow"),Z+=V(F/_e),F%=_e,R.splice(F++,0,Z)}return String.fromCodePoint.apply(String,R)},we=function(m){var R=[];m=ae(m);var C=m.length,F=D,Z=0,re=I,fe=!0,ge=!1,pe=void 0;try{for(var le=m[Symbol.iterator](),me;!(fe=(me=le.next()).done);fe=!0){var Re=me.value;Re<128&&R.push(B(Re))}}catch(pr){ge=!0,pe=pr}finally{try{!fe&&le.return&&le.return()}finally{if(ge)throw pe}}var ie=R.length,be=ie;for(ie&&R.push(L);be<C;){var ve=c,_e=!0,er=!1,ke=void 0;try{for(var He=m[Symbol.iterator](),or;!(_e=(or=He.next()).done);_e=!0){var Ve=or.value;Ve>=F&&Ve<ve&&(ve=Ve)}}catch(pr){er=!0,ke=pr}finally{try{!_e&&He.return&&He.return()}finally{if(er)throw ke}}var ze=be+1;ve-F>V((c-Z)/ze)&&q("overflow"),Z+=(ve-F)*ze,F=ve;var We=!0,De=!1,Ze=void 0;try{for(var hr=m[Symbol.iterator](),Cr;!(We=(Cr=hr.next()).done);We=!0){var Dr=Cr.value;if(Dr<F&&++Z>c&&q("overflow"),Dr==F){for(var Er=Z,wr=y;;wr+=y){var nr=wr<=re?b:wr>=re+d?d:wr-re;if(Er<nr)break;var Fr=Er-nr,xr=y-nr;R.push(B(X(nr+Fr%xr,0))),Er=V(Fr/xr)}R.push(B(X(Er,0))),re=Ee(Z,ze,be==ie),Z=0,++be}}}catch(pr){De=!0,Ze=pr}finally{try{!We&&hr.return&&hr.return()}finally{if(De)throw Ze}}++Z,++F}return R.join("")},he=function(m){return oe(m,function(R){return H.test(R)?Pe(R.slice(4).toLowerCase()):R})},xe=function(m){return oe(m,function(R){return M.test(R)?"xn--"+we(R):R})},A={version:"2.1.0",ucs2:{decode:ae,encode:se},decode:Pe,encode:we,toASCII:xe,toUnicode:he},O={};function N(P){var m=P.charCodeAt(0),R=void 0;return m<16?R="%0"+m.toString(16).toUpperCase():m<128?R="%"+m.toString(16).toUpperCase():m<2048?R="%"+(m>>6|192).toString(16).toUpperCase()+"%"+(m&63|128).toString(16).toUpperCase():R="%"+(m>>12|224).toString(16).toUpperCase()+"%"+(m>>6&63|128).toString(16).toUpperCase()+"%"+(m&63|128).toString(16).toUpperCase(),R}function G(P){for(var m="",R=0,C=P.length;R<C;){var F=parseInt(P.substr(R+1,2),16);if(F<128)m+=String.fromCharCode(F),R+=3;else if(F>=194&&F<224){if(C-R>=6){var Z=parseInt(P.substr(R+4,2),16);m+=String.fromCharCode((F&31)<<6|Z&63)}else m+=P.substr(R,6);R+=6}else if(F>=224){if(C-R>=9){var re=parseInt(P.substr(R+4,2),16),fe=parseInt(P.substr(R+7,2),16);m+=String.fromCharCode((F&15)<<12|(re&63)<<6|fe&63)}else m+=P.substr(R,9);R+=9}else m+=P.substr(R,3),R+=3}return m}function Y(P,m){function R(C){var F=G(C);return F.match(m.UNRESERVED)?F:C}return P.scheme&&(P.scheme=String(P.scheme).replace(m.PCT_ENCODED,R).toLowerCase().replace(m.NOT_SCHEME,"")),P.userinfo!==void 0&&(P.userinfo=String(P.userinfo).replace(m.PCT_ENCODED,R).replace(m.NOT_USERINFO,N).replace(m.PCT_ENCODED,s)),P.host!==void 0&&(P.host=String(P.host).replace(m.PCT_ENCODED,R).toLowerCase().replace(m.NOT_HOST,N).replace(m.PCT_ENCODED,s)),P.path!==void 0&&(P.path=String(P.path).replace(m.PCT_ENCODED,R).replace(P.scheme?m.NOT_PATH:m.NOT_PATH_NOSCHEME,N).replace(m.PCT_ENCODED,s)),P.query!==void 0&&(P.query=String(P.query).replace(m.PCT_ENCODED,R).replace(m.NOT_QUERY,N).replace(m.PCT_ENCODED,s)),P.fragment!==void 0&&(P.fragment=String(P.fragment).replace(m.PCT_ENCODED,R).replace(m.NOT_FRAGMENT,N).replace(m.PCT_ENCODED,s)),P}function v(P){return P.replace(/^0*(.*)/,"$1")||"0"}function g(P,m){var R=P.match(m.IPV4ADDRESS)||[],C=w(R,2),F=C[1];return F?F.split(".").map(v).join("."):P}function z(P,m){var R=P.match(m.IPV6ADDRESS)||[],C=w(R,3),F=C[1],Z=C[2];if(F){for(var re=F.toLowerCase().split("::").reverse(),fe=w(re,2),ge=fe[0],pe=fe[1],le=pe?pe.split(":").map(v):[],me=ge.split(":").map(v),Re=m.IPV4ADDRESS.test(me[me.length-1]),ie=Re?7:8,be=me.length-ie,ve=Array(ie),_e=0;_e<ie;++_e)ve[_e]=le[_e]||me[be+_e]||"";Re&&(ve[ie-1]=g(ve[ie-1],m));var er=ve.reduce(function(ze,We,De){if(!We||We==="0"){var Ze=ze[ze.length-1];Ze&&Ze.index+Ze.length===De?Ze.length++:ze.push({index:De,length:1})}return ze},[]),ke=er.sort(function(ze,We){return We.length-ze.length})[0],He=void 0;if(ke&&ke.length>1){var or=ve.slice(0,ke.index),Ve=ve.slice(ke.index+ke.length);He=or.join(":")+"::"+Ve.join(":")}else He=ve.join(":");return Z&&(He+="%"+Z),He}else return P}var k=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,de="".match(/(){0}/)[1]===void 0;function ee(P){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},R={},C=m.iri!==!1?E:h;m.reference==="suffix"&&(P=(m.scheme?m.scheme+":":"")+"//"+P);var F=P.match(k);if(F){de?(R.scheme=F[1],R.userinfo=F[3],R.host=F[4],R.port=parseInt(F[5],10),R.path=F[6]||"",R.query=F[7],R.fragment=F[8],isNaN(R.port)&&(R.port=F[5])):(R.scheme=F[1]||void 0,R.userinfo=P.indexOf("@")!==-1?F[3]:void 0,R.host=P.indexOf("//")!==-1?F[4]:void 0,R.port=parseInt(F[5],10),R.path=F[6]||"",R.query=P.indexOf("?")!==-1?F[7]:void 0,R.fragment=P.indexOf("#")!==-1?F[8]:void 0,isNaN(R.port)&&(R.port=P.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?F[4]:void 0)),R.host&&(R.host=z(g(R.host,C),C)),R.scheme===void 0&&R.userinfo===void 0&&R.host===void 0&&R.port===void 0&&!R.path&&R.query===void 0?R.reference="same-document":R.scheme===void 0?R.reference="relative":R.fragment===void 0?R.reference="absolute":R.reference="uri",m.reference&&m.reference!=="suffix"&&m.reference!==R.reference&&(R.error=R.error||"URI is not a "+m.reference+" reference.");var Z=O[(m.scheme||R.scheme||"").toLowerCase()];if(!m.unicodeSupport&&(!Z||!Z.unicodeSupport)){if(R.host&&(m.domainHost||Z&&Z.domainHost))try{R.host=A.toASCII(R.host.replace(C.PCT_ENCODED,G).toLowerCase())}catch(re){R.error=R.error||"Host's domain name can not be converted to ASCII via punycode: "+re}Y(R,h)}else Y(R,C);Z&&Z.parse&&Z.parse(R,m)}else R.error=R.error||"URI can not be parsed.";return R}function ue(P,m){var R=m.iri!==!1?E:h,C=[];return P.userinfo!==void 0&&(C.push(P.userinfo),C.push("@")),P.host!==void 0&&C.push(z(g(String(P.host),R),R).replace(R.IPV6ADDRESS,function(F,Z,re){return"["+Z+(re?"%25"+re:"")+"]"})),(typeof P.port=="number"||typeof P.port=="string")&&(C.push(":"),C.push(String(P.port))),C.length?C.join(""):void 0}var Fe=/^\.\.?\//,Se=/^\/\.(\/|$)/,je=/^\/\.\.(\/|$)/,rr=/^\/?(?:.|\n)*?(?=\/|$)/;function Te(P){for(var m=[];P.length;)if(P.match(Fe))P=P.replace(Fe,"");else if(P.match(Se))P=P.replace(Se,"/");else if(P.match(je))P=P.replace(je,"/"),m.pop();else if(P==="."||P==="..")P="";else{var R=P.match(rr);if(R){var C=R[0];P=P.slice(C.length),m.push(C)}else throw new Error("Unexpected dot segment condition")}return m.join("")}function $e(P){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},R=m.iri?E:h,C=[],F=O[(m.scheme||P.scheme||"").toLowerCase()];if(F&&F.serialize&&F.serialize(P,m),P.host&&!R.IPV6ADDRESS.test(P.host)){if(m.domainHost||F&&F.domainHost)try{P.host=m.iri?A.toUnicode(P.host):A.toASCII(P.host.replace(R.PCT_ENCODED,G).toLowerCase())}catch(fe){P.error=P.error||"Host's domain name can not be converted to "+(m.iri?"Unicode":"ASCII")+" via punycode: "+fe}}Y(P,R),m.reference!=="suffix"&&P.scheme&&(C.push(P.scheme),C.push(":"));var Z=ue(P,m);if(Z!==void 0&&(m.reference!=="suffix"&&C.push("//"),C.push(Z),P.path&&P.path.charAt(0)!=="/"&&C.push("/")),P.path!==void 0){var re=P.path;!m.absolutePath&&(!F||!F.absolutePath)&&(re=Te(re)),Z===void 0&&(re=re.replace(/^\/\//,"/%2F")),C.push(re)}return P.query!==void 0&&(C.push("?"),C.push(P.query)),P.fragment!==void 0&&(C.push("#"),C.push(P.fragment)),C.join("")}function Oe(P,m){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},C=arguments[3],F={};return C||(P=ee($e(P,R),R),m=ee($e(m,R),R)),R=R||{},!R.tolerant&&m.scheme?(F.scheme=m.scheme,F.userinfo=m.userinfo,F.host=m.host,F.port=m.port,F.path=Te(m.path||""),F.query=m.query):(m.userinfo!==void 0||m.host!==void 0||m.port!==void 0?(F.userinfo=m.userinfo,F.host=m.host,F.port=m.port,F.path=Te(m.path||""),F.query=m.query):(m.path?(m.path.charAt(0)==="/"?F.path=Te(m.path):((P.userinfo!==void 0||P.host!==void 0||P.port!==void 0)&&!P.path?F.path="/"+m.path:P.path?F.path=P.path.slice(0,P.path.lastIndexOf("/")+1)+m.path:F.path=m.path,F.path=Te(F.path)),F.query=m.query):(F.path=P.path,m.query!==void 0?F.query=m.query:F.query=P.query),F.userinfo=P.userinfo,F.host=P.host,F.port=P.port),F.scheme=P.scheme),F.fragment=m.fragment,F}function Me(P,m,R){var C=f({scheme:"null"},R);return $e(Oe(ee(P,C),ee(m,C),C,!0),C)}function Ge(P,m){return typeof P=="string"?P=$e(ee(P,m),m):i(P)==="object"&&(P=ee($e(P,m),m)),P}function qe(P,m,R){return typeof P=="string"?P=$e(ee(P,R),R):i(P)==="object"&&(P=$e(P,R)),typeof m=="string"?m=$e(ee(m,R),R):i(m)==="object"&&(m=$e(m,R)),P===m}function Xe(P,m){return P&&P.toString().replace(!m||!m.iri?h.ESCAPE:E.ESCAPE,N)}function Je(P,m){return P&&P.toString().replace(!m||!m.iri?h.PCT_ENCODED:E.PCT_ENCODED,G)}var cr={scheme:"http",domainHost:!0,parse:function(m,R){return m.host||(m.error=m.error||"HTTP URIs must have a host."),m},serialize:function(m,R){var C=String(m.scheme).toLowerCase()==="https";return(m.port===(C?443:80)||m.port==="")&&(m.port=void 0),m.path||(m.path="/"),m}},dr={scheme:"https",domainHost:cr.domainHost,parse:cr.parse,serialize:cr.serialize};function yr(P){return typeof P.secure=="boolean"?P.secure:String(P.scheme).toLowerCase()==="wss"}var sr={scheme:"ws",domainHost:!0,parse:function(m,R){var C=m;return C.secure=yr(C),C.resourceName=(C.path||"/")+(C.query?"?"+C.query:""),C.path=void 0,C.query=void 0,C},serialize:function(m,R){if((m.port===(yr(m)?443:80)||m.port==="")&&(m.port=void 0),typeof m.secure=="boolean"&&(m.scheme=m.secure?"wss":"ws",m.secure=void 0),m.resourceName){var C=m.resourceName.split("?"),F=w(C,2),Z=F[0],re=F[1];m.path=Z&&Z!=="/"?Z:void 0,m.query=re,m.resourceName=void 0}return m.fragment=void 0,m}},_r={scheme:"wss",domainHost:sr.domainHost,parse:sr.parse,serialize:sr.serialize},Ye={},tr="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Be="[0-9A-Fa-f]",Tr=r(r("%[EFef]"+Be+"%"+Be+Be+"%"+Be+Be)+"|"+r("%[89A-Fa-f]"+Be+"%"+Be+Be)+"|"+r("%"+Be+Be)),Rr="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",kr="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Hr=n(kr,'[\\"\\\\]'),Vr="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Sr=new RegExp(tr,"g"),Ue=new RegExp(Tr,"g"),$r=new RegExp(n("[^]",Rr,"[\\.]",'[\\"]',Hr),"g"),gr=new RegExp(n("[^]",tr,Vr),"g"),Pr=gr;function ar(P){var m=G(P);return m.match(Sr)?m:P}var Ir={scheme:"mailto",parse:function(m,R){var C=m,F=C.to=C.path?C.path.split(","):[];if(C.path=void 0,C.query){for(var Z=!1,re={},fe=C.query.split("&"),ge=0,pe=fe.length;ge<pe;++ge){var le=fe[ge].split("=");switch(le[0]){case"to":for(var me=le[1].split(","),Re=0,ie=me.length;Re<ie;++Re)F.push(me[Re]);break;case"subject":C.subject=Je(le[1],R);break;case"body":C.body=Je(le[1],R);break;default:Z=!0,re[Je(le[0],R)]=Je(le[1],R);break}}Z&&(C.headers=re)}C.query=void 0;for(var be=0,ve=F.length;be<ve;++be){var _e=F[be].split("@");if(_e[0]=Je(_e[0]),R.unicodeSupport)_e[1]=Je(_e[1],R).toLowerCase();else try{_e[1]=A.toASCII(Je(_e[1],R).toLowerCase())}catch(er){C.error=C.error||"Email address's domain name can not be converted to ASCII via punycode: "+er}F[be]=_e.join("@")}return C},serialize:function(m,R){var C=m,F=o(m.to);if(F){for(var Z=0,re=F.length;Z<re;++Z){var fe=String(F[Z]),ge=fe.lastIndexOf("@"),pe=fe.slice(0,ge).replace(Ue,ar).replace(Ue,s).replace($r,N),le=fe.slice(ge+1);try{le=R.iri?A.toUnicode(le):A.toASCII(Je(le,R).toLowerCase())}catch(be){C.error=C.error||"Email address's domain name can not be converted to "+(R.iri?"Unicode":"ASCII")+" via punycode: "+be}F[Z]=pe+"@"+le}C.path=F.join(",")}var me=m.headers=m.headers||{};m.subject&&(me.subject=m.subject),m.body&&(me.body=m.body);var Re=[];for(var ie in me)me[ie]!==Ye[ie]&&Re.push(ie.replace(Ue,ar).replace(Ue,s).replace(gr,N)+"="+me[ie].replace(Ue,ar).replace(Ue,s).replace(Pr,N));return Re.length&&(C.query=Re.join("&")),C}},Wr=/^([^\:]+)\:(.*)/,Or={scheme:"urn",parse:function(m,R){var C=m.path&&m.path.match(Wr),F=m;if(C){var Z=R.scheme||F.scheme||"urn",re=C[1].toLowerCase(),fe=C[2],ge=Z+":"+(R.nid||re),pe=O[ge];F.nid=re,F.nss=fe,F.path=void 0,pe&&(F=pe.parse(F,R))}else F.error=F.error||"URN can not be parsed.";return F},serialize:function(m,R){var C=R.scheme||m.scheme||"urn",F=m.nid,Z=C+":"+(R.nid||F),re=O[Z];re&&(m=re.serialize(m,R));var fe=m,ge=m.nss;return fe.path=(F||R.nid)+":"+ge,fe}},Kr=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ar={scheme:"urn:uuid",parse:function(m,R){var C=m;return C.uuid=C.nss,C.nss=void 0,!R.tolerant&&(!C.uuid||!C.uuid.match(Kr))&&(C.error=C.error||"UUID is not valid."),C},serialize:function(m,R){var C=m;return C.nss=(m.uuid||"").toLowerCase(),C}};O[cr.scheme]=cr,O[dr.scheme]=dr,O[sr.scheme]=sr,O[_r.scheme]=_r,O[Ir.scheme]=Ir,O[Or.scheme]=Or,O[Ar.scheme]=Ar,a.SCHEMES=O,a.pctEncChar=N,a.pctDecChars=G,a.parse=ee,a.removeDotSegments=Te,a.serialize=$e,a.resolveComponents=Oe,a.resolve=Me,a.normalize=Ge,a.equal=qe,a.escapeComponent=Xe,a.unescapeComponent=Je,Object.defineProperty(a,"__esModule",{value:!0})})})(uri_all,uri_allExports);var fastDeepEqual=function t(e,a){if(e===a)return!0;if(e&&a&&typeof e=="object"&&typeof a=="object"){if(e.constructor!==a.constructor)return!1;var n,r,i;if(Array.isArray(e)){if(n=e.length,n!=a.length)return!1;for(r=n;r--!==0;)if(!t(e[r],a[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===a.source&&e.flags===a.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===a.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===a.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(a).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(a,i[r]))return!1;for(r=n;r--!==0;){var s=i[r];if(!t(e[s],a[s]))return!1}return!0}return e!==e&&a!==a},ucs2length$1=function(e){for(var a=0,n=e.length,r=0,i;r<n;)a++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<n&&(i=e.charCodeAt(r),(i&64512)==56320&&r++);return a},util$5={copy,checkDataType,checkDataTypes,coerceToTypes,toHash:toHash$1,getProperty,escapeQuotes,equal:fastDeepEqual,ucs2length:ucs2length$1,varOccurences,varReplace,schemaHasRules,schemaHasRulesExcept,schemaUnknownRules,toQuotedString,getPathExpr,getPath,getData,unescapeFragment,unescapeJsonPointer,escapeFragment,escapeJsonPointer};function copy(t,e){e=e||{};for(var a in t)e[a]=t[a];return e}function checkDataType(t,e,a,n){var r=n?" !== ":" === ",i=n?" || ":" && ",s=n?"!":"",o=n?"":"!";switch(t){case"null":return e+r+"null";case"array":return s+"Array.isArray("+e+")";case"object":return"("+s+e+i+"typeof "+e+r+'"object"'+i+o+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+r+'"number"'+i+o+"("+e+" % 1)"+i+e+r+e+(a?i+s+"isFinite("+e+")":"")+")";case"number":return"(typeof "+e+r+'"'+t+'"'+(a?i+s+"isFinite("+e+")":"")+")";default:return"typeof "+e+r+'"'+t+'"'}}function checkDataTypes(t,e,a){switch(t.length){case 1:return checkDataType(t[0],e,a,!0);default:var n="",r=toHash$1(t);r.array&&r.object&&(n=r.null?"(":"(!"+e+" || ",n+="typeof "+e+' !== "object")',delete r.null,delete r.array,delete r.object),r.number&&delete r.integer;for(var i in r)n+=(n?" && ":"")+checkDataType(i,e,a,!0);return n}}var COERCE_TO_TYPES=toHash$1(["string","number","integer","boolean","null"]);function coerceToTypes(t,e){if(Array.isArray(e)){for(var a=[],n=0;n<e.length;n++){var r=e[n];(COERCE_TO_TYPES[r]||t==="array"&&r==="array")&&(a[a.length]=r)}if(a.length)return a}else{if(COERCE_TO_TYPES[e])return[e];if(t==="array"&&e==="array")return["array"]}}function toHash$1(t){for(var e={},a=0;a<t.length;a++)e[t[a]]=!0;return e}var IDENTIFIER$1=/^[a-z$_][a-z$_0-9]*$/i,SINGLE_QUOTE=/'|\\/g;function getProperty(t){return typeof t=="number"?"["+t+"]":IDENTIFIER$1.test(t)?"."+t:"['"+escapeQuotes(t)+"']"}function escapeQuotes(t){return t.replace(SINGLE_QUOTE,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function varOccurences(t,e){e+="[^0-9]";var a=t.match(new RegExp(e,"g"));return a?a.length:0}function varReplace(t,e,a){return e+="([^0-9])",a=a.replace(/\$/g,"$$$$"),t.replace(new RegExp(e,"g"),a+"$1")}function schemaHasRules(t,e){if(typeof t=="boolean")return!t;for(var a in t)if(e[a])return!0}function schemaHasRulesExcept(t,e,a){if(typeof t=="boolean")return!t&&a!="not";for(var n in t)if(n!=a&&e[n])return!0}function schemaUnknownRules(t,e){if(typeof t!="boolean"){for(var a in t)if(!e[a])return a}}function toQuotedString(t){return"'"+escapeQuotes(t)+"'"}function getPathExpr(t,e,a,n){var r=a?"'/' + "+e+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'";return joinPaths(t,r)}function getPath(t,e,a){var n=toQuotedString(a?"/"+escapeJsonPointer(e):getProperty(e));return joinPaths(t,n)}var JSON_POINTER$1=/^\/(?:[^~]|~0|~1)*$/,RELATIVE_JSON_POINTER$1=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function getData(t,e,a){var n,r,i,s;if(t==="")return"rootData";if(t[0]=="/"){if(!JSON_POINTER$1.test(t))throw new Error("Invalid JSON-pointer: "+t);r=t,i="rootData"}else{if(s=t.match(RELATIVE_JSON_POINTER$1),!s)throw new Error("Invalid JSON-pointer: "+t);if(n=+s[1],r=s[2],r=="#"){if(n>=e)throw new Error("Cannot access property/index "+n+" levels up, current level is "+e);return a[e-n]}if(n>e)throw new Error("Cannot access data "+n+" levels up, current level is "+e);if(i="data"+(e-n||""),!r)return i}for(var o=i,f=r.split("/"),p=0;p<f.length;p++){var h=f[p];h&&(i+=getProperty(unescapeJsonPointer(h)),o+=" && "+i)}return o}function joinPaths(t,e){return t=='""'?e:(t+" + "+e).replace(/([^\\])' \+ '/g,"$1")}function unescapeFragment(t){return unescapeJsonPointer(decodeURIComponent(t))}function escapeFragment(t){return encodeURIComponent(escapeJsonPointer(t))}function escapeJsonPointer(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}function unescapeJsonPointer(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}var util$4=util$5,schema_obj=SchemaObject$2;function SchemaObject$2(t){util$4.copy(t,this)}var jsonSchemaTraverseExports={},jsonSchemaTraverse={get exports(){return jsonSchemaTraverseExports},set exports(t){jsonSchemaTraverseExports=t}},traverse$1=jsonSchemaTraverse.exports=function(t,e,a){typeof e=="function"&&(a=e,e={}),a=e.cb||a;var n=typeof a=="function"?a:a.pre||function(){},r=a.post||function(){};_traverse(e,n,r,t,"",t)};traverse$1.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};traverse$1.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};traverse$1.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};traverse$1.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function _traverse(t,e,a,n,r,i,s,o,f,p){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,r,i,s,o,f,p);for(var h in n){var E=n[h];if(Array.isArray(E)){if(h in traverse$1.arrayKeywords)for(var w=0;w<E.length;w++)_traverse(t,e,a,E[w],r+"/"+h+"/"+w,i,r,h,n,w)}else if(h in traverse$1.propsKeywords){if(E&&typeof E=="object")for(var l in E)_traverse(t,e,a,E[l],r+"/"+h+"/"+escapeJsonPtr(l),i,r,h,n,l)}else(h in traverse$1.keywords||t.allKeys&&!(h in traverse$1.skipKeywords))&&_traverse(t,e,a,E,r+"/"+h,i,r,h,n)}a(n,r,i,s,o,f,p)}}function escapeJsonPtr(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}var URI$1=uri_allExports,equal$1=fastDeepEqual,util$3=util$5,SchemaObject$1=schema_obj,traverse=jsonSchemaTraverseExports,resolve_1=resolve$3;resolve$3.normalizeId=normalizeId;resolve$3.fullPath=getFullPath;resolve$3.url=resolveUrl;resolve$3.ids=resolveIds;resolve$3.inlineRef=inlineRef;resolve$3.schema=resolveSchema;function resolve$3(t,e,a){var n=this._refs[a];if(typeof n=="string")if(this._refs[n])n=this._refs[n];else return resolve$3.call(this,t,e,n);if(n=n||this._schemas[a],n instanceof SchemaObject$1)return inlineRef(n.schema,this._opts.inlineRefs)?n.schema:n.validate||this._compile(n);var r=resolveSchema.call(this,e,a),i,s,o;return r&&(i=r.schema,e=r.root,o=r.baseId),i instanceof SchemaObject$1?s=i.validate||t.call(this,i.schema,e,void 0,o):i!==void 0&&(s=inlineRef(i,this._opts.inlineRefs)?i:t.call(this,i,e,void 0,o)),s}function resolveSchema(t,e){var a=URI$1.parse(e),n=_getFullPath(a),r=getFullPath(this._getId(t.schema));if(Object.keys(t.schema).length===0||n!==r){var i=normalizeId(n),s=this._refs[i];if(typeof s=="string")return resolveRecursive.call(this,t,s,a);if(s instanceof SchemaObject$1)s.validate||this._compile(s),t=s;else if(s=this._schemas[i],s instanceof SchemaObject$1){if(s.validate||this._compile(s),i==normalizeId(e))return{schema:s,root:t,baseId:r};t=s}else return;if(!t.schema)return;r=getFullPath(this._getId(t.schema))}return getJsonPointer.call(this,a,r,t.schema,t)}function resolveRecursive(t,e,a){var n=resolveSchema.call(this,t,e);if(n){var r=n.schema,i=n.baseId;t=n.root;var s=this._getId(r);return s&&(i=resolveUrl(i,s)),getJsonPointer.call(this,a,i,r,t)}}var PREVENT_SCOPE_CHANGE=util$3.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function getJsonPointer(t,e,a,n){if(t.fragment=t.fragment||"",t.fragment.slice(0,1)=="/"){for(var r=t.fragment.split("/"),i=1;i<r.length;i++){var s=r[i];if(s){if(s=util$3.unescapeFragment(s),a=a[s],a===void 0)break;var o;if(!PREVENT_SCOPE_CHANGE[s]&&(o=this._getId(a),o&&(e=resolveUrl(e,o)),a.$ref)){var f=resolveUrl(e,a.$ref),p=resolveSchema.call(this,n,f);p&&(a=p.schema,n=p.root,e=p.baseId)}}}if(a!==void 0&&a!==n.schema)return{schema:a,root:n,baseId:e}}}var SIMPLE_INLINED=util$3.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function inlineRef(t,e){if(e===!1)return!1;if(e===void 0||e===!0)return checkNoRef(t);if(e)return countKeys(t)<=e}function checkNoRef(t){var e;if(Array.isArray(t)){for(var a=0;a<t.length;a++)if(e=t[a],typeof e=="object"&&!checkNoRef(e))return!1}else for(var n in t)if(n=="$ref"||(e=t[n],typeof e=="object"&&!checkNoRef(e)))return!1;return!0}function countKeys(t){var e=0,a;if(Array.isArray(t)){for(var n=0;n<t.length;n++)if(a=t[n],typeof a=="object"&&(e+=countKeys(a)),e==1/0)return 1/0}else for(var r in t){if(r=="$ref")return 1/0;if(SIMPLE_INLINED[r])e++;else if(a=t[r],typeof a=="object"&&(e+=countKeys(a)+1),e==1/0)return 1/0}return e}function getFullPath(t,e){e!==!1&&(t=normalizeId(t));var a=URI$1.parse(t);return _getFullPath(a)}function _getFullPath(t){return URI$1.serialize(t).split("#")[0]+"#"}var TRAILING_SLASH_HASH=/#\/?$/;function normalizeId(t){return t?t.replace(TRAILING_SLASH_HASH,""):""}function resolveUrl(t,e){return e=normalizeId(e),URI$1.resolve(t,e)}function resolveIds(t){var e=normalizeId(this._getId(t)),a={"":e},n={"":getFullPath(e,!1)},r={},i=this;return traverse(t,{allKeys:!0},function(s,o,f,p,h,E,w){if(o!==""){var l=i._getId(s),c=a[p],y=n[p]+"/"+h;if(w!==void 0&&(y+="/"+(typeof w=="number"?w:util$3.escapeFragment(w))),typeof l=="string"){l=c=normalizeId(c?URI$1.resolve(c,l):l);var b=i._refs[l];if(typeof b=="string"&&(b=i._refs[b]),b&&b.schema){if(!equal$1(s,b.schema))throw new Error('id "'+l+'" resolves to more than one schema')}else if(l!=normalizeId(y))if(l[0]=="#"){if(r[l]&&!equal$1(s,r[l]))throw new Error('id "'+l+'" resolves to more than one schema');r[l]=s}else i._refs[l]=y}a[o]=c,n[o]=y}}),r}var resolve$2=resolve_1,error_classes={Validation:errorSubclass(ValidationError$1),MissingRef:errorSubclass(MissingRefError$1)};function ValidationError$1(t){this.message="validation failed",this.errors=t,this.ajv=this.validation=!0}MissingRefError$1.message=function(t,e){return"can't resolve reference "+e+" from id "+t};function MissingRefError$1(t,e,a){this.message=a||MissingRefError$1.message(t,e),this.missingRef=resolve$2.url(t,e),this.missingSchema=resolve$2.normalizeId(resolve$2.fullPath(this.missingRef))}function errorSubclass(t){return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var fastJsonStableStringify=function(t,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var a=typeof e.cycles=="boolean"?e.cycles:!1,n=e.cmp&&function(i){return function(s){return function(o,f){var p={key:o,value:s[o]},h={key:f,value:s[f]};return i(p,h)}}}(e.cmp),r=[];return function i(s){if(s&&s.toJSON&&typeof s.toJSON=="function"&&(s=s.toJSON()),s!==void 0){if(typeof s=="number")return isFinite(s)?""+s:"null";if(typeof s!="object")return JSON.stringify(s);var o,f;if(Array.isArray(s)){for(f="[",o=0;o<s.length;o++)o&&(f+=","),f+=i(s[o])||"null";return f+"]"}if(s===null)return"null";if(r.indexOf(s)!==-1){if(a)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var p=r.push(s)-1,h=Object.keys(s).sort(n&&n(s));for(f="",o=0;o<h.length;o++){var E=h[o],w=i(s[E]);w&&(f&&(f+=","),f+=JSON.stringify(E)+":"+w)}return r.splice(p,1),"{"+f+"}"}}(t)},validate$1=function(e,a,n){var r="",i=e.schema.$async===!0,s=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),o=e.self._getId(e.schema);if(e.opts.strictKeywords){var f=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(f){var p="unknown keyword: "+f;if(e.opts.strictKeywords==="log")e.logger.warn(p);else throw new Error(p)}}if(e.isTop&&(r+=" var validate = ",i&&(e.async=!0,r+="async "),r+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",o&&(e.opts.sourceCode||e.opts.processCode)&&(r+=" "+("/*# sourceURL="+o+" */")+" ")),typeof e.schema=="boolean"||!(s||e.schema.$ref)){var a="false schema",h=e.level,E=e.dataLevel,w=e.schema[a],l=e.schemaPath+e.util.getProperty(a),c=e.errSchemaPath+"/"+a,D=!e.opts.allErrors,M,y="data"+(E||""),I="valid"+h;if(e.schema===!1){e.isTop?D=!0:r+=" var "+I+" = false; ";var b=b||[];b.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(M||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'boolean schema is false' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+y+" "),r+=" } "):r+=" {} ";var d=r;r=b.pop(),!e.compositeRule&&D?e.async?r+=" throw new ValidationError(["+d+"]); ":r+=" validate.errors = ["+d+"]; return false; ":r+=" var err = "+d+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?i?r+=" return data; ":r+=" validate.errors = null; return true; ":r+=" var "+I+" = true; ";return e.isTop&&(r+=" }; return validate; "),r}if(e.isTop){var _=e.isTop,h=e.level=0,E=e.dataLevel=0,y="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==void 0&&e.opts.useDefaults&&e.opts.strictDefaults){var T="default is ignored in the schema root";if(e.opts.strictDefaults==="log")e.logger.warn(T);else throw new Error(T)}r+=" var vErrors = null; ",r+=" var errors = 0;     ",r+=" if (rootData === undefined) rootData = data; "}else{var h=e.level,E=e.dataLevel,y="data"+(E||"");if(o&&(e.baseId=e.resolve.url(e.baseId,o)),i&&!e.async)throw new Error("async schema in sync schema");r+=" var errs_"+h+" = errors;"}var I="valid"+h,D=!e.opts.allErrors,L="",H="",M,j=e.schema.type,K=Array.isArray(j);if(j&&e.opts.nullable&&e.schema.nullable===!0&&(K?j.indexOf("null")==-1&&(j=j.concat("null")):j!="null"&&(j=[j,"null"],K=!0)),K&&j.length==1&&(j=j[0],K=!1),e.schema.$ref&&s){if(e.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');e.opts.extendRefs!==!0&&(s=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(r+=" "+e.RULES.all.$comment.code(e,"$comment")),j){if(e.opts.coerceTypes)var Q=e.util.coerceToTypes(e.opts.coerceTypes,j);var V=e.RULES.types[j];if(Q||K||V===!0||V&&!Se(V)){var l=e.schemaPath+".type",c=e.errSchemaPath+"/type",l=e.schemaPath+".type",c=e.errSchemaPath+"/type",B=K?"checkDataTypes":"checkDataType";if(r+=" if ("+e.util[B](j,y,e.opts.strictNumbers,!0)+") { ",Q){var q="dataType"+h,J="coerced"+h;r+=" var "+q+" = typeof "+y+"; var "+J+" = undefined; ",e.opts.coerceTypes=="array"&&(r+=" if ("+q+" == 'object' && Array.isArray("+y+") && "+y+".length == 1) { "+y+" = "+y+"[0]; "+q+" = typeof "+y+"; if ("+e.util.checkDataType(e.schema.type,y,e.opts.strictNumbers)+") "+J+" = "+y+"; } "),r+=" if ("+J+" !== undefined) ; ";var oe=Q;if(oe)for(var ae,se=-1,ne=oe.length-1;se<ne;)ae=oe[se+=1],ae=="string"?r+=" else if ("+q+" == 'number' || "+q+" == 'boolean') "+J+" = '' + "+y+"; else if ("+y+" === null) "+J+" = ''; ":ae=="number"||ae=="integer"?(r+=" else if ("+q+" == 'boolean' || "+y+" === null || ("+q+" == 'string' && "+y+" && "+y+" == +"+y+" ",ae=="integer"&&(r+=" && !("+y+" % 1)"),r+=")) "+J+" = +"+y+"; "):ae=="boolean"?r+=" else if ("+y+" === 'false' || "+y+" === 0 || "+y+" === null) "+J+" = false; else if ("+y+" === 'true' || "+y+" === 1) "+J+" = true; ":ae=="null"?r+=" else if ("+y+" === '' || "+y+" === 0 || "+y+" === false) "+J+" = null; ":e.opts.coerceTypes=="array"&&ae=="array"&&(r+=" else if ("+q+" == 'string' || "+q+" == 'number' || "+q+" == 'boolean' || "+y+" == null) "+J+" = ["+y+"]; ");r+=" else {   ";var b=b||[];b.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(M||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { type: '",K?r+=""+j.join(","):r+=""+j,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",K?r+=""+j.join(","):r+=""+j,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+y+" "),r+=" } "):r+=" {} ";var d=r;r=b.pop(),!e.compositeRule&&D?e.async?r+=" throw new ValidationError(["+d+"]); ":r+=" validate.errors = ["+d+"]; return false; ":r+=" var err = "+d+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } if ("+J+" !== undefined) {  ";var X=E?"data"+(E-1||""):"parentData",Ee=E?e.dataPathArr[E]:"parentDataProperty";r+=" "+y+" = "+J+"; ",E||(r+="if ("+X+" !== undefined)"),r+=" "+X+"["+Ee+"] = "+J+"; } "}else{var b=b||[];b.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(M||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { type: '",K?r+=""+j.join(","):r+=""+j,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",K?r+=""+j.join(","):r+=""+j,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+y+" "),r+=" } "):r+=" {} ";var d=r;r=b.pop(),!e.compositeRule&&D?e.async?r+=" throw new ValidationError(["+d+"]); ":r+=" validate.errors = ["+d+"]; return false; ":r+=" var err = "+d+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}r+=" } "}}if(e.schema.$ref&&!s)r+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",D&&(r+=" } if (errors === ",_?r+="0":r+="errs_"+h,r+=") { ",H+="}");else{var Pe=e.RULES;if(Pe){for(var V,we=-1,he=Pe.length-1;we<he;)if(V=Pe[we+=1],Se(V)){if(V.type&&(r+=" if ("+e.util.checkDataType(V.type,y,e.opts.strictNumbers)+") { "),e.opts.useDefaults){if(V.type=="object"&&e.schema.properties){var w=e.schema.properties,xe=Object.keys(w),A=xe;if(A)for(var O,N=-1,G=A.length-1;N<G;){O=A[N+=1];var Y=w[O];if(Y.default!==void 0){var v=y+e.util.getProperty(O);if(e.compositeRule){if(e.opts.strictDefaults){var T="default is ignored for: "+v;if(e.opts.strictDefaults==="log")e.logger.warn(T);else throw new Error(T)}}else r+=" if ("+v+" === undefined ",e.opts.useDefaults=="empty"&&(r+=" || "+v+" === null || "+v+" === '' "),r+=" ) "+v+" = ",e.opts.useDefaults=="shared"?r+=" "+e.useDefault(Y.default)+" ":r+=" "+JSON.stringify(Y.default)+" ",r+="; "}}}else if(V.type=="array"&&Array.isArray(e.schema.items)){var g=e.schema.items;if(g){for(var Y,se=-1,z=g.length-1;se<z;)if(Y=g[se+=1],Y.default!==void 0){var v=y+"["+se+"]";if(e.compositeRule){if(e.opts.strictDefaults){var T="default is ignored for: "+v;if(e.opts.strictDefaults==="log")e.logger.warn(T);else throw new Error(T)}}else r+=" if ("+v+" === undefined ",e.opts.useDefaults=="empty"&&(r+=" || "+v+" === null || "+v+" === '' "),r+=" ) "+v+" = ",e.opts.useDefaults=="shared"?r+=" "+e.useDefault(Y.default)+" ":r+=" "+JSON.stringify(Y.default)+" ",r+="; "}}}}var k=V.rules;if(k){for(var de,ee=-1,ue=k.length-1;ee<ue;)if(de=k[ee+=1],je(de)){var Fe=de.code(e,de.keyword,V.type);Fe&&(r+=" "+Fe+" ",D&&(L+="}"))}}if(D&&(r+=" "+L+" ",L=""),V.type&&(r+=" } ",j&&j===V.type&&!Q)){r+=" else { ";var l=e.schemaPath+".type",c=e.errSchemaPath+"/type",b=b||[];b.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(M||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { type: '",K?r+=""+j.join(","):r+=""+j,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",K?r+=""+j.join(","):r+=""+j,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+y+" "),r+=" } "):r+=" {} ";var d=r;r=b.pop(),!e.compositeRule&&D?e.async?r+=" throw new ValidationError(["+d+"]); ":r+=" validate.errors = ["+d+"]; return false; ":r+=" var err = "+d+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } "}D&&(r+=" if (errors === ",_?r+="0":r+="errs_"+h,r+=") { ",H+="}")}}}D&&(r+=" "+H+" "),_?(i?(r+=" if (errors === 0) return data;           ",r+=" else throw new ValidationError(vErrors); "):(r+=" validate.errors = vErrors; ",r+=" return errors === 0;       "),r+=" }; return validate;"):r+=" var "+I+" = errors === errs_"+h+";";function Se(Te){for(var $e=Te.rules,Oe=0;Oe<$e.length;Oe++)if(je($e[Oe]))return!0}function je(Te){return e.schema[Te.keyword]!==void 0||Te.implements&&rr(Te)}function rr(Te){for(var $e=Te.implements,Oe=0;Oe<$e.length;Oe++)if(e.schema[$e[Oe]]!==void 0)return!0}return r},resolve$1=resolve_1,util$2=util$5,errorClasses$1=error_classes,stableStringify$1=fastJsonStableStringify,validateGenerator=validate$1,ucs2length=util$2.ucs2length,equal=fastDeepEqual,ValidationError=errorClasses$1.Validation,compile_1=compile$1;function compile$1(t,e,a,n){var r=this,i=this._opts,s=[void 0],o={},f=[],p={},h=[],E={},w=[];e=e||{schema:t,refVal:s,refs:o};var l=checkCompiling.call(this,t,e,n),c=this._compilations[l.index];if(l.compiling)return c.callValidate=T;var y=this._formats,b=this.RULES;try{var d=I(t,e,a,n);c.validate=d;var _=c.callValidate;return _&&(_.schema=d.schema,_.errors=null,_.refs=d.refs,_.refVal=d.refVal,_.root=d.root,_.$async=d.$async,i.sourceCode&&(_.source=d.source)),d}finally{endCompiling.call(this,t,e,n)}function T(){var B=c.validate,q=B.apply(this,arguments);return T.errors=B.errors,q}function I(B,q,J,oe){var ae=!q||q&&q.schema==B;if(q.schema!=e.schema)return compile$1.call(r,B,q,J,oe);var se=B.$async===!0,ne=validateGenerator({isTop:!0,schema:B,isRoot:ae,baseId:oe,root:q,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:errorClasses$1.MissingRef,RULES:b,validate:validateGenerator,util:util$2,resolve:resolve$1,resolveRef:D,usePattern:K,useDefault:Q,useCustomRule:V,opts:i,formats:y,logger:r.logger,self:r});ne=vars(s,refValCode)+vars(f,patternCode)+vars(h,defaultCode)+vars(w,customRuleCode$1)+ne,i.processCode&&(ne=i.processCode(ne,B));var X;try{var Ee=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",ne);X=Ee(r,b,y,e,s,h,w,equal,ucs2length,ValidationError),s[0]=X}catch(Pe){throw r.logger.error("Error compiling schema, function code:",ne),Pe}return X.schema=B,X.errors=null,X.refs=o,X.refVal=s,X.root=ae?X:q,se&&(X.$async=!0),i.sourceCode===!0&&(X.source={code:ne,patterns:f,defaults:h}),X}function D(B,q,J){q=resolve$1.url(B,q);var oe=o[q],ae,se;if(oe!==void 0)return ae=s[oe],se="refVal["+oe+"]",j(ae,se);if(!J&&e.refs){var ne=e.refs[q];if(ne!==void 0)return ae=e.refVal[ne],se=L(q,ae),j(ae,se)}se=L(q);var X=resolve$1.call(r,I,e,q);if(X===void 0){var Ee=a&&a[q];Ee&&(X=resolve$1.inlineRef(Ee,i.inlineRefs)?Ee:compile$1.call(r,Ee,e,a,B))}if(X===void 0)H(q);else return M(q,X),j(X,se)}function L(B,q){var J=s.length;return s[J]=q,o[B]=J,"refVal"+J}function H(B){delete o[B]}function M(B,q){var J=o[B];s[J]=q}function j(B,q){return typeof B=="object"||typeof B=="boolean"?{code:q,schema:B,inline:!0}:{code:q,$async:B&&!!B.$async}}function K(B){var q=p[B];return q===void 0&&(q=p[B]=f.length,f[q]=B),"pattern"+q}function Q(B){switch(typeof B){case"boolean":case"number":return""+B;case"string":return util$2.toQuotedString(B);case"object":if(B===null)return"null";var q=stableStringify$1(B),J=E[q];return J===void 0&&(J=E[q]=h.length,h[J]=B),"default"+J}}function V(B,q,J,oe){if(r._opts.validateSchema!==!1){var ae=B.definition.dependencies;if(ae&&!ae.every(function(A){return Object.prototype.hasOwnProperty.call(J,A)}))throw new Error("parent schema must have all required keywords: "+ae.join(","));var se=B.definition.validateSchema;if(se){var ne=se(q);if(!ne){var X="keyword schema is invalid: "+r.errorsText(se.errors);if(r._opts.validateSchema=="log")r.logger.error(X);else throw new Error(X)}}}var Ee=B.definition.compile,Pe=B.definition.inline,we=B.definition.macro,he;if(Ee)he=Ee.call(r,q,J,oe);else if(we)he=we.call(r,q,J,oe),i.validateSchema!==!1&&r.validateSchema(he,!0);else if(Pe)he=Pe.call(r,oe,B.keyword,q,J);else if(he=B.definition.validate,!he)return;if(he===void 0)throw new Error('custom keyword "'+B.keyword+'"failed to compile');var xe=w.length;return w[xe]=he,{code:"customRule"+xe,validate:he}}}function checkCompiling(t,e,a){var n=compIndex.call(this,t,e,a);return n>=0?{index:n,compiling:!0}:(n=this._compilations.length,this._compilations[n]={schema:t,root:e,baseId:a},{index:n,compiling:!1})}function endCompiling(t,e,a){var n=compIndex.call(this,t,e,a);n>=0&&this._compilations.splice(n,1)}function compIndex(t,e,a){for(var n=0;n<this._compilations.length;n++){var r=this._compilations[n];if(r.schema==t&&r.root==e&&r.baseId==a)return n}return-1}function patternCode(t,e){return"var pattern"+t+" = new RegExp("+util$2.toQuotedString(e[t])+");"}function defaultCode(t){return"var default"+t+" = defaults["+t+"];"}function refValCode(t,e){return e[t]===void 0?"":"var refVal"+t+" = refVal["+t+"];"}function customRuleCode$1(t){return"var customRule"+t+" = customRules["+t+"];"}function vars(t,e){if(!t.length)return"";for(var a="",n=0;n<t.length;n++)a+=e(n,t);return a}var cacheExports={},cache={get exports(){return cacheExports},set exports(t){cacheExports=t}},Cache$1=cache.exports=function(){this._cache={}};Cache$1.prototype.put=function(e,a){this._cache[e]=a};Cache$1.prototype.get=function(e){return this._cache[e]};Cache$1.prototype.del=function(e){delete this._cache[e]};Cache$1.prototype.clear=function(){this._cache={}};var util$1=util$5,DATE=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,DAYS=[0,31,28,31,30,31,30,31,31,30,31,30,31],TIME=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,HOSTNAME=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,URI=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,URIREF=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,URITEMPLATE=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,URL$1=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,UUID=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,JSON_POINTER=/^(?:\/(?:[^~/]|~0|~1)*)*$/,JSON_POINTER_URI_FRAGMENT=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,RELATIVE_JSON_POINTER=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,formats_1=formats$1;function formats$1(t){return t=t=="full"?"full":"fast",util$1.copy(formats$1[t])}formats$1.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":URITEMPLATE,url:URL$1,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:HOSTNAME,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex,uuid:UUID,"json-pointer":JSON_POINTER,"json-pointer-uri-fragment":JSON_POINTER_URI_FRAGMENT,"relative-json-pointer":RELATIVE_JSON_POINTER};formats$1.full={date,time,"date-time":date_time,uri,"uri-reference":URIREF,"uri-template":URITEMPLATE,url:URL$1,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:HOSTNAME,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex,uuid:UUID,"json-pointer":JSON_POINTER,"json-pointer-uri-fragment":JSON_POINTER_URI_FRAGMENT,"relative-json-pointer":RELATIVE_JSON_POINTER};function isLeapYear(t){return t%4===0&&(t%100!==0||t%400===0)}function date(t){var e=t.match(DATE);if(!e)return!1;var a=+e[1],n=+e[2],r=+e[3];return n>=1&&n<=12&&r>=1&&r<=(n==2&&isLeapYear(a)?29:DAYS[n])}function time(t,e){var a=t.match(TIME);if(!a)return!1;var n=a[1],r=a[2],i=a[3],s=a[5];return(n<=23&&r<=59&&i<=59||n==23&&r==59&&i==60)&&(!e||s)}var DATE_TIME_SEPARATOR=/t|\s/i;function date_time(t){var e=t.split(DATE_TIME_SEPARATOR);return e.length==2&&date(e[0])&&time(e[1],!0)}var NOT_URI_FRAGMENT=/\/|:/;function uri(t){return NOT_URI_FRAGMENT.test(t)&&URI.test(t)}var Z_ANCHOR=/[^\\]\\Z/;function regex(t){if(Z_ANCHOR.test(t))return!1;try{return new RegExp(t),!0}catch{return!1}}var ref=function(e,a,n){var r=" ",i=e.level,s=e.dataLevel,o=e.schema[a],f=e.errSchemaPath+"/"+a,p=!e.opts.allErrors,h="data"+(s||""),E="valid"+i,w,l;if(o=="#"||o=="#/")e.isRoot?(w=e.async,l="validate"):(w=e.root.schema.$async===!0,l="root.refVal[0]");else{var c=e.resolveRef(e.baseId,o,e.isRoot);if(c===void 0){var y=e.MissingRefError.message(e.baseId,o);if(e.opts.missingRefs=="fail"){e.logger.error(y);var b=b||[];b.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(f)+" , params: { ref: '"+e.util.escapeQuotes(o)+"' } ",e.opts.messages!==!1&&(r+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(o)+"' "),e.opts.verbose&&(r+=" , schema: "+e.util.toQuotedString(o)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var d=r;r=b.pop(),!e.compositeRule&&p?e.async?r+=" throw new ValidationError(["+d+"]); ":r+=" validate.errors = ["+d+"]; return false; ":r+=" var err = "+d+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",p&&(r+=" if (false) { ")}else if(e.opts.missingRefs=="ignore")e.logger.warn(y),p&&(r+=" if (true) { ");else throw new e.MissingRefError(e.baseId,o,y)}else if(c.inline){var _=e.util.copy(e);_.level++;var T="valid"+_.level;_.schema=c.schema,_.schemaPath="",_.errSchemaPath=o;var I=e.validate(_).replace(/validate\.schema/g,c.code);r+=" "+I+" ",p&&(r+=" if ("+T+") { ")}else w=c.$async===!0||e.async&&c.$async!==!1,l=c.code}if(l){var b=b||[];b.push(r),r="",e.opts.passContext?r+=" "+l+".call(this, ":r+=" "+l+"( ",r+=" "+h+", (dataPath || '')",e.errorPath!='""'&&(r+=" + "+e.errorPath);var D=s?"data"+(s-1||""):"parentData",L=s?e.dataPathArr[s]:"parentDataProperty";r+=" , "+D+" , "+L+", rootData)  ";var H=r;if(r=b.pop(),w){if(!e.async)throw new Error("async schema referenced by sync schema");p&&(r+=" var "+E+"; "),r+=" try { await "+H+"; ",p&&(r+=" "+E+" = true; "),r+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",p&&(r+=" "+E+" = false; "),r+=" } ",p&&(r+=" if ("+E+") { ")}else r+=" if (!"+H+") { if (vErrors === null) vErrors = "+l+".errors; else vErrors = vErrors.concat("+l+".errors); errors = vErrors.length; } ",p&&(r+=" else { ")}return r},allOf=function(e,a,n){var r=" ",i=e.schema[a],s=e.schemaPath+e.util.getProperty(a),o=e.errSchemaPath+"/"+a,f=!e.opts.allErrors,p=e.util.copy(e),h="";p.level++;var E="valid"+p.level,w=p.baseId,l=!0,c=i;if(c)for(var y,b=-1,d=c.length-1;b<d;)y=c[b+=1],(e.opts.strictKeywords?typeof y=="object"&&Object.keys(y).length>0||y===!1:e.util.schemaHasRules(y,e.RULES.all))&&(l=!1,p.schema=y,p.schemaPath=s+"["+b+"]",p.errSchemaPath=o+"/"+b,r+="  "+e.validate(p)+" ",p.baseId=w,f&&(r+=" if ("+E+") { ",h+="}"));return f&&(l?r+=" if (true) { ":r+=" "+h.slice(0,-1)+" "),r},anyOf=function(e,a,n){var r=" ",i=e.level,s=e.dataLevel,o=e.schema[a],f=e.schemaPath+e.util.getProperty(a),p=e.errSchemaPath+"/"+a,h=!e.opts.allErrors,E="data"+(s||""),w="valid"+i,l="errs__"+i,c=e.util.copy(e),y="";c.level++;var b="valid"+c.level,d=o.every(function(M){return e.opts.strictKeywords?typeof M=="object"&&Object.keys(M).length>0||M===!1:e.util.schemaHasRules(M,e.RULES.all)});if(d){var _=c.baseId;r+=" var "+l+" = errors; var "+w+" = false;  ";var T=e.compositeRule;e.compositeRule=c.compositeRule=!0;var I=o;if(I)for(var D,L=-1,H=I.length-1;L<H;)D=I[L+=1],c.schema=D,c.schemaPath=f+"["+L+"]",c.errSchemaPath=p+"/"+L,r+="  "+e.validate(c)+" ",c.baseId=_,r+=" "+w+" = "+w+" || "+b+"; if (!"+w+") { ",y+="}";e.compositeRule=c.compositeRule=T,r+=" "+y+" if (!"+w+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" } else {  errors = "+l+"; if (vErrors !== null) { if ("+l+") vErrors.length = "+l+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else h&&(r+=" if (true) { ");return r},comment=function(e,a,n){var r=" ",i=e.schema[a],s=e.errSchemaPath+"/"+a;e.opts.allErrors;var o=e.util.toQuotedString(i);return e.opts.$comment===!0?r+=" console.log("+o+");":typeof e.opts.$comment=="function"&&(r+=" self._opts.$comment("+o+", "+e.util.toQuotedString(s)+", validate.root.schema);"),r},_const=function(e,a,n){var r=" ",i=e.level,s=e.dataLevel,o=e.schema[a],f=e.schemaPath+e.util.getProperty(a),p=e.errSchemaPath+"/"+a,h=!e.opts.allErrors,E="data"+(s||""),w="valid"+i,l=e.opts.$data&&o&&o.$data;l&&(r+=" var schema"+i+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; "),l||(r+=" var schema"+i+" = validate.schema"+f+";"),r+="var "+w+" = equal("+E+", schema"+i+"); if (!"+w+") {   ";var c=c||[];c.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { allowedValue: schema"+i+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be equal to constant' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ";var y=r;return r=c.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",h&&(r+=" else { "),r},contains=function(e,a,n){var r=" ",i=e.level,s=e.dataLevel,o=e.schema[a],f=e.schemaPath+e.util.getProperty(a),p=e.errSchemaPath+"/"+a,h=!e.opts.allErrors,E="data"+(s||""),w="valid"+i,l="errs__"+i,c=e.util.copy(e),y="";c.level++;var b="valid"+c.level,d="i"+i,_=c.dataLevel=e.dataLevel+1,T="data"+_,I=e.baseId,D=e.opts.strictKeywords?typeof o=="object"&&Object.keys(o).length>0||o===!1:e.util.schemaHasRules(o,e.RULES.all);if(r+="var "+l+" = errors;var "+w+";",D){var L=e.compositeRule;e.compositeRule=c.compositeRule=!0,c.schema=o,c.schemaPath=f,c.errSchemaPath=p,r+=" var "+b+" = false; for (var "+d+" = 0; "+d+" < "+E+".length; "+d+"++) { ",c.errorPath=e.util.getPathExpr(e.errorPath,d,e.opts.jsonPointers,!0);var H=E+"["+d+"]";c.dataPathArr[_]=d;var M=e.validate(c);c.baseId=I,e.util.varOccurences(M,T)<2?r+=" "+e.util.varReplace(M,T,H)+" ":r+=" var "+T+" = "+H+"; "+M+" ",r+=" if ("+b+") break; }  ",e.compositeRule=c.compositeRule=L,r+=" "+y+" if (!"+b+") {"}else r+=" if ("+E+".length == 0) {";var j=j||[];j.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should contain a valid item' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ";var K=r;return r=j.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+K+"]); ":r+=" validate.errors = ["+K+"]; return false; ":r+=" var err = "+K+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { ",D&&(r+="  errors = "+l+"; if (vErrors !== null) { if ("+l+") vErrors.length = "+l+"; else vErrors = null; } "),e.opts.allErrors&&(r+=" } "),r},dependencies=function(e,a,n){var r=" ",i=e.level,s=e.dataLevel,o=e.schema[a],f=e.schemaPath+e.util.getProperty(a),p=e.errSchemaPath+"/"+a,h=!e.opts.allErrors,E="data"+(s||""),w="errs__"+i,l=e.util.copy(e),c="";l.level++;var y="valid"+l.level,b={},d={},_=e.opts.ownProperties;for(L in o)if(L!="__proto__"){var T=o[L],I=Array.isArray(T)?d:b;I[L]=T}r+="var "+w+" = errors;";var D=e.errorPath;r+="var missing"+i+";";for(var L in d)if(I=d[L],I.length){if(r+=" if ( "+E+e.util.getProperty(L)+" !== undefined ",_&&(r+=" && Object.prototype.hasOwnProperty.call("+E+", '"+e.util.escapeQuotes(L)+"') "),h){r+=" && ( ";var H=I;if(H)for(var M,j=-1,K=H.length-1;j<K;){M=H[j+=1],j&&(r+=" || ");var Q=e.util.getProperty(M),V=E+Q;r+=" ( ( "+V+" === undefined ",_&&(r+=" || ! Object.prototype.hasOwnProperty.call("+E+", '"+e.util.escapeQuotes(M)+"') "),r+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?M:Q)+") ) "}r+=")) {  ";var B="missing"+i,q="' + "+B+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(D,B,!0):D+" + "+B);var J=J||[];J.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { property: '"+e.util.escapeQuotes(L)+"', missingProperty: '"+q+"', depsCount: "+I.length+", deps: '"+e.util.escapeQuotes(I.length==1?I[0]:I.join(", "))+"' } ",e.opts.messages!==!1&&(r+=" , message: 'should have ",I.length==1?r+="property "+e.util.escapeQuotes(I[0]):r+="properties "+e.util.escapeQuotes(I.join(", ")),r+=" when property "+e.util.escapeQuotes(L)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ";var oe=r;r=J.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+oe+"]); ":r+=" validate.errors = ["+oe+"]; return false; ":r+=" var err = "+oe+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{r+=" ) { ";var ae=I;if(ae)for(var M,se=-1,ne=ae.length-1;se<ne;){M=ae[se+=1];var Q=e.util.getProperty(M),q=e.util.escapeQuotes(M),V=E+Q;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(D,M,e.opts.jsonPointers)),r+=" if ( "+V+" === undefined ",_&&(r+=" || ! Object.prototype.hasOwnProperty.call("+E+", '"+e.util.escapeQuotes(M)+"') "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { property: '"+e.util.escapeQuotes(L)+"', missingProperty: '"+q+"', depsCount: "+I.length+", deps: '"+e.util.escapeQuotes(I.length==1?I[0]:I.join(", "))+"' } ",e.opts.messages!==!1&&(r+=" , message: 'should have ",I.length==1?r+="property "+e.util.escapeQuotes(I[0]):r+="properties "+e.util.escapeQuotes(I.join(", ")),r+=" when property "+e.util.escapeQuotes(L)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}r+=" }   ",h&&(c+="}",r+=" else { ")}e.errorPath=D;var X=l.baseId;for(var L in b){var T=b[L];(e.opts.strictKeywords?typeof T=="object"&&Object.keys(T).length>0||T===!1:e.util.schemaHasRules(T,e.RULES.all))&&(r+=" "+y+" = true; if ( "+E+e.util.getProperty(L)+" !== undefined ",_&&(r+=" && Object.prototype.hasOwnProperty.call("+E+", '"+e.util.escapeQuotes(L)+"') "),r+=") { ",l.schema=T,l.schemaPath=f+e.util.getProperty(L),l.errSchemaPath=p+"/"+e.util.escapeFragment(L),r+="  "+e.validate(l)+" ",l.baseId=X,r+=" }  ",h&&(r+=" if ("+y+") { ",c+="}"))}return h&&(r+="   "+c+" if ("+w+" == errors) {"),r},_enum=function(e,a,n){var r=" ",i=e.level,s=e.dataLevel,o=e.schema[a],f=e.schemaPath+e.util.getProperty(a),p=e.errSchemaPath+"/"+a,h=!e.opts.allErrors,E="data"+(s||""),w="valid"+i,l=e.opts.$data&&o&&o.$data;l&&(r+=" var schema"+i+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; ");var c="i"+i,y="schema"+i;l||(r+=" var "+y+" = validate.schema"+f+";"),r+="var "+w+";",l&&(r+=" if (schema"+i+" === undefined) "+w+" = true; else if (!Array.isArray(schema"+i+")) "+w+" = false; else {"),r+=""+w+" = false;for (var "+c+"=0; "+c+"<"+y+".length; "+c+"++) if (equal("+E+", "+y+"["+c+"])) { "+w+" = true; break; }",l&&(r+="  }  "),r+=" if (!"+w+") {   ";var b=b||[];b.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { allowedValues: schema"+i+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ";var d=r;return r=b.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+d+"]); ":r+=" validate.errors = ["+d+"]; return false; ":r+=" var err = "+d+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",h&&(r+=" else { "),r},format=function(e,a,n){var r=" ",i=e.level,s=e.dataLevel,o=e.schema[a],f=e.schemaPath+e.util.getProperty(a),p=e.errSchemaPath+"/"+a,h=!e.opts.allErrors,E="data"+(s||"");if(e.opts.format===!1)return h&&(r+=" if (true) { "),r;var w=e.opts.$data&&o&&o.$data,l;w?(r+=" var schema"+i+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; ",l="schema"+i):l=o;var c=e.opts.unknownFormats,y=Array.isArray(c);if(w){var b="format"+i,d="isObject"+i,_="formatType"+i;r+=" var "+b+" = formats["+l+"]; var "+d+" = typeof "+b+" == 'object' && !("+b+" instanceof RegExp) && "+b+".validate; var "+_+" = "+d+" && "+b+".type || 'string'; if ("+d+") { ",e.async&&(r+=" var async"+i+" = "+b+".async; "),r+=" "+b+" = "+b+".validate; } if (  ",w&&(r+=" ("+l+" !== undefined && typeof "+l+" != 'string') || "),r+=" (",c!="ignore"&&(r+=" ("+l+" && !"+b+" ",y&&(r+=" && self._opts.unknownFormats.indexOf("+l+") == -1 "),r+=") || "),r+=" ("+b+" && "+_+" == '"+n+"' && !(typeof "+b+" == 'function' ? ",e.async?r+=" (async"+i+" ? await "+b+"("+E+") : "+b+"("+E+")) ":r+=" "+b+"("+E+") ",r+=" : "+b+".test("+E+"))))) {"}else{var b=e.formats[o];if(!b){if(c=="ignore")return e.logger.warn('unknown format "'+o+'" ignored in schema at path "'+e.errSchemaPath+'"'),h&&(r+=" if (true) { "),r;if(y&&c.indexOf(o)>=0)return h&&(r+=" if (true) { "),r;throw new Error('unknown format "'+o+'" is used in schema at path "'+e.errSchemaPath+'"')}var d=typeof b=="object"&&!(b instanceof RegExp)&&b.validate,_=d&&b.type||"string";if(d){var T=b.async===!0;b=b.validate}if(_!=n)return h&&(r+=" if (true) { "),r;if(T){if(!e.async)throw new Error("async format in sync schema");var I="formats"+e.util.getProperty(o)+".validate";r+=" if (!(await "+I+"("+E+"))) { "}else{r+=" if (! ";var I="formats"+e.util.getProperty(o);d&&(I+=".validate"),typeof b=="function"?r+=" "+I+"("+E+") ":r+=" "+I+".test("+E+") ",r+=") { "}}var D=D||[];D.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { format:  ",w?r+=""+l:r+=""+e.util.toQuotedString(o),r+="  } ",e.opts.messages!==!1&&(r+=` , message: 'should match format "`,w?r+="' + "+l+" + '":r+=""+e.util.escapeQuotes(o),r+=`"' `),e.opts.verbose&&(r+=" , schema:  ",w?r+="validate.schema"+f:r+=""+e.util.toQuotedString(o),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ";var L=r;return r=D.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+L+"]); ":r+=" validate.errors = ["+L+"]; return false; ":r+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",h&&(r+=" else { "),r},_if=function(e,a,n){var r=" ",i=e.level,s=e.dataLevel,o=e.schema[a],f=e.schemaPath+e.util.getProperty(a),p=e.errSchemaPath+"/"+a,h=!e.opts.allErrors,E="data"+(s||""),w="valid"+i,l="errs__"+i,c=e.util.copy(e);c.level++;var y="valid"+c.level,b=e.schema.then,d=e.schema.else,_=b!==void 0&&(e.opts.strictKeywords?typeof b=="object"&&Object.keys(b).length>0||b===!1:e.util.schemaHasRules(b,e.RULES.all)),T=d!==void 0&&(e.opts.strictKeywords?typeof d=="object"&&Object.keys(d).length>0||d===!1:e.util.schemaHasRules(d,e.RULES.all)),I=c.baseId;if(_||T){var D;c.createErrors=!1,c.schema=o,c.schemaPath=f,c.errSchemaPath=p,r+=" var "+l+" = errors; var "+w+" = true;  ";var L=e.compositeRule;e.compositeRule=c.compositeRule=!0,r+="  "+e.validate(c)+" ",c.baseId=I,c.createErrors=!0,r+="  errors = "+l+"; if (vErrors !== null) { if ("+l+") vErrors.length = "+l+"; else vErrors = null; }  ",e.compositeRule=c.compositeRule=L,_?(r+=" if ("+y+") {  ",c.schema=e.schema.then,c.schemaPath=e.schemaPath+".then",c.errSchemaPath=e.errSchemaPath+"/then",r+="  "+e.validate(c)+" ",c.baseId=I,r+=" "+w+" = "+y+"; ",_&&T?(D="ifClause"+i,r+=" var "+D+" = 'then'; "):D="'then'",r+=" } ",T&&(r+=" else { ")):r+=" if (!"+y+") { ",T&&(c.schema=e.schema.else,c.schemaPath=e.schemaPath+".else",c.errSchemaPath=e.errSchemaPath+"/else",r+="  "+e.validate(c)+" ",c.baseId=I,r+=" "+w+" = "+y+"; ",_&&T?(D="ifClause"+i,r+=" var "+D+" = 'else'; "):D="'else'",r+=" } "),r+=" if (!"+w+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { failingKeyword: "+D+" } ",e.opts.messages!==!1&&(r+=` , message: 'should match "' + `+D+` + '" schema' `),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" }   ",h&&(r+=" else { ")}else h&&(r+=" if (true) { ");return r},items=function(e,a,n){var r=" ",i=e.level,s=e.dataLevel,o=e.schema[a],f=e.schemaPath+e.util.getProperty(a),p=e.errSchemaPath+"/"+a,h=!e.opts.allErrors,E="data"+(s||""),w="valid"+i,l="errs__"+i,c=e.util.copy(e),y="";c.level++;var b="valid"+c.level,d="i"+i,_=c.dataLevel=e.dataLevel+1,T="data"+_,I=e.baseId;if(r+="var "+l+" = errors;var "+w+";",Array.isArray(o)){var D=e.schema.additionalItems;if(D===!1){r+=" "+w+" = "+E+".length <= "+o.length+"; ";var L=p;p=e.errSchemaPath+"/additionalItems",r+="  if (!"+w+") {   ";var H=H||[];H.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { limit: "+o.length+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have more than "+o.length+" items' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ";var M=r;r=H.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+M+"]); ":r+=" validate.errors = ["+M+"]; return false; ":r+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",p=L,h&&(y+="}",r+=" else { ")}var j=o;if(j){for(var K,Q=-1,V=j.length-1;Q<V;)if(K=j[Q+=1],e.opts.strictKeywords?typeof K=="object"&&Object.keys(K).length>0||K===!1:e.util.schemaHasRules(K,e.RULES.all)){r+=" "+b+" = true; if ("+E+".length > "+Q+") { ";var B=E+"["+Q+"]";c.schema=K,c.schemaPath=f+"["+Q+"]",c.errSchemaPath=p+"/"+Q,c.errorPath=e.util.getPathExpr(e.errorPath,Q,e.opts.jsonPointers,!0),c.dataPathArr[_]=Q;var q=e.validate(c);c.baseId=I,e.util.varOccurences(q,T)<2?r+=" "+e.util.varReplace(q,T,B)+" ":r+=" var "+T+" = "+B+"; "+q+" ",r+=" }  ",h&&(r+=" if ("+b+") { ",y+="}")}}if(typeof D=="object"&&(e.opts.strictKeywords?typeof D=="object"&&Object.keys(D).length>0||D===!1:e.util.schemaHasRules(D,e.RULES.all))){c.schema=D,c.schemaPath=e.schemaPath+".additionalItems",c.errSchemaPath=e.errSchemaPath+"/additionalItems",r+=" "+b+" = true; if ("+E+".length > "+o.length+") {  for (var "+d+" = "+o.length+"; "+d+" < "+E+".length; "+d+"++) { ",c.errorPath=e.util.getPathExpr(e.errorPath,d,e.opts.jsonPointers,!0);var B=E+"["+d+"]";c.dataPathArr[_]=d;var q=e.validate(c);c.baseId=I,e.util.varOccurences(q,T)<2?r+=" "+e.util.varReplace(q,T,B)+" ":r+=" var "+T+" = "+B+"; "+q+" ",h&&(r+=" if (!"+b+") break; "),r+=" } }  ",h&&(r+=" if ("+b+") { ",y+="}")}}else if(e.opts.strictKeywords?typeof o=="object"&&Object.keys(o).length>0||o===!1:e.util.schemaHasRules(o,e.RULES.all)){c.schema=o,c.schemaPath=f,c.errSchemaPath=p,r+="  for (var "+d+" = "+0+"; "+d+" < "+E+".length; "+d+"++) { ",c.errorPath=e.util.getPathExpr(e.errorPath,d,e.opts.jsonPointers,!0);var B=E+"["+d+"]";c.dataPathArr[_]=d;var q=e.validate(c);c.baseId=I,e.util.varOccurences(q,T)<2?r+=" "+e.util.varReplace(q,T,B)+" ":r+=" var "+T+" = "+B+"; "+q+" ",h&&(r+=" if (!"+b+") break; "),r+=" }"}return h&&(r+=" "+y+" if ("+l+" == errors) {"),r},_limit=function(e,a,n){var r=" ",i=e.level,s=e.dataLevel,o=e.schema[a],f=e.schemaPath+e.util.getProperty(a),p=e.errSchemaPath+"/"+a,h=!e.opts.allErrors,I,E="data"+(s||""),w=e.opts.$data&&o&&o.$data,l;w?(r+=" var schema"+i+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; ",l="schema"+i):l=o;var c=a=="maximum",y=c?"exclusiveMaximum":"exclusiveMinimum",b=e.schema[y],d=e.opts.$data&&b&&b.$data,_=c?"<":">",T=c?">":"<",I=void 0;if(!(w||typeof o=="number"||o===void 0))throw new Error(a+" must be number");if(!(d||b===void 0||typeof b=="number"||typeof b=="boolean"))throw new Error(y+" must be number or boolean");if(d){var D=e.util.getData(b.$data,s,e.dataPathArr),L="exclusive"+i,H="exclType"+i,M="exclIsNumber"+i,j="op"+i,K="' + "+j+" + '";r+=" var schemaExcl"+i+" = "+D+"; ",D="schemaExcl"+i,r+=" var "+L+"; var "+H+" = typeof "+D+"; if ("+H+" != 'boolean' && "+H+" != 'undefined' && "+H+" != 'number') { ";var I=y,Q=Q||[];Q.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(I||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: '"+y+" should be boolean' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ";var V=r;r=Q.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+V+"]); ":r+=" validate.errors = ["+V+"]; return false; ":r+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else if ( ",w&&(r+=" ("+l+" !== undefined && typeof "+l+" != 'number') || "),r+=" "+H+" == 'number' ? ( ("+L+" = "+l+" === undefined || "+D+" "+_+"= "+l+") ? "+E+" "+T+"= "+D+" : "+E+" "+T+" "+l+" ) : ( ("+L+" = "+D+" === true) ? "+E+" "+T+"= "+l+" : "+E+" "+T+" "+l+" ) || "+E+" !== "+E+") { var op"+i+" = "+L+" ? '"+_+"' : '"+_+"='; ",o===void 0&&(I=y,p=e.errSchemaPath+"/"+y,l=D,w=d)}else{var M=typeof b=="number",K=_;if(M&&w){var j="'"+K+"'";r+=" if ( ",w&&(r+=" ("+l+" !== undefined && typeof "+l+" != 'number') || "),r+=" ( "+l+" === undefined || "+b+" "+_+"= "+l+" ? "+E+" "+T+"= "+b+" : "+E+" "+T+" "+l+" ) || "+E+" !== "+E+") { "}else{M&&o===void 0?(L=!0,I=y,p=e.errSchemaPath+"/"+y,l=b,T+="="):(M&&(l=Math[c?"min":"max"](b,o)),b===(M?l:!0)?(L=!0,I=y,p=e.errSchemaPath+"/"+y,T+="="):(L=!1,K+="="));var j="'"+K+"'";r+=" if ( ",w&&(r+=" ("+l+" !== undefined && typeof "+l+" != 'number') || "),r+=" "+E+" "+T+" "+l+" || "+E+" !== "+E+") { "}}I=I||a;var Q=Q||[];Q.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(I||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { comparison: "+j+", limit: "+l+", exclusive: "+L+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be "+K+" ",w?r+="' + "+l:r+=""+l+"'"),e.opts.verbose&&(r+=" , schema:  ",w?r+="validate.schema"+f:r+=""+o,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ";var V=r;return r=Q.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+V+"]); ":r+=" validate.errors = ["+V+"]; return false; ":r+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",h&&(r+=" else { "),r},_limitItems=function(e,a,n){var r=" ",i=e.level,s=e.dataLevel,o=e.schema[a],f=e.schemaPath+e.util.getProperty(a),p=e.errSchemaPath+"/"+a,h=!e.opts.allErrors,y,E="data"+(s||""),w=e.opts.$data&&o&&o.$data,l;if(w?(r+=" var schema"+i+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; ",l="schema"+i):l=o,!(w||typeof o=="number"))throw new Error(a+" must be number");var c=a=="maxItems"?">":"<";r+="if ( ",w&&(r+=" ("+l+" !== undefined && typeof "+l+" != 'number') || "),r+=" "+E+".length "+c+" "+l+") { ";var y=a,b=b||[];b.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(y||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { limit: "+l+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have ",a=="maxItems"?r+="more":r+="fewer",r+=" than ",w?r+="' + "+l+" + '":r+=""+o,r+=" items' "),e.opts.verbose&&(r+=" , schema:  ",w?r+="validate.schema"+f:r+=""+o,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ";var d=r;return r=b.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+d+"]); ":r+=" validate.errors = ["+d+"]; return false; ":r+=" var err = "+d+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",h&&(r+=" else { "),r},_limitLength=function(e,a,n){var r=" ",i=e.level,s=e.dataLevel,o=e.schema[a],f=e.schemaPath+e.util.getProperty(a),p=e.errSchemaPath+"/"+a,h=!e.opts.allErrors,y,E="data"+(s||""),w=e.opts.$data&&o&&o.$data,l;if(w?(r+=" var schema"+i+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; ",l="schema"+i):l=o,!(w||typeof o=="number"))throw new Error(a+" must be number");var c=a=="maxLength"?">":"<";r+="if ( ",w&&(r+=" ("+l+" !== undefined && typeof "+l+" != 'number') || "),e.opts.unicode===!1?r+=" "+E+".length ":r+=" ucs2length("+E+") ",r+=" "+c+" "+l+") { ";var y=a,b=b||[];b.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(y||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { limit: "+l+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be ",a=="maxLength"?r+="longer":r+="shorter",r+=" than ",w?r+="' + "+l+" + '":r+=""+o,r+=" characters' "),e.opts.verbose&&(r+=" , schema:  ",w?r+="validate.schema"+f:r+=""+o,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ";var d=r;return r=b.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+d+"]); ":r+=" validate.errors = ["+d+"]; return false; ":r+=" var err = "+d+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",h&&(r+=" else { "),r},_limitProperties=function(e,a,n){var r=" ",i=e.level,s=e.dataLevel,o=e.schema[a],f=e.schemaPath+e.util.getProperty(a),p=e.errSchemaPath+"/"+a,h=!e.opts.allErrors,y,E="data"+(s||""),w=e.opts.$data&&o&&o.$data,l;if(w?(r+=" var schema"+i+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; ",l="schema"+i):l=o,!(w||typeof o=="number"))throw new Error(a+" must be number");var c=a=="maxProperties"?">":"<";r+="if ( ",w&&(r+=" ("+l+" !== undefined && typeof "+l+" != 'number') || "),r+=" Object.keys("+E+").length "+c+" "+l+") { ";var y=a,b=b||[];b.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(y||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { limit: "+l+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have ",a=="maxProperties"?r+="more":r+="fewer",r+=" than ",w?r+="' + "+l+" + '":r+=""+o,r+=" properties' "),e.opts.verbose&&(r+=" , schema:  ",w?r+="validate.schema"+f:r+=""+o,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ";var d=r;return r=b.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+d+"]); ":r+=" validate.errors = ["+d+"]; return false; ":r+=" var err = "+d+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",h&&(r+=" else { "),r},multipleOf=function(e,a,n){var r=" ",i=e.level,s=e.dataLevel,o=e.schema[a],f=e.schemaPath+e.util.getProperty(a),p=e.errSchemaPath+"/"+a,h=!e.opts.allErrors,E="data"+(s||""),w=e.opts.$data&&o&&o.$data,l;if(w?(r+=" var schema"+i+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; ",l="schema"+i):l=o,!(w||typeof o=="number"))throw new Error(a+" must be number");r+="var division"+i+";if (",w&&(r+=" "+l+" !== undefined && ( typeof "+l+" != 'number' || "),r+=" (division"+i+" = "+E+" / "+l+", ",e.opts.multipleOfPrecision?r+=" Math.abs(Math.round(division"+i+") - division"+i+") > 1e-"+e.opts.multipleOfPrecision+" ":r+=" division"+i+" !== parseInt(division"+i+") ",r+=" ) ",w&&(r+="  )  "),r+=" ) {   ";var c=c||[];c.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { multipleOf: "+l+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be multiple of ",w?r+="' + "+l:r+=""+l+"'"),e.opts.verbose&&(r+=" , schema:  ",w?r+="validate.schema"+f:r+=""+o,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ";var y=r;return r=c.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",h&&(r+=" else { "),r},not=function(e,a,n){var r=" ",i=e.level,s=e.dataLevel,o=e.schema[a],f=e.schemaPath+e.util.getProperty(a),p=e.errSchemaPath+"/"+a,h=!e.opts.allErrors,E="data"+(s||""),w="errs__"+i,l=e.util.copy(e);l.level++;var c="valid"+l.level;if(e.opts.strictKeywords?typeof o=="object"&&Object.keys(o).length>0||o===!1:e.util.schemaHasRules(o,e.RULES.all)){l.schema=o,l.schemaPath=f,l.errSchemaPath=p,r+=" var "+w+" = errors;  ";var y=e.compositeRule;e.compositeRule=l.compositeRule=!0,l.createErrors=!1;var b;l.opts.allErrors&&(b=l.opts.allErrors,l.opts.allErrors=!1),r+=" "+e.validate(l)+" ",l.createErrors=!0,b&&(l.opts.allErrors=b),e.compositeRule=l.compositeRule=y,r+=" if ("+c+") {   ";var d=d||[];d.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ";var _=r;r=d.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+_+"]); ":r+=" validate.errors = ["+_+"]; return false; ":r+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else {  errors = "+w+"; if (vErrors !== null) { if ("+w+") vErrors.length = "+w+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else r+="  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h&&(r+=" if (false) { ");return r},oneOf$1=function(e,a,n){var r=" ",i=e.level,s=e.dataLevel,o=e.schema[a],f=e.schemaPath+e.util.getProperty(a),p=e.errSchemaPath+"/"+a,h=!e.opts.allErrors,E="data"+(s||""),w="valid"+i,l="errs__"+i,c=e.util.copy(e),y="";c.level++;var b="valid"+c.level,d=c.baseId,_="prevValid"+i,T="passingSchemas"+i;r+="var "+l+" = errors , "+_+" = false , "+w+" = false , "+T+" = null; ";var I=e.compositeRule;e.compositeRule=c.compositeRule=!0;var D=o;if(D)for(var L,H=-1,M=D.length-1;H<M;)L=D[H+=1],(e.opts.strictKeywords?typeof L=="object"&&Object.keys(L).length>0||L===!1:e.util.schemaHasRules(L,e.RULES.all))?(c.schema=L,c.schemaPath=f+"["+H+"]",c.errSchemaPath=p+"/"+H,r+="  "+e.validate(c)+" ",c.baseId=d):r+=" var "+b+" = true; ",H&&(r+=" if ("+b+" && "+_+") { "+w+" = false; "+T+" = ["+T+", "+H+"]; } else { ",y+="}"),r+=" if ("+b+") { "+w+" = "+_+" = true; "+T+" = "+H+"; }";return e.compositeRule=c.compositeRule=I,r+=""+y+"if (!"+w+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { passingSchemas: "+T+" } ",e.opts.messages!==!1&&(r+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+="} else {  errors = "+l+"; if (vErrors !== null) { if ("+l+") vErrors.length = "+l+"; else vErrors = null; }",e.opts.allErrors&&(r+=" } "),r},pattern=function(e,a,n){var r=" ",i=e.level,s=e.dataLevel,o=e.schema[a],f=e.schemaPath+e.util.getProperty(a),p=e.errSchemaPath+"/"+a,h=!e.opts.allErrors,E="data"+(s||""),w=e.opts.$data&&o&&o.$data,l;w?(r+=" var schema"+i+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; ",l="schema"+i):l=o;var c=w?"(new RegExp("+l+"))":e.usePattern(o);r+="if ( ",w&&(r+=" ("+l+" !== undefined && typeof "+l+" != 'string') || "),r+=" !"+c+".test("+E+") ) {   ";var y=y||[];y.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { pattern:  ",w?r+=""+l:r+=""+e.util.toQuotedString(o),r+="  } ",e.opts.messages!==!1&&(r+=` , message: 'should match pattern "`,w?r+="' + "+l+" + '":r+=""+e.util.escapeQuotes(o),r+=`"' `),e.opts.verbose&&(r+=" , schema:  ",w?r+="validate.schema"+f:r+=""+e.util.toQuotedString(o),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ";var b=r;return r=y.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",h&&(r+=" else { "),r},properties$3=function(e,a,n){var r=" ",i=e.level,s=e.dataLevel,o=e.schema[a],f=e.schemaPath+e.util.getProperty(a),p=e.errSchemaPath+"/"+a,h=!e.opts.allErrors,E="data"+(s||""),w="errs__"+i,l=e.util.copy(e),c="";l.level++;var y="valid"+l.level,b="key"+i,d="idx"+i,_=l.dataLevel=e.dataLevel+1,T="data"+_,I="dataProperties"+i,D=Object.keys(o||{}).filter(se),L=e.schema.patternProperties||{},H=Object.keys(L).filter(se),M=e.schema.additionalProperties,j=D.length||H.length,K=M===!1,Q=typeof M=="object"&&Object.keys(M).length,V=e.opts.removeAdditional,B=K||Q||V,q=e.opts.ownProperties,J=e.baseId,oe=e.schema.required;if(oe&&!(e.opts.$data&&oe.$data)&&oe.length<e.opts.loopRequired)var ae=e.util.toHash(oe);function se(qe){return qe!=="__proto__"}if(r+="var "+w+" = errors;var "+y+" = true;",q&&(r+=" var "+I+" = undefined;"),B){if(q?r+=" "+I+" = "+I+" || Object.keys("+E+"); for (var "+d+"=0; "+d+"<"+I+".length; "+d+"++) { var "+b+" = "+I+"["+d+"]; ":r+=" for (var "+b+" in "+E+") { ",j){if(r+=" var isAdditional"+i+" = !(false ",D.length)if(D.length>8)r+=" || validate.schema"+f+".hasOwnProperty("+b+") ";else{var ne=D;if(ne)for(var X,Ee=-1,Pe=ne.length-1;Ee<Pe;)X=ne[Ee+=1],r+=" || "+b+" == "+e.util.toQuotedString(X)+" "}if(H.length){var we=H;if(we)for(var he,xe=-1,A=we.length-1;xe<A;)he=we[xe+=1],r+=" || "+e.usePattern(he)+".test("+b+") "}r+=" ); if (isAdditional"+i+") { "}if(V=="all")r+=" delete "+E+"["+b+"]; ";else{var O=e.errorPath,N="' + "+b+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,b,e.opts.jsonPointers)),K)if(V)r+=" delete "+E+"["+b+"]; ";else{r+=" "+y+" = false; ";var G=p;p=e.errSchemaPath+"/additionalProperties";var Y=Y||[];Y.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { additionalProperty: '"+N+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is an invalid additional property":r+="should NOT have additional properties",r+="' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ";var v=r;r=Y.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",p=G,h&&(r+=" break; ")}else if(Q)if(V=="failing"){r+=" var "+w+" = errors;  ";var g=e.compositeRule;e.compositeRule=l.compositeRule=!0,l.schema=M,l.schemaPath=e.schemaPath+".additionalProperties",l.errSchemaPath=e.errSchemaPath+"/additionalProperties",l.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,b,e.opts.jsonPointers);var z=E+"["+b+"]";l.dataPathArr[_]=b;var k=e.validate(l);l.baseId=J,e.util.varOccurences(k,T)<2?r+=" "+e.util.varReplace(k,T,z)+" ":r+=" var "+T+" = "+z+"; "+k+" ",r+=" if (!"+y+") { errors = "+w+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+E+"["+b+"]; }  ",e.compositeRule=l.compositeRule=g}else{l.schema=M,l.schemaPath=e.schemaPath+".additionalProperties",l.errSchemaPath=e.errSchemaPath+"/additionalProperties",l.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,b,e.opts.jsonPointers);var z=E+"["+b+"]";l.dataPathArr[_]=b;var k=e.validate(l);l.baseId=J,e.util.varOccurences(k,T)<2?r+=" "+e.util.varReplace(k,T,z)+" ":r+=" var "+T+" = "+z+"; "+k+" ",h&&(r+=" if (!"+y+") break; ")}e.errorPath=O}j&&(r+=" } "),r+=" }  ",h&&(r+=" if ("+y+") { ",c+="}")}var de=e.opts.useDefaults&&!e.compositeRule;if(D.length){var ee=D;if(ee)for(var X,ue=-1,Fe=ee.length-1;ue<Fe;){X=ee[ue+=1];var Se=o[X];if(e.opts.strictKeywords?typeof Se=="object"&&Object.keys(Se).length>0||Se===!1:e.util.schemaHasRules(Se,e.RULES.all)){var je=e.util.getProperty(X),z=E+je,rr=de&&Se.default!==void 0;l.schema=Se,l.schemaPath=f+je,l.errSchemaPath=p+"/"+e.util.escapeFragment(X),l.errorPath=e.util.getPath(e.errorPath,X,e.opts.jsonPointers),l.dataPathArr[_]=e.util.toQuotedString(X);var k=e.validate(l);if(l.baseId=J,e.util.varOccurences(k,T)<2){k=e.util.varReplace(k,T,z);var Te=z}else{var Te=T;r+=" var "+T+" = "+z+"; "}if(rr)r+=" "+k+" ";else{if(ae&&ae[X]){r+=" if ( "+Te+" === undefined ",q&&(r+=" || ! Object.prototype.hasOwnProperty.call("+E+", '"+e.util.escapeQuotes(X)+"') "),r+=") { "+y+" = false; ";var O=e.errorPath,G=p,$e=e.util.escapeQuotes(X);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(O,X,e.opts.jsonPointers)),p=e.errSchemaPath+"/required";var Y=Y||[];Y.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { missingProperty: '"+$e+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+$e+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ";var v=r;r=Y.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",p=G,e.errorPath=O,r+=" } else { "}else h?(r+=" if ( "+Te+" === undefined ",q&&(r+=" || ! Object.prototype.hasOwnProperty.call("+E+", '"+e.util.escapeQuotes(X)+"') "),r+=") { "+y+" = true; } else { "):(r+=" if ("+Te+" !== undefined ",q&&(r+=" &&   Object.prototype.hasOwnProperty.call("+E+", '"+e.util.escapeQuotes(X)+"') "),r+=" ) { ");r+=" "+k+" } "}}h&&(r+=" if ("+y+") { ",c+="}")}}if(H.length){var Oe=H;if(Oe)for(var he,Me=-1,Ge=Oe.length-1;Me<Ge;){he=Oe[Me+=1];var Se=L[he];if(e.opts.strictKeywords?typeof Se=="object"&&Object.keys(Se).length>0||Se===!1:e.util.schemaHasRules(Se,e.RULES.all)){l.schema=Se,l.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(he),l.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(he),q?r+=" "+I+" = "+I+" || Object.keys("+E+"); for (var "+d+"=0; "+d+"<"+I+".length; "+d+"++) { var "+b+" = "+I+"["+d+"]; ":r+=" for (var "+b+" in "+E+") { ",r+=" if ("+e.usePattern(he)+".test("+b+")) { ",l.errorPath=e.util.getPathExpr(e.errorPath,b,e.opts.jsonPointers);var z=E+"["+b+"]";l.dataPathArr[_]=b;var k=e.validate(l);l.baseId=J,e.util.varOccurences(k,T)<2?r+=" "+e.util.varReplace(k,T,z)+" ":r+=" var "+T+" = "+z+"; "+k+" ",h&&(r+=" if (!"+y+") break; "),r+=" } ",h&&(r+=" else "+y+" = true; "),r+=" }  ",h&&(r+=" if ("+y+") { ",c+="}")}}}return h&&(r+=" "+c+" if ("+w+" == errors) {"),r},propertyNames=function(e,a,n){var r=" ",i=e.level,s=e.dataLevel,o=e.schema[a],f=e.schemaPath+e.util.getProperty(a),p=e.errSchemaPath+"/"+a,h=!e.opts.allErrors,E="data"+(s||""),w="errs__"+i,l=e.util.copy(e),c="";l.level++;var y="valid"+l.level;if(r+="var "+w+" = errors;",e.opts.strictKeywords?typeof o=="object"&&Object.keys(o).length>0||o===!1:e.util.schemaHasRules(o,e.RULES.all)){l.schema=o,l.schemaPath=f,l.errSchemaPath=p;var b="key"+i,d="idx"+i,_="i"+i,T="' + "+b+" + '",I=l.dataLevel=e.dataLevel+1,D="data"+I,L="dataProperties"+i,H=e.opts.ownProperties,M=e.baseId;H&&(r+=" var "+L+" = undefined; "),H?r+=" "+L+" = "+L+" || Object.keys("+E+"); for (var "+d+"=0; "+d+"<"+L+".length; "+d+"++) { var "+b+" = "+L+"["+d+"]; ":r+=" for (var "+b+" in "+E+") { ",r+=" var startErrs"+i+" = errors; ";var j=b,K=e.compositeRule;e.compositeRule=l.compositeRule=!0;var Q=e.validate(l);l.baseId=M,e.util.varOccurences(Q,D)<2?r+=" "+e.util.varReplace(Q,D,j)+" ":r+=" var "+D+" = "+j+"; "+Q+" ",e.compositeRule=l.compositeRule=K,r+=" if (!"+y+") { for (var "+_+"=startErrs"+i+"; "+_+"<errors; "+_+"++) { vErrors["+_+"].propertyName = "+b+"; }   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { propertyName: '"+T+"' } ",e.opts.messages!==!1&&(r+=" , message: 'property name \\'"+T+"\\' is invalid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),h&&(r+=" break; "),r+=" } }"}return h&&(r+=" "+c+" if ("+w+" == errors) {"),r},required$1=function(e,a,n){var r=" ",i=e.level,s=e.dataLevel,o=e.schema[a],f=e.schemaPath+e.util.getProperty(a),p=e.errSchemaPath+"/"+a,h=!e.opts.allErrors,E="data"+(s||""),w="valid"+i,l=e.opts.$data&&o&&o.$data;l&&(r+=" var schema"+i+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; ");var c="schema"+i;if(!l)if(o.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var y=[],b=o;if(b)for(var d,_=-1,T=b.length-1;_<T;){d=b[_+=1];var I=e.schema.properties[d];I&&(e.opts.strictKeywords?typeof I=="object"&&Object.keys(I).length>0||I===!1:e.util.schemaHasRules(I,e.RULES.all))||(y[y.length]=d)}}else var y=o;if(l||y.length){var D=e.errorPath,L=l||y.length>=e.opts.loopRequired,H=e.opts.ownProperties;if(h)if(r+=" var missing"+i+"; ",L){l||(r+=" var "+c+" = validate.schema"+f+"; ");var M="i"+i,j="schema"+i+"["+M+"]",K="' + "+j+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(D,j,e.opts.jsonPointers)),r+=" var "+w+" = true; ",l&&(r+=" if (schema"+i+" === undefined) "+w+" = true; else if (!Array.isArray(schema"+i+")) "+w+" = false; else {"),r+=" for (var "+M+" = 0; "+M+" < "+c+".length; "+M+"++) { "+w+" = "+E+"["+c+"["+M+"]] !== undefined ",H&&(r+=" &&   Object.prototype.hasOwnProperty.call("+E+", "+c+"["+M+"]) "),r+="; if (!"+w+") break; } ",l&&(r+="  }  "),r+="  if (!"+w+") {   ";var Q=Q||[];Q.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { missingProperty: '"+K+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+K+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ";var V=r;r=Q.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+V+"]); ":r+=" validate.errors = ["+V+"]; return false; ":r+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else{r+=" if ( ";var B=y;if(B)for(var q,M=-1,J=B.length-1;M<J;){q=B[M+=1],M&&(r+=" || ");var oe=e.util.getProperty(q),ae=E+oe;r+=" ( ( "+ae+" === undefined ",H&&(r+=" || ! Object.prototype.hasOwnProperty.call("+E+", '"+e.util.escapeQuotes(q)+"') "),r+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?q:oe)+") ) "}r+=") {  ";var j="missing"+i,K="' + "+j+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(D,j,!0):D+" + "+j);var Q=Q||[];Q.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { missingProperty: '"+K+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+K+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ";var V=r;r=Q.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+V+"]); ":r+=" validate.errors = ["+V+"]; return false; ":r+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else if(L){l||(r+=" var "+c+" = validate.schema"+f+"; ");var M="i"+i,j="schema"+i+"["+M+"]",K="' + "+j+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(D,j,e.opts.jsonPointers)),l&&(r+=" if ("+c+" && !Array.isArray("+c+")) {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { missingProperty: '"+K+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+K+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+c+" !== undefined) { "),r+=" for (var "+M+" = 0; "+M+" < "+c+".length; "+M+"++) { if ("+E+"["+c+"["+M+"]] === undefined ",H&&(r+=" || ! Object.prototype.hasOwnProperty.call("+E+", "+c+"["+M+"]) "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { missingProperty: '"+K+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+K+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",l&&(r+="  }  ")}else{var se=y;if(se)for(var q,ne=-1,X=se.length-1;ne<X;){q=se[ne+=1];var oe=e.util.getProperty(q),K=e.util.escapeQuotes(q),ae=E+oe;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(D,q,e.opts.jsonPointers)),r+=" if ( "+ae+" === undefined ",H&&(r+=" || ! Object.prototype.hasOwnProperty.call("+E+", '"+e.util.escapeQuotes(q)+"') "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { missingProperty: '"+K+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+K+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=D}else h&&(r+=" if (true) {");return r},uniqueItems=function(e,a,n){var r=" ",i=e.level,s=e.dataLevel,o=e.schema[a],f=e.schemaPath+e.util.getProperty(a),p=e.errSchemaPath+"/"+a,h=!e.opts.allErrors,E="data"+(s||""),w="valid"+i,l=e.opts.$data&&o&&o.$data,c;if(l?(r+=" var schema"+i+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; ",c="schema"+i):c=o,(o||l)&&e.opts.uniqueItems!==!1){l&&(r+=" var "+w+"; if ("+c+" === false || "+c+" === undefined) "+w+" = true; else if (typeof "+c+" != 'boolean') "+w+" = false; else { "),r+=" var i = "+E+".length , "+w+" = true , j; if (i > 1) { ";var y=e.schema.items&&e.schema.items.type,b=Array.isArray(y);if(!y||y=="object"||y=="array"||b&&(y.indexOf("object")>=0||y.indexOf("array")>=0))r+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+E+"[i], "+E+"[j])) { "+w+" = false; break outer; } } } ";else{r+=" var itemIndices = {}, item; for (;i--;) { var item = "+E+"[i]; ";var d="checkDataType"+(b?"s":"");r+=" if ("+e.util[d](y,"item",e.opts.strictNumbers,!0)+") continue; ",b&&(r+=` if (typeof item == 'string') item = '"' + item; `),r+=" if (typeof itemIndices[item] == 'number') { "+w+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}r+=" } ",l&&(r+="  }  "),r+=" if (!"+w+") {   ";var _=_||[];_.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { i: i, j: j } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(r+=" , schema:  ",l?r+="validate.schema"+f:r+=""+o,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),r+=" } "):r+=" {} ";var T=r;r=_.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+T+"]); ":r+=" validate.errors = ["+T+"]; return false; ":r+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",h&&(r+=" else { ")}else h&&(r+=" if (true) { ");return r},dotjs={$ref:ref,allOf,anyOf,$comment:comment,const:_const,contains,dependencies,enum:_enum,format,if:_if,items,maximum:_limit,minimum:_limit,maxItems:_limitItems,minItems:_limitItems,maxLength:_limitLength,minLength:_limitLength,maxProperties:_limitProperties,minProperties:_limitProperties,multipleOf,not,oneOf:oneOf$1,pattern,properties:properties$3,propertyNames,required:required$1,uniqueItems,validate:validate$1},ruleModules=dotjs,toHash=util$5.toHash,rules$1=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],a=["type","$comment"],n=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],r=["number","integer","string","array","object","boolean","null"];return e.all=toHash(a),e.types=toHash(r),e.forEach(function(i){i.rules=i.rules.map(function(s){var o;if(typeof s=="object"){var f=Object.keys(s)[0];o=s[f],s=f,o.forEach(function(h){a.push(h),e.all[h]=!0})}a.push(s);var p=e.all[s]={keyword:s,code:ruleModules[s],implements:o};return p}),e.all.$comment={keyword:"$comment",code:ruleModules.$comment},i.type&&(e.types[i.type]=i)}),e.keywords=toHash(a.concat(n)),e.custom={},e},KEYWORDS=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"],data=function(t,e){for(var a=0;a<e.length;a++){t=JSON.parse(JSON.stringify(t));var n=e[a].split("/"),r=t,i;for(i=1;i<n.length;i++)r=r[n[i]];for(i=0;i<KEYWORDS.length;i++){var s=KEYWORDS[i],o=r[s];o&&(r[s]={anyOf:[o,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return t},MissingRefError=error_classes.MissingRef,async=compileAsync;function compileAsync(t,e,a){var n=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof e=="function"&&(a=e,e=void 0);var r=i(t).then(function(){var o=n._addSchema(t,void 0,e);return o.validate||s(o)});return a&&r.then(function(o){a(null,o)},a),r;function i(o){var f=o.$schema;return f&&!n.getSchema(f)?compileAsync.call(n,{$ref:f},!0):Promise.resolve()}function s(o){try{return n._compile(o)}catch(p){if(p instanceof MissingRefError)return f(p);throw p}function f(p){var h=p.missingSchema;if(l(h))throw new Error("Schema "+h+" is loaded but "+p.missingRef+" cannot be resolved");var E=n._loadingSchemas[h];return E||(E=n._loadingSchemas[h]=n._opts.loadSchema(h),E.then(w,w)),E.then(function(c){if(!l(h))return i(c).then(function(){l(h)||n.addSchema(c,h,void 0,e)})}).then(function(){return s(o)});function w(){delete n._loadingSchemas[h]}function l(c){return n._refs[c]||n._schemas[c]}}}}var custom=function(e,a,n){var r=" ",i=e.level,s=e.dataLevel,o=e.schema[a],f=e.schemaPath+e.util.getProperty(a),p=e.errSchemaPath+"/"+a,h=!e.opts.allErrors,E,w="data"+(s||""),l="valid"+i,c="errs__"+i,y=e.opts.$data&&o&&o.$data,b;y?(r+=" var schema"+i+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; ",b="schema"+i):b=o;var d=this,_="definition"+i,T=d.definition,I="",D,L,H,M,j;if(y&&T.$data){j="keywordValidate"+i;var K=T.validateSchema;r+=" var "+_+" = RULES.custom['"+a+"'].definition; var "+j+" = "+_+".validate;"}else{if(M=e.useCustomRule(d,o,e.schema,e),!M)return;b="validate.schema"+f,j=M.code,D=T.compile,L=T.inline,H=T.macro}var Q=j+".errors",V="i"+i,B="ruleErr"+i,q=T.async;if(q&&!e.async)throw new Error("async keyword in sync schema");if(L||H||(r+=""+Q+" = null;"),r+="var "+c+" = errors;var "+l+";",y&&T.$data&&(I+="}",r+=" if ("+b+" === undefined) { "+l+" = true; } else { ",K&&(I+="}",r+=" "+l+" = "+_+".validateSchema("+b+"); if ("+l+") { ")),L)T.statements?r+=" "+M.validate+" ":r+=" "+l+" = "+M.validate+"; ";else if(H){var J=e.util.copy(e),I="";J.level++;var oe="valid"+J.level;J.schema=M.validate,J.schemaPath="";var ae=e.compositeRule;e.compositeRule=J.compositeRule=!0;var se=e.validate(J).replace(/validate\.schema/g,j);e.compositeRule=J.compositeRule=ae,r+=" "+se}else{var ne=ne||[];ne.push(r),r="",r+="  "+j+".call( ",e.opts.passContext?r+="this":r+="self",D||T.schema===!1?r+=" , "+w+" ":r+=" , "+b+" , "+w+" , validate.schema"+e.schemaPath+" ",r+=" , (dataPath || '')",e.errorPath!='""'&&(r+=" + "+e.errorPath);var X=s?"data"+(s-1||""):"parentData",Ee=s?e.dataPathArr[s]:"parentDataProperty";r+=" , "+X+" , "+Ee+" , rootData )  ";var Pe=r;r=ne.pop(),T.errors===!1?(r+=" "+l+" = ",q&&(r+="await "),r+=""+Pe+"; "):q?(Q="customErrors"+i,r+=" var "+Q+" = null; try { "+l+" = await "+Pe+"; } catch (e) { "+l+" = false; if (e instanceof ValidationError) "+Q+" = e.errors; else throw e; } "):r+=" "+Q+" = null; "+l+" = "+Pe+"; "}if(T.modifying&&(r+=" if ("+X+") "+w+" = "+X+"["+Ee+"];"),r+=""+I,T.valid)h&&(r+=" if (true) { ");else{r+=" if ( ",T.valid===void 0?(r+=" !",H?r+=""+oe:r+=""+l):r+=" "+!T.valid+" ",r+=") { ",E=d.keyword;var ne=ne||[];ne.push(r),r="";var ne=ne||[];ne.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(E||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { keyword: '"+d.keyword+"' } ",e.opts.messages!==!1&&(r+=` , message: 'should pass "`+d.keyword+`" keyword validation' `),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+w+" "),r+=" } "):r+=" {} ";var we=r;r=ne.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+we+"]); ":r+=" validate.errors = ["+we+"]; return false; ":r+=" var err = "+we+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var he=r;r=ne.pop(),L?T.errors?T.errors!="full"&&(r+="  for (var "+V+"="+c+"; "+V+"<errors; "+V+"++) { var "+B+" = vErrors["+V+"]; if ("+B+".dataPath === undefined) "+B+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+B+".schemaPath === undefined) { "+B+'.schemaPath = "'+p+'"; } ',e.opts.verbose&&(r+=" "+B+".schema = "+b+"; "+B+".data = "+w+"; "),r+=" } "):T.errors===!1?r+=" "+he+" ":(r+=" if ("+c+" == errors) { "+he+" } else {  for (var "+V+"="+c+"; "+V+"<errors; "+V+"++) { var "+B+" = vErrors["+V+"]; if ("+B+".dataPath === undefined) "+B+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+B+".schemaPath === undefined) { "+B+'.schemaPath = "'+p+'"; } ',e.opts.verbose&&(r+=" "+B+".schema = "+b+"; "+B+".data = "+w+"; "),r+=" } } "):H?(r+="   var err =   ",e.createErrors!==!1?(r+=" { keyword: '"+(E||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { keyword: '"+d.keyword+"' } ",e.opts.messages!==!1&&(r+=` , message: 'should pass "`+d.keyword+`" keyword validation' `),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+w+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; ")):T.errors===!1?r+=" "+he+" ":(r+=" if (Array.isArray("+Q+")) { if (vErrors === null) vErrors = "+Q+"; else vErrors = vErrors.concat("+Q+"); errors = vErrors.length;  for (var "+V+"="+c+"; "+V+"<errors; "+V+"++) { var "+B+" = vErrors["+V+"]; if ("+B+".dataPath === undefined) "+B+".dataPath = (dataPath || '') + "+e.errorPath+";  "+B+'.schemaPath = "'+p+'";  ',e.opts.verbose&&(r+=" "+B+".schema = "+b+"; "+B+".data = "+w+"; "),r+=" } } else { "+he+" } "),r+=" } ",h&&(r+=" else { ")}return r};const $schema$1="http://json-schema.org/draft-07/schema#",$id$1="http://json-schema.org/draft-07/schema#",title$2="Core schema meta-schema",definitions$1={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type$3=["object","boolean"],properties$2={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},require$$13={$schema:$schema$1,$id:$id$1,title:title$2,definitions:definitions$1,type:type$3,properties:properties$2,default:!0};var metaSchema=require$$13,definition_schema={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:metaSchema.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:metaSchema.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}},IDENTIFIER=/^[a-z_$][a-z0-9_$-]*$/i,customRuleCode=custom,definitionSchema=definition_schema,keyword={add:addKeyword,get:getKeyword,remove:removeKeyword,validate:validateKeyword};function addKeyword(t,e){var a=this.RULES;if(a.keywords[t])throw new Error("Keyword "+t+" is already defined");if(!IDENTIFIER.test(t))throw new Error("Keyword "+t+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var n=e.type;if(Array.isArray(n))for(var r=0;r<n.length;r++)s(t,n[r],e);else s(t,n,e);var i=e.metaSchema;i&&(e.$data&&this._opts.$data&&(i={anyOf:[i,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(i,!0))}a.keywords[t]=a.all[t]=!0;function s(o,f,p){for(var h,E=0;E<a.length;E++){var w=a[E];if(w.type==f){h=w;break}}h||(h={type:f,rules:[]},a.push(h));var l={keyword:o,definition:p,custom:!0,code:customRuleCode,implements:p.implements};h.rules.push(l),a.custom[o]=l}return this}function getKeyword(t){var e=this.RULES.custom[t];return e?e.definition:this.RULES.keywords[t]||!1}function removeKeyword(t){var e=this.RULES;delete e.keywords[t],delete e.all[t],delete e.custom[t];for(var a=0;a<e.length;a++)for(var n=e[a].rules,r=0;r<n.length;r++)if(n[r].keyword==t){n.splice(r,1);break}return this}function validateKeyword(t,e){validateKeyword.errors=null;var a=this._validateKeyword=this._validateKeyword||this.compile(definitionSchema,!0);if(a(t))return!0;if(validateKeyword.errors=a.errors,e)throw new Error("custom keyword definition is invalid: "+this.errorsText(a.errors));return!1}const $schema="http://json-schema.org/draft-07/schema#",$id="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description="Meta-schema for $data reference (JSON Schema extension proposal)",type$2="object",required=["$data"],properties$1={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties$1=!1,require$$12={$schema,$id,description,type:type$2,required,properties:properties$1,additionalProperties:additionalProperties$1};var compileSchema=compile_1,resolve=resolve_1,Cache=cacheExports,SchemaObject=schema_obj,stableStringify=fastJsonStableStringify,formats=formats_1,rules=rules$1,$dataMetaSchema=data,util=util$5,ajv=Ajv$1;Ajv$1.prototype.validate=validate;Ajv$1.prototype.compile=compile;Ajv$1.prototype.addSchema=addSchema;Ajv$1.prototype.addMetaSchema=addMetaSchema;Ajv$1.prototype.validateSchema=validateSchema;Ajv$1.prototype.getSchema=getSchema;Ajv$1.prototype.removeSchema=removeSchema;Ajv$1.prototype.addFormat=addFormat;Ajv$1.prototype.errorsText=errorsText;Ajv$1.prototype._addSchema=_addSchema;Ajv$1.prototype._compile=_compile;Ajv$1.prototype.compileAsync=async;var customKeyword=keyword;Ajv$1.prototype.addKeyword=customKeyword.add;Ajv$1.prototype.getKeyword=customKeyword.get;Ajv$1.prototype.removeKeyword=customKeyword.remove;Ajv$1.prototype.validateKeyword=customKeyword.validate;var errorClasses=error_classes;Ajv$1.ValidationError=errorClasses.Validation;Ajv$1.MissingRefError=errorClasses.MissingRef;Ajv$1.$dataMetaSchema=$dataMetaSchema;var META_SCHEMA_ID="http://json-schema.org/draft-07/schema",META_IGNORE_OPTIONS=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],META_SUPPORT_DATA=["/properties"];function Ajv$1(t){if(!(this instanceof Ajv$1))return new Ajv$1(t);t=this._opts=util.copy(t)||{},setLogger(this),this._schemas={},this._refs={},this._fragments={},this._formats=formats(t.format),this._cache=t.cache||new Cache,this._loadingSchemas={},this._compilations=[],this.RULES=rules(),this._getId=chooseGetId(t),t.loopRequired=t.loopRequired||1/0,t.errorDataPath=="property"&&(t._errorDataPathProperty=!0),t.serialize===void 0&&(t.serialize=stableStringify),this._metaOpts=getMetaSchemaOptions(this),t.formats&&addInitialFormats(this),t.keywords&&addInitialKeywords(this),addDefaultMetaSchema(this),typeof t.meta=="object"&&this.addMetaSchema(t.meta),t.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),addInitialSchemas(this)}function validate(t,e){var a;if(typeof t=="string"){if(a=this.getSchema(t),!a)throw new Error('no schema with key or ref "'+t+'"')}else{var n=this._addSchema(t);a=n.validate||this._compile(n)}var r=a(e);return a.$async!==!0&&(this.errors=a.errors),r}function compile(t,e){var a=this._addSchema(t,void 0,e);return a.validate||this._compile(a)}function addSchema(t,e,a,n){if(Array.isArray(t)){for(var r=0;r<t.length;r++)this.addSchema(t[r],void 0,a,n);return this}var i=this._getId(t);if(i!==void 0&&typeof i!="string")throw new Error("schema id must be string");return e=resolve.normalizeId(e||i),checkUnique(this,e),this._schemas[e]=this._addSchema(t,a,n,!0),this}function addMetaSchema(t,e,a){return this.addSchema(t,e,a,!0),this}function validateSchema(t,e){var a=t.$schema;if(a!==void 0&&typeof a!="string")throw new Error("$schema must be a string");if(a=a||this._opts.defaultMeta||defaultMeta(this),!a)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var n=this.validate(a,t);if(!n&&e){var r="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(r);else throw new Error(r)}return n}function defaultMeta(t){var e=t._opts.meta;return t._opts.defaultMeta=typeof e=="object"?t._getId(e)||e:t.getSchema(META_SCHEMA_ID)?META_SCHEMA_ID:void 0,t._opts.defaultMeta}function getSchema(t){var e=_getSchemaObj(this,t);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return _getSchemaFragment(this,t)}}function _getSchemaFragment(t,e){var a=resolve.schema.call(t,{schema:{}},e);if(a){var n=a.schema,r=a.root,i=a.baseId,s=compileSchema.call(t,n,r,void 0,i);return t._fragments[e]=new SchemaObject({ref:e,fragment:!0,schema:n,root:r,baseId:i,validate:s}),s}}function _getSchemaObj(t,e){return e=resolve.normalizeId(e),t._schemas[e]||t._refs[e]||t._fragments[e]}function removeSchema(t){if(t instanceof RegExp)return _removeAllSchemas(this,this._schemas,t),_removeAllSchemas(this,this._refs,t),this;switch(typeof t){case"undefined":return _removeAllSchemas(this,this._schemas),_removeAllSchemas(this,this._refs),this._cache.clear(),this;case"string":var e=_getSchemaObj(this,t);return e&&this._cache.del(e.cacheKey),delete this._schemas[t],delete this._refs[t],this;case"object":var a=this._opts.serialize,n=a?a(t):t;this._cache.del(n);var r=this._getId(t);r&&(r=resolve.normalizeId(r),delete this._schemas[r],delete this._refs[r])}return this}function _removeAllSchemas(t,e,a){for(var n in e){var r=e[n];!r.meta&&(!a||a.test(n))&&(t._cache.del(r.cacheKey),delete e[n])}}function _addSchema(t,e,a,n){if(typeof t!="object"&&typeof t!="boolean")throw new Error("schema should be object or boolean");var r=this._opts.serialize,i=r?r(t):t,s=this._cache.get(i);if(s)return s;n=n||this._opts.addUsedSchema!==!1;var o=resolve.normalizeId(this._getId(t));o&&n&&checkUnique(this,o);var f=this._opts.validateSchema!==!1&&!e,p;f&&!(p=o&&o==resolve.normalizeId(t.$schema))&&this.validateSchema(t,!0);var h=resolve.ids.call(this,t),E=new SchemaObject({id:o,schema:t,localRefs:h,cacheKey:i,meta:a});return o[0]!="#"&&n&&(this._refs[o]=E),this._cache.put(i,E),f&&p&&this.validateSchema(t,!0),E}function _compile(t,e){if(t.compiling)return t.validate=r,r.schema=t.schema,r.errors=null,r.root=e||r,t.schema.$async===!0&&(r.$async=!0),r;t.compiling=!0;var a;t.meta&&(a=this._opts,this._opts=this._metaOpts);var n;try{n=compileSchema.call(this,t.schema,e,t.localRefs)}catch(i){throw delete t.validate,i}finally{t.compiling=!1,t.meta&&(this._opts=a)}return t.validate=n,t.refs=n.refs,t.refVal=n.refVal,t.root=n.root,n;function r(){var i=t.validate,s=i.apply(this,arguments);return r.errors=i.errors,s}}function chooseGetId(t){switch(t.schemaId){case"auto":return _get$IdOrId;case"id":return _getId;default:return _get$Id}}function _getId(t){return t.$id&&this.logger.warn("schema $id ignored",t.$id),t.id}function _get$Id(t){return t.id&&this.logger.warn("schema id ignored",t.id),t.$id}function _get$IdOrId(t){if(t.$id&&t.id&&t.$id!=t.id)throw new Error("schema $id is different from id");return t.$id||t.id}function errorsText(t,e){if(t=t||this.errors,!t)return"No errors";e=e||{};for(var a=e.separator===void 0?", ":e.separator,n=e.dataVar===void 0?"data":e.dataVar,r="",i=0;i<t.length;i++){var s=t[i];s&&(r+=n+s.dataPath+" "+s.message+a)}return r.slice(0,-a.length)}function addFormat(t,e){return typeof e=="string"&&(e=new RegExp(e)),this._formats[t]=e,this}function addDefaultMetaSchema(t){var e;if(t._opts.$data&&(e=require$$12,t.addMetaSchema(e,e.$id,!0)),t._opts.meta!==!1){var a=require$$13;t._opts.$data&&(a=$dataMetaSchema(a,META_SUPPORT_DATA)),t.addMetaSchema(a,META_SCHEMA_ID,!0),t._refs["http://json-schema.org/schema"]=META_SCHEMA_ID}}function addInitialSchemas(t){var e=t._opts.schemas;if(e)if(Array.isArray(e))t.addSchema(e);else for(var a in e)t.addSchema(e[a],a)}function addInitialFormats(t){for(var e in t._opts.formats){var a=t._opts.formats[e];t.addFormat(e,a)}}function addInitialKeywords(t){for(var e in t._opts.keywords){var a=t._opts.keywords[e];t.addKeyword(e,a)}}function checkUnique(t,e){if(t._schemas[e]||t._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}function getMetaSchemaOptions(t){for(var e=util.copy(t._opts),a=0;a<META_IGNORE_OPTIONS.length;a++)delete e[META_IGNORE_OPTIONS[a]];return e}function setLogger(t){var e=t._opts.logger;if(e===!1)t.logger={log:noop$2,warn:noop$2,error:noop$2};else{if(e===void 0&&(e=console),!(typeof e=="object"&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");t.logger=e}}function noop$2(){}const title$1="definitions",definitions={contextualizedFieldName:{type:"string",pattern:"^(this\\.)?.+$"},dataTypeArgsCount:{oneOf:[{$ref:"#/definitions/contextualizedFieldName"},{type:"number"}]},fieldName:{type:"string",pattern:"^[a-zA-Z0-9_]+$"}},type$1="object",require$$2$2={title:title$1,definitions,type:type$1},title="protocol",type="object",properties={types:{type:"object",patternProperties:{"^[0-9a-zA-Z_]+$":{oneOf:[{type:"string"},{type:"array",items:[{type:"string"},{oneOf:[{type:"object"},{type:"array"}]}]}]}},additionalProperties:!1}},patternProperties={"^(?!types)[a-zA-Z_]+$":{$ref:"#"}},additionalProperties=!1,require$$3$1={title,type,properties,patternProperties,additionalProperties},i8$3={enum:["i8"]},u8$1={enum:["u8"]},i16$3={enum:["i16"]},u16$2={enum:["u16"]},i32$3={enum:["i32"]},u32$1={enum:["u32"]},f32$3={enum:["f32"]},f64$3={enum:["f64"]},li8$1={enum:["li8"]},lu8$1={enum:["lu8"]},li16$1={enum:["li16"]},lu16$1={enum:["lu16"]},li32$1={enum:["li32"]},lu32$1={enum:["lu32"]},lf32$1={enum:["lf32"]},lf64$1={enum:["lf64"]},i64$3={enum:["i64"]},li64$1={enum:["li64"]},u64$1={enum:["u64"]},lu64$1={enum:["lu64"]},varint$1={enum:["varint"]},int$1={title:"int",type:"array",items:[{enum:["int"]},{type:"array",items:{type:"object",properties:{size:{type:"number"}},required:["size"],additionalProperties:!1},additionalItems:!1}],additionalItems:!1},lint$1={title:"lint",type:"array",items:[{enum:["lint"]},{type:"array",items:{type:"object",properties:{size:{type:"number"}},required:["size"],additionalProperties:!1},additionalItems:!1}],additionalItems:!1},require$$4={i8:i8$3,u8:u8$1,i16:i16$3,u16:u16$2,i32:i32$3,u32:u32$1,f32:f32$3,f64:f64$3,li8:li8$1,lu8:lu8$1,li16:li16$1,lu16:lu16$1,li32:li32$1,lu32:lu32$1,lf32:lf32$1,lf64:lf64$1,i64:i64$3,li64:li64$1,u64:u64$1,lu64:lu64$1,varint:varint$1,int:int$1,lint:lint$1},pstring$3={title:"pstring",type:"array",items:[{enum:["pstring"]},{oneOf:[{type:"object",properties:{countType:{$ref:"dataType"}},additionalProperties:!1,required:["countType"]},{type:"object",properties:{count:{$ref:"definitions#/definitions/dataTypeArgsCount"}},additionalProperties:!1,required:["count"]}]}],additionalItems:!1},buffer$1={title:"buffer",type:"array",items:[{enum:["buffer"]},{oneOf:[{type:"object",properties:{countType:{$ref:"dataType"}},additionalProperties:!1,required:["countType"]},{type:"object",properties:{count:{$ref:"definitions#/definitions/dataTypeArgsCount"}},additionalProperties:!1,required:["count"]}]}]},bitfield$1={title:"bitfield",type:"array",items:[{enum:["bitfield"]},{type:"array",items:{type:"object",properties:{name:{$ref:"definitions#/definitions/fieldName"},size:{type:"number"},signed:{type:"boolean"}},required:["name","size","signed"],additionalProperties:!1},additionalItems:!1}],additionalItems:!1},mapper$1={title:"mapper",type:"array",items:[{enum:["mapper"]},{type:"object",properties:{type:{$ref:"dataType"},mappings:{type:"object",patternProperties:{"^[-a-zA-Z0-9 _]+$":{type:"string"}},additionalProperties:!1}},required:["type","mappings"],additionalProperties:!1}],additionalItems:!1},require$$5={pstring:pstring$3,buffer:buffer$1,bitfield:bitfield$1,mapper:mapper$1},array$1={title:"array",type:"array",items:[{enum:["array"]},{oneOf:[{type:"object",properties:{type:{$ref:"dataType"},countType:{$ref:"dataType"}},additionalProperties:!1,required:["type","countType"]},{type:"object",properties:{type:{$ref:"dataType"},count:{$ref:"definitions#/definitions/dataTypeArgsCount"}},additionalProperties:!1,required:["type","count"]}]}],additionalItems:!1},count$1={title:"count",type:"array",items:[{enum:["count"]},{type:"object",properties:{countFor:{$ref:"definitions#/definitions/contextualizedFieldName"},type:{$ref:"dataType"}},required:["countFor","type"],additionalProperties:!1}],additionalItems:!1},container$3={title:"container",type:"array",items:[{enum:["container"]},{type:"array",items:{type:"object",properties:{anon:{type:"boolean"},name:{$ref:"definitions#/definitions/fieldName"},type:{$ref:"dataType"}},oneOf:[{required:["anon"]},{required:["name"]}],required:["type"],additionalProperties:!1},additionalItems:!1}],additionalItems:!1},require$$6={array:array$1,count:count$1,container:container$3},option$1={title:"option",type:"array",items:[{enum:["option"]},{$ref:"dataType"}],additionalItems:!1},require$$7={switch:{title:"switch",type:"array",items:[{enum:["switch"]},{type:"object",properties:{compareTo:{$ref:"definitions#/definitions/contextualizedFieldName"},compareToValue:{type:"string"},fields:{type:"object",patternProperties:{"^[-a-zA-Z0-9 _:/]+$":{$ref:"dataType"}},additionalProperties:!1},default:{$ref:"dataType"}},oneOf:[{required:["compareTo","fields"]},{required:["compareToValue","fields"]}],additionalProperties:!1}],additionalItems:!1},option:option$1},bool={enum:["bool"]},cstring={enum:["cstring"]},require$$8={bool,cstring,void:{enum:["void"]}},Ajv=ajv,assert$1=require$$0;let Validator$1=class{constructor(e){this.createAjvInstance(e),this.addDefaultTypes()}createAjvInstance(e){this.typesSchemas={},this.compiled=!1,this.ajv=new Ajv({verbose:!0}),this.ajv.addSchema(require$$2$2,"definitions"),this.ajv.addSchema(require$$3$1,"protocol"),e&&Object.keys(e).forEach(a=>this.addType(a,e[a]))}addDefaultTypes(){this.addTypes(require$$4),this.addTypes(require$$5),this.addTypes(require$$6),this.addTypes(require$$7),this.addTypes(require$$8)}addTypes(e){Object.keys(e).forEach(a=>this.addType(a,e[a]))}typeToSchemaName(e){return e.replace("|","_")}addType(e,a){const n=this.typeToSchemaName(e);this.typesSchemas[n]==null&&(a||(a={oneOf:[{enum:[e]},{type:"array",items:[{enum:[e]},{oneOf:[{type:"object"},{type:"array"}]}]}]}),this.typesSchemas[n]=a,this.compiled?this.createAjvInstance(this.typesSchemas):this.ajv.addSchema(a,n),this.ajv.removeSchema("dataType"),this.ajv.addSchema({title:"dataType",oneOf:[{enum:["native"]}].concat(Object.keys(this.typesSchemas).map(r=>({$ref:this.typeToSchemaName(r)})))},"dataType"))}validateType(e){let a=this.ajv.validate("dataType",e);if(this.compiled=!0,!a)throw console.log(JSON.stringify(this.ajv.errors[0],null,2)),this.ajv.errors[0].parentSchema.title=="dataType"&&this.validateTypeGoingInside(this.ajv.errors[0].data),new Error("validation error")}validateTypeGoingInside(e){if(Array.isArray(e)){assert$1.ok(this.typesSchemas[this.typeToSchemaName(e[0])]!=null,e+" is an undefined type");let a=this.ajv.validate(e[0],e);if(this.compiled=!0,!a)throw console.log(JSON.stringify(this.ajv.errors[0],null,2)),this.ajv.errors[0].parentSchema.title=="dataType"&&this.validateTypeGoingInside(this.ajv.errors[0].data),new Error("validation error")}else{if(e=="native")return;assert$1.ok(this.typesSchemas[this.typeToSchemaName(e)]!=null,e+" is an undefined type")}}validateProtocol(e){let a=this.ajv.validate("protocol",e);assert$1.ok(a,JSON.stringify(this.ajv.errors,null,2));function n(r,i,s){const o=new Validator$1(i.typesSchemas);Object.keys(r).forEach(f=>{f=="types"?(Object.keys(r[f]).forEach(p=>o.addType(p)),Object.keys(r[f]).forEach(p=>{try{o.validateType(r[f][p],s+"."+f+"."+p)}catch{throw new Error("Error at "+s+"."+f+"."+p)}})):n(r[f],o,s+"."+f)})}n(e,this,"root")}};var protodefValidator=Validator$1;const i8$2={enum:["i8"]},u8={enum:["u8"]},i16$2={enum:["i16"]},u16$1={enum:["u16"]},i32$2={enum:["i32"]},u32={enum:["u32"]},f32$2={enum:["f32"]},f64$2={enum:["f64"]},li8={enum:["li8"]},lu8={enum:["lu8"]},li16={enum:["li16"]},lu16={enum:["lu16"]},li32={enum:["li32"]},lu32={enum:["lu32"]},lf32={enum:["lf32"]},lf64={enum:["lf64"]},i64$2={enum:["i64"]},li64={enum:["li64"]},u64={enum:["u64"]},lu64={enum:["lu64"]},varint={enum:["varint"]},int={title:"int",type:"array",items:[{enum:["int"]},{type:"array",items:{type:"object",properties:{size:{type:"number"}},required:["size"],additionalProperties:!1},additionalItems:!1}],additionalItems:!1},lint={title:"lint",type:"array",items:[{enum:["lint"]},{type:"array",items:{type:"object",properties:{size:{type:"number"}},required:["size"],additionalProperties:!1},additionalItems:!1}],additionalItems:!1},require$$1$2={i8:i8$2,u8,i16:i16$2,u16:u16$1,i32:i32$2,u32,f32:f32$2,f64:f64$2,li8,lu8,li16,lu16,li32,lu32,lf32,lf64,i64:i64$2,li64,u64,lu64,varint,int,lint},{PartialReadError:PartialReadError$1}=utils$2;class SignedBigInt extends Array{valueOf(){return BigInt.asIntN(64,BigInt(this[0])<<32n)|BigInt.asUintN(32,BigInt(this[1]))}toString(){return this.valueOf().toString()}[Symbol.for("nodejs.util.inspect.custom")](){return this.valueOf()}}class UnsignedBigInt extends Array{valueOf(){return BigInt.asUintN(64,BigInt(this[0])<<32n)|BigInt.asUintN(32,BigInt(this[1]))}toString(){return this.valueOf().toString()}[Symbol.for("nodejs.util.inspect.custom")](){return this.valueOf()}}function readI64(t,e){if(e+8>t.length)throw new PartialReadError$1;return{value:new SignedBigInt(t.readInt32BE(e),t.readInt32BE(e+4)),size:8}}function writeI64(t,e,a){return typeof t=="bigint"?e.writeBigInt64BE(t,a):(e.writeInt32BE(t[0],a),e.writeInt32BE(t[1],a+4)),a+8}function readLI64(t,e){if(e+8>t.length)throw new PartialReadError$1;return{value:new SignedBigInt(t.readInt32LE(e+4),t.readInt32LE(e)),size:8}}function writeLI64(t,e,a){return typeof t=="bigint"?e.writeBigInt64LE(t,a):(e.writeInt32LE(t[0],a+4),e.writeInt32LE(t[1],a)),a+8}function readU64(t,e){if(e+8>t.length)throw new PartialReadError$1;return{value:new UnsignedBigInt(t.readUInt32BE(e),t.readUInt32BE(e+4)),size:8}}function writeU64(t,e,a){return typeof t=="bigint"?e.writeBigUInt64BE(t,a):(e.writeUInt32BE(t[0],a),e.writeUInt32BE(t[1],a+4)),a+8}function readLU64(t,e){if(e+8>t.length)throw new PartialReadError$1;return{value:new UnsignedBigInt(t.readUInt32LE(e+4),t.readUInt32LE(e)),size:8}}function writeLU64(t,e,a){return typeof t=="bigint"?e.writeBigUInt64LE(t,a):(e.writeUInt32LE(t[0],a+4),e.writeUInt32LE(t[1],a)),a+8}function generateFunctions(t,e,a,n){return[(s,o)=>{if(o+a>s.length)throw new PartialReadError$1;return{value:s[t](o),size:a}},(s,o,f)=>(o[e](s,f),f+a),a,n]}const nums={i8:["readInt8","writeInt8",1],u8:["readUInt8","writeUInt8",1],i16:["readInt16BE","writeInt16BE",2],u16:["readUInt16BE","writeUInt16BE",2],i32:["readInt32BE","writeInt32BE",4],u32:["readUInt32BE","writeUInt32BE",4],f32:["readFloatBE","writeFloatBE",4],f64:["readDoubleBE","writeDoubleBE",8],li8:["readInt8","writeInt8",1],lu8:["readUInt8","writeUInt8",1],li16:["readInt16LE","writeInt16LE",2],lu16:["readUInt16LE","writeUInt16LE",2],li32:["readInt32LE","writeInt32LE",4],lu32:["readUInt32LE","writeUInt32LE",4],lf32:["readFloatLE","writeFloatLE",4],lf64:["readDoubleLE","writeDoubleLE",8]},types=Object.keys(nums).reduce((t,e)=>(t[e]=generateFunctions(nums[e][0],nums[e][1],nums[e][2],require$$1$2[e]),t),{});types.i64=[readI64,writeI64,8,require$$1$2.i64];types.li64=[readLI64,writeLI64,8,require$$1$2.li64];types.u64=[readU64,writeU64,8,require$$1$2.u64];types.lu64=[readLU64,writeLU64,8,require$$1$2.lu64];var numeric$1=types;const pstring$2={title:"pstring",type:"array",items:[{enum:["pstring"]},{oneOf:[{type:"object",properties:{countType:{$ref:"dataType"},encoding:{type:"string"}},additionalProperties:!1,required:["countType"]},{type:"object",properties:{count:{$ref:"definitions#/definitions/dataTypeArgsCount"},encoding:{type:"string"}},additionalProperties:!1,required:["count"]}]}],additionalItems:!1},buffer={title:"buffer",type:"array",items:[{enum:["buffer"]},{oneOf:[{type:"object",properties:{countType:{$ref:"dataType"}},additionalProperties:!1,required:["countType"]},{type:"object",properties:{count:{$ref:"definitions#/definitions/dataTypeArgsCount"}},additionalProperties:!1,required:["count"]}]}]},bitfield={title:"bitfield",type:"array",items:[{enum:["bitfield"]},{type:"array",items:{type:"object",properties:{name:{$ref:"definitions#/definitions/fieldName"},size:{type:"number"},signed:{type:"boolean"}},required:["name","size","signed"],additionalProperties:!1},additionalItems:!1}],additionalItems:!1},mapper={title:"mapper",type:"array",items:[{enum:["mapper"]},{type:"object",properties:{type:{$ref:"dataType"},mappings:{type:"object",patternProperties:{"^[-a-zA-Z0-9 _]+$":{type:"string"}},additionalProperties:!1}},required:["type","mappings"],additionalProperties:!1}],additionalItems:!1},require$$2$1={pstring:pstring$2,buffer,bitfield,mapper},assert=require$$0,{getCount,sendCount,calcCount,PartialReadError}=utils$2;var utils$1={varint:[readVarInt,writeVarInt,sizeOfVarInt,require$$2$1.varint],bool:[readBool,writeBool,1,require$$2$1.bool],pstring:[readPString,writePString,sizeOfPString,require$$2$1.pstring],buffer:[readBuffer,writeBuffer,sizeOfBuffer,require$$2$1.buffer],void:[readVoid,writeVoid,0,require$$2$1.void],bitfield:[readBitField,writeBitField,sizeOfBitField,require$$2$1.bitfield],cstring:[readCString,writeCString,sizeOfCString,require$$2$1.cstring],mapper:[readMapper,writeMapper,sizeOfMapper,require$$2$1.mapper]};function mapperEquality(t,e){return t===e||parseInt(t)===parseInt(e)}function readMapper(t,e,{type:a,mappings:n},r){const{size:i,value:s}=this.read(t,e,a,r);let o=null;const f=Object.keys(n);for(let p=0;p<f.length;p++)if(mapperEquality(f[p],s)){o=n[f[p]];break}if(o==null)throw new Error(s+" is not in the mappings value");return{size:i,value:o}}function writeMapper(t,e,a,{type:n,mappings:r},i){const s=Object.keys(r);let o=null;for(let f=0;f<s.length;f++)if(mapperEquality(r[s[f]],t)){o=s[f];break}if(o==null)throw new Error(t+" is not in the mappings value");return this.write(o,e,a,n,i)}function sizeOfMapper(t,{type:e,mappings:a},n){const r=Object.keys(a);let i=null;for(let s=0;s<r.length;s++)if(mapperEquality(a[r[s]],t)){i=r[s];break}if(i==null)throw new Error(t+" is not in the mappings value");return this.sizeOf(i,e,n)}function readVarInt(t,e){let a=0,n=0,r=e;for(;;){if(r+1>t.length)throw new PartialReadError;const i=t.readUInt8(r);if(a|=(i&127)<<n,r++,!(i&128))return{value:a,size:r-e};n+=7,assert.ok(n<64,"varint is too big")}}function sizeOfVarInt(t){let e=0;for(;t&-128;)t>>>=7,e++;return e+1}function writeVarInt(t,e,a){let n=0;for(;t&-128;)e.writeUInt8(t&255|128,a+n),n++,t>>>=7;return e.writeUInt8(t,a+n),a+n+1}function readPString(t,e,a,n){const{size:r,count:i}=getCount.call(this,t,e,a,n),s=e+r,o=s+i;if(o>t.length)throw new PartialReadError("Missing characters in string, found size is "+t.length+" expected size was "+o);return{value:t.toString(a.encoding||"utf8",s,o),size:o-e}}function writePString(t,e,a,n,r){const i=Buffer.byteLength(t,"utf8");return a=sendCount.call(this,i,e,a,n,r),e.write(t,a,i,n.encoding||"utf8"),a+i}function sizeOfPString(t,e,a){const n=Buffer.byteLength(t,e.encoding||"utf8");return calcCount.call(this,n,e,a)+n}function readBool(t,e){if(e+1>t.length)throw new PartialReadError;return{value:!!t.readInt8(e),size:1}}function writeBool(t,e,a){return e.writeInt8(+t,a),a+1}function readBuffer(t,e,a,n){const{size:r,count:i}=getCount.call(this,t,e,a,n);if(e+=r,e+i>t.length)throw new PartialReadError;return{value:t.slice(e,e+i),size:r+i}}function writeBuffer(t,e,a,n,r){return t instanceof Buffer||(t=Buffer.from(t)),a=sendCount.call(this,t.length,e,a,n,r),t.copy(e,a),a+t.length}function sizeOfBuffer(t,e,a){return t instanceof Buffer||(t=Buffer.from(t)),calcCount.call(this,t.length,e,a)+t.length}function readVoid(){return{value:void 0,size:0}}function writeVoid(t,e,a){return a}function generateBitMask(t){return(1<<t)-1}function readBitField(t,e,a){const n=e;let r=null,i=0;const s={};return s.value=a.reduce((o,{size:f,signed:p,name:h})=>{let E=f,w=0;for(;E>0;){if(i===0){if(t.length<e+1)throw new PartialReadError;r=t[e++],i=8}const l=Math.min(E,i);w=w<<l|(r&generateBitMask(i))>>i-l,i-=l,E-=l}return p&&w>=1<<f-1&&(w-=1<<f),o[h]=w,o},{}),s.size=e-n,s}function writeBitField(t,e,a,n){let r=0,i=0;return n.forEach(({size:s,signed:o,name:f})=>{const p=t[f];if(!o&&p<0||o&&p<-(1<<s-1))throw new Error(t+" < "+o?-(1<<s-1):0);if(!o&&p>=1<<s||o&&p>=(1<<s-1)-1)throw new Error(t+" >= "+o?1<<s:(1<<s-1)-1);for(;s>0;){const h=Math.min(8-i,s);r=r<<h|p>>s-h&generateBitMask(h),s-=h,i+=h,i===8&&(e[a++]=r,i=0,r=0)}}),i!==0&&(e[a++]=r<<8-i),a}function sizeOfBitField(t,e){return Math.ceil(e.reduce((a,{size:n})=>a+n,0)/8)}function readCString(t,e,a){let n=0;for(;e+n<t.length&&t[e+n]!==0;)n++;if(t.length<e+n+1)throw new PartialReadError;return{value:t.toString((a==null?void 0:a.encoding)||"utf8",e,e+n),size:n+1}}function writeCString(t,e,a,n){const r=Buffer.byteLength(t,(n==null?void 0:n.encoding)||"utf8");return e.write(t,a,r,(n==null?void 0:n.encoding)||"utf8"),a+=r,e.writeInt8(0,a),a+1}function sizeOfCString(t){return Buffer.byteLength(t,"utf8")+1}const array={title:"array",type:"array",items:[{enum:["array"]},{oneOf:[{type:"object",properties:{type:{$ref:"dataType"},countType:{$ref:"dataType"}},additionalProperties:!1,required:["type","countType"]},{type:"object",properties:{type:{$ref:"dataType"},count:{$ref:"definitions#/definitions/dataTypeArgsCount"}},additionalProperties:!1,required:["type","count"]}]}],additionalItems:!1},count={title:"count",type:"array",items:[{enum:["count"]},{type:"object",properties:{countFor:{$ref:"definitions#/definitions/contextualizedFieldName"},type:{$ref:"dataType"}},required:["countFor","type"],additionalProperties:!1}],additionalItems:!1},container$2={title:"container",type:"array",items:[{enum:["container"]},{type:"array",items:{type:"object",properties:{anon:{type:"boolean"},name:{$ref:"definitions#/definitions/fieldName"},type:{$ref:"dataType"}},oneOf:[{required:["anon"]},{required:["name"]}],required:["type"],additionalProperties:!1},additionalItems:!1}],additionalItems:!1},require$$1$1={array,count,container:container$2};var structures,hasRequiredStructures;function requireStructures(){if(hasRequiredStructures)return structures;hasRequiredStructures=1;const{getField:t,getCount:e,sendCount:a,calcCount:n,tryDoc:r}=utils$2;structures={array:[i,s,o,require$$1$1.array],count:[E,w,l,require$$1$1.count],container:[f,p,h,require$$1$1.container]};function i(c,y,b,d){const _={value:[],size:0};let T,{count:I,size:D}=e.call(this,c,y,b,d);y+=D,_.size+=D;for(let L=0;L<I;L++)({size:D,value:T}=r(()=>this.read(c,y,b.type,d),L)),_.size+=D,y+=D,_.value.push(T);return _}function s(c,y,b,d,_){return b=a.call(this,c.length,y,b,d,_),c.reduce((T,I,D)=>r(()=>this.write(I,y,T,d.type,_),D),b)}function o(c,y,b){let d=n.call(this,c.length,y,b);return d=c.reduce((_,T,I)=>r(()=>_+this.sizeOf(T,y.type,b),I),d),d}function f(c,y,b,d){const _={value:{"..":d},size:0};return b.forEach(({type:T,name:I,anon:D})=>{r(()=>{const L=this.read(c,y,T,_.value);_.size+=L.size,y+=L.size,D?L.value!==void 0&&Object.keys(L.value).forEach(H=>{_.value[H]=L.value[H]}):_.value[I]=L.value},I||"unknown")}),delete _.value[".."],_}function p(c,y,b,d,_){return c[".."]=_,b=d.reduce((T,{type:I,name:D,anon:L})=>r(()=>this.write(L?c:c[D],y,T,I,c),D||"unknown"),b),delete c[".."],b}function h(c,y,b){c[".."]=b;const d=y.reduce((_,{type:T,name:I,anon:D})=>_+r(()=>this.sizeOf(D?c:c[I],T,c),I||"unknown"),0);return delete c[".."],d}function E(c,y,{type:b},d){return this.read(c,y,b,d)}function w(c,y,b,{countFor:d,type:_},T){return this.write(t(d,T).length,y,b,_,T)}function l(c,{countFor:y,type:b},d){return this.sizeOf(t(y,d).length,b,d)}return structures}const option={title:"option",type:"array",items:[{enum:["option"]},{$ref:"dataType"}],additionalItems:!1},require$$1={switch:{title:"switch",type:"array",items:[{enum:["switch"]},{type:"object",properties:{compareTo:{$ref:"definitions#/definitions/contextualizedFieldName"},compareToValue:{type:"string"},fields:{type:"object",patternProperties:{"^[-a-zA-Z0-9 _:/]+$":{$ref:"dataType"}},additionalProperties:!1},default:{$ref:"dataType"}},oneOf:[{required:["compareTo","fields"]},{required:["compareToValue","fields"]}],additionalProperties:!1}],additionalItems:!1},option};var conditional,hasRequiredConditional;function requireConditional(){if(hasRequiredConditional)return conditional;hasRequiredConditional=1;const{getField:t,getFieldInfo:e,tryDoc:a,PartialReadError:n}=utils$2;conditional={switch:[r,i,s,require$$1.switch],option:[o,f,p,require$$1.option]};function r(h,E,{compareTo:w,fields:l,compareToValue:c,default:y},b){if(w=c!==void 0?c:t(w,b),typeof l[w]>"u"&&typeof y>"u")throw new Error(w+" has no associated fieldInfo in switch");for(const I in l)I.startsWith("/")&&(l[this.types[I.slice(1)]]=l[I],delete l[I]);const d=typeof l[w]>"u",_=d?y:l[w],T=e(_);return a(()=>this.read(h,E,T,b),d?"default":w)}function i(h,E,w,{compareTo:l,fields:c,compareToValue:y,default:b},d){if(l=y!==void 0?y:t(l,d),typeof c[l]>"u"&&typeof b>"u")throw new Error(l+" has no associated fieldInfo in switch");for(const I in c)I.startsWith("/")&&(c[this.types[I.slice(1)]]=c[I],delete c[I]);const _=typeof c[l]>"u",T=e(_?b:c[l]);return a(()=>this.write(h,E,w,T,d),_?"default":l)}function s(h,{compareTo:E,fields:w,compareToValue:l,default:c},y){if(E=l!==void 0?l:t(E,y),typeof w[E]>"u"&&typeof c>"u")throw new Error(E+" has no associated fieldInfo in switch");for(const _ in w)_.startsWith("/")&&(w[this.types[_.slice(1)]]=w[_],delete w[_]);const b=typeof w[E]>"u",d=e(b?c:w[E]);return a(()=>this.sizeOf(h,d,y),b?"default":E)}function o(h,E,w,l){if(h.length<E+1)throw new n;if(h.readUInt8(E++)!==0){const y=this.read(h,E,w,l);return y.size++,y}else return{size:1}}function f(h,E,w,l,c){return h!=null?(E.writeUInt8(1,w++),w=this.write(h,E,w,l,c)):E.writeUInt8(0,w++),w}function p(h,E,w){return h==null?1:this.sizeOf(h,E,w)+1}return conditional}const{getFieldInfo,tryCatch:tryCatch$1}=utils$2,reduce=lodash_reduceExports,get=lodash_get,Validator=protodefValidator;function isFieldInfo(t){return typeof t=="string"||Array.isArray(t)&&typeof t[0]=="string"||t.type}function findArgs(t,e,a){return typeof e=="string"&&e.charAt(0)==="$"?t.push({path:a,val:e.substr(1)}):(Array.isArray(e)||typeof e=="object")&&(t=t.concat(reduce(e,findArgs,[]).map(n=>({path:a+"."+n.path,val:n.val})))),t}function setField(t,e,a){const n=t.split(".").reverse();for(;n.length>1;)a=a[n.pop()];a[n.pop()]=e}function extendType(t,e){const a=JSON.stringify(e),n=reduce(e,findArgs,[]);function r(i){const s=JSON.parse(a);return n.forEach(o=>{setField(o.path,i[o.val],s)}),s}return[function(s,o,f,p){return t[0].call(this,s,o,r(f),p)},function(s,o,f,p,h){return t[1].call(this,s,o,f,r(p),h)},function(s,o,f){return typeof t[2]=="function"?t[2].call(this,s,r(o),f):t[2]}]}let ProtoDef$1=class{constructor(e=!0){this.types={},this.validator=e?new Validator:null,this.addDefaultTypes()}addDefaultTypes(){this.addTypes(numeric$1),this.addTypes(utils$1),this.addTypes(requireStructures()),this.addTypes(requireConditional())}addProtocol(e,a){const n=this;function r(i,s){i!==void 0&&(i.types&&n.addTypes(i.types),r(get(i,s.shift()),s))}this.validator&&this.validator.validateProtocol(e),r(e,a)}addType(e,a,n=!0){if(a==="native"){this.validator&&this.validator.addType(e);return}if(isFieldInfo(a)){this.validator&&(n&&this.validator.validateType(a),this.validator.addType(e));const{type:r,typeArgs:i}=getFieldInfo(a);this.types[e]=i?extendType(this.types[r],i):this.types[r]}else this.validator&&(a[3]?this.validator.addType(e,a[3]):this.validator.addType(e)),this.types[e]=a}addTypes(e){Object.keys(e).forEach(a=>this.addType(a,e[a],!1)),this.validator&&Object.keys(e).forEach(a=>{isFieldInfo(e[a])&&this.validator.validateType(e[a])})}setVariable(e,a){this.types[e]=a}read(e,a,n,r){const{type:i,typeArgs:s}=getFieldInfo(n),o=this.types[i];if(!o)throw new Error("missing data type: "+i);return o[0].call(this,e,a,s,r)}write(e,a,n,r,i){const{type:s,typeArgs:o}=getFieldInfo(r),f=this.types[s];if(!f)throw new Error("missing data type: "+s);return f[1].call(this,e,a,n,o,i)}sizeOf(e,a,n){const{type:r,typeArgs:i}=getFieldInfo(a),s=this.types[r];if(!s)throw new Error("missing data type: "+r);return typeof s[2]=="function"?s[2].call(this,e,i,n):s[2]}createPacketBuffer(e,a){const n=tryCatch$1(()=>this.sizeOf(a,e,{}),i=>{throw i.message=`SizeOf error for ${i.field} : ${i.message}`,i}),r=Buffer.allocUnsafe(n);return tryCatch$1(()=>this.write(a,r,0,e,{}),i=>{throw i.message=`Write error for ${i.field} : ${i.message}`,i}),r}parsePacketBuffer(e,a,n=0){const{value:r,size:i}=tryCatch$1(()=>this.read(a,n,e,{}),s=>{throw s.message=`Read error for ${s.field} : ${s.message}`,s});return{data:r,metadata:{size:i},buffer:a.slice(0,i),fullBuffer:a}}};var protodef=ProtoDef$1,readableBrowserExports={},readableBrowser={get exports(){return readableBrowserExports},set exports(t){readableBrowserExports=t}},streamBrowser=require$$0.EventEmitter,buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function t(w,l){var c=Object.keys(w);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(w);l&&(y=y.filter(function(b){return Object.getOwnPropertyDescriptor(w,b).enumerable})),c.push.apply(c,y)}return c}function e(w){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?t(Object(c),!0).forEach(function(y){a(w,y,c[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(c)):t(Object(c)).forEach(function(y){Object.defineProperty(w,y,Object.getOwnPropertyDescriptor(c,y))})}return w}function a(w,l,c){return l in w?Object.defineProperty(w,l,{value:c,enumerable:!0,configurable:!0,writable:!0}):w[l]=c,w}function n(w,l){if(!(w instanceof l))throw new TypeError("Cannot call a class as a function")}function r(w,l){for(var c=0;c<l.length;c++){var y=l[c];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(w,y.key,y)}}function i(w,l,c){return l&&r(w.prototype,l),c&&r(w,c),w}var s=require$$0,o=s.Buffer,f=require$$0,p=f.inspect,h=p&&p.custom||"inspect";function E(w,l,c){o.prototype.copy.call(w,l,c)}return buffer_list=function(){function w(){n(this,w),this.head=null,this.tail=null,this.length=0}return i(w,[{key:"push",value:function(c){var y={data:c,next:null};this.length>0?this.tail.next=y:this.head=y,this.tail=y,++this.length}},{key:"unshift",value:function(c){var y={data:c,next:this.head};this.length===0&&(this.tail=y),this.head=y,++this.length}},{key:"shift",value:function(){if(this.length!==0){var c=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,c}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(c){if(this.length===0)return"";for(var y=this.head,b=""+y.data;y=y.next;)b+=c+y.data;return b}},{key:"concat",value:function(c){if(this.length===0)return o.alloc(0);for(var y=o.allocUnsafe(c>>>0),b=this.head,d=0;b;)E(b.data,y,d),d+=b.data.length,b=b.next;return y}},{key:"consume",value:function(c,y){var b;return c<this.head.data.length?(b=this.head.data.slice(0,c),this.head.data=this.head.data.slice(c)):c===this.head.data.length?b=this.shift():b=y?this._getString(c):this._getBuffer(c),b}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(c){var y=this.head,b=1,d=y.data;for(c-=d.length;y=y.next;){var _=y.data,T=c>_.length?_.length:c;if(T===_.length?d+=_:d+=_.slice(0,c),c-=T,c===0){T===_.length?(++b,y.next?this.head=y.next:this.head=this.tail=null):(this.head=y,y.data=_.slice(T));break}++b}return this.length-=b,d}},{key:"_getBuffer",value:function(c){var y=o.allocUnsafe(c),b=this.head,d=1;for(b.data.copy(y),c-=b.data.length;b=b.next;){var _=b.data,T=c>_.length?_.length:c;if(_.copy(y,y.length-c,0,T),c-=T,c===0){T===_.length?(++d,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=_.slice(T));break}++d}return this.length-=d,y}},{key:h,value:function(c,y){return p(this,e({},y,{depth:0,customInspect:!1}))}}]),w}(),buffer_list}function destroy(t,e){var a=this,n=this._readableState&&this._readableState.destroyed,r=this._writableState&&this._writableState.destroyed;return n||r?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(emitErrorNT,this,t)):process.nextTick(emitErrorNT,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(i){!e&&i?a._writableState?a._writableState.errorEmitted?process.nextTick(emitCloseNT,a):(a._writableState.errorEmitted=!0,process.nextTick(emitErrorAndCloseNT,a,i)):process.nextTick(emitErrorAndCloseNT,a,i):e?(process.nextTick(emitCloseNT,a),e(i)):process.nextTick(emitCloseNT,a)}),this)}function emitErrorAndCloseNT(t,e){emitErrorNT(t,e),emitCloseNT(t)}function emitCloseNT(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT(t,e){t.emit("error",e)}function errorOrDestroy(t,e){var a=t._readableState,n=t._writableState;a&&a.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}var destroy_1={destroy,undestroy,errorOrDestroy},errorsBrowser={};function _inheritsLoose(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var codes={};function createErrorType(t,e,a){a||(a=Error);function n(i,s,o){return typeof e=="string"?e:e(i,s,o)}var r=function(i){_inheritsLoose(s,i);function s(o,f,p){return i.call(this,n(o,f,p))||this}return s}(a);r.prototype.name=a.name,r.prototype.code=t,codes[t]=r}function oneOf(t,e){if(Array.isArray(t)){var a=t.length;return t=t.map(function(n){return String(n)}),a>2?"one of ".concat(e," ").concat(t.slice(0,a-1).join(", "),", or ")+t[a-1]:a===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function startsWith(t,e,a){return t.substr(!a||a<0?0:+a,e.length)===e}function endsWith(t,e,a){return(a===void 0||a>t.length)&&(a=t.length),t.substring(a-e.length,a)===e}function includes(t,e,a){return typeof a!="number"&&(a=0),a+e.length>t.length?!1:t.indexOf(e,a)!==-1}createErrorType("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);createErrorType("ERR_INVALID_ARG_TYPE",function(t,e,a){var n;typeof e=="string"&&startsWith(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var r;if(endsWith(t," argument"))r="The ".concat(t," ").concat(n," ").concat(oneOf(e,"type"));else{var i=includes(t,".")?"property":"argument";r='The "'.concat(t,'" ').concat(i," ").concat(n," ").concat(oneOf(e,"type"))}return r+=". Received type ".concat(typeof a),r},TypeError);createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");createErrorType("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close");createErrorType("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times");createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end");createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);createErrorType("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");errorsBrowser.codes=codes;var ERR_INVALID_OPT_VALUE=errorsBrowser.codes.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom(t,e,a){return t.highWaterMark!=null?t.highWaterMark:e?t[a]:null}function getHighWaterMark(t,e,a,n){var r=highWaterMarkFrom(e,n,a);if(r!=null){if(!(isFinite(r)&&Math.floor(r)===r)||r<0){var i=n?a:"highWaterMark";throw new ERR_INVALID_OPT_VALUE(i,r)}return Math.floor(r)}return t.objectMode?16:16*1024}var state={getHighWaterMark},inherits_browserExports={},inherits_browser={get exports(){return inherits_browserExports},set exports(t){inherits_browserExports=t}};typeof Object.create=="function"?inherits_browser.exports=function(e,a){a&&(e.super_=a,e.prototype=Object.create(a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(e,a){if(a){e.super_=a;var n=function(){};n.prototype=a.prototype,e.prototype=new n,e.prototype.constructor=e}};var browser=deprecate;function deprecate(t,e){if(config("noDeprecation"))return t;var a=!1;function n(){if(!a){if(config("throwDeprecation"))throw new Error(e);config("traceDeprecation")?console.trace(e):console.warn(e),a=!0}return t.apply(this,arguments)}return n}function config(t){try{if(!{}.localStorage)return!1}catch{return!1}var e={}.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1,_stream_writable=M;function t(A){var O=this;this.next=null,this.entry=null,this.finish=function(){xe(O,A)}}var e;M.WritableState=L;var a={deprecate:browser},n=streamBrowser,r=require$$0.Buffer,i={}.Uint8Array||function(){};function s(A){return r.from(A)}function o(A){return r.isBuffer(A)||A instanceof i}var f=destroy_1,p=state,h=p.getHighWaterMark,E=errorsBrowser.codes,w=E.ERR_INVALID_ARG_TYPE,l=E.ERR_METHOD_NOT_IMPLEMENTED,c=E.ERR_MULTIPLE_CALLBACK,y=E.ERR_STREAM_CANNOT_PIPE,b=E.ERR_STREAM_DESTROYED,d=E.ERR_STREAM_NULL_VALUES,_=E.ERR_STREAM_WRITE_AFTER_END,T=E.ERR_UNKNOWN_ENCODING,I=f.errorOrDestroy;inherits_browserExports(M,n);function D(){}function L(A,O,N){e=e||require_stream_duplex(),A=A||{},typeof N!="boolean"&&(N=O instanceof e),this.objectMode=!!A.objectMode,N&&(this.objectMode=this.objectMode||!!A.writableObjectMode),this.highWaterMark=h(this,A,"writableHighWaterMark",N),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var G=A.decodeStrings===!1;this.decodeStrings=!G,this.defaultEncoding=A.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Y){oe(O,Y)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=A.emitClose!==!1,this.autoDestroy=!!A.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}L.prototype.getBuffer=function(){for(var O=this.bufferedRequest,N=[];O;)N.push(O),O=O.next;return N},function(){try{Object.defineProperty(L.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var H;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(H=Function.prototype[Symbol.hasInstance],Object.defineProperty(M,Symbol.hasInstance,{value:function(O){return H.call(this,O)?!0:this!==M?!1:O&&O._writableState instanceof L}})):H=function(O){return O instanceof this};function M(A){e=e||require_stream_duplex();var O=this instanceof e;if(!O&&!H.call(M,this))return new M(A);this._writableState=new L(A,this,O),this.writable=!0,A&&(typeof A.write=="function"&&(this._write=A.write),typeof A.writev=="function"&&(this._writev=A.writev),typeof A.destroy=="function"&&(this._destroy=A.destroy),typeof A.final=="function"&&(this._final=A.final)),n.call(this)}M.prototype.pipe=function(){I(this,new y)};function j(A,O){var N=new _;I(A,N),process.nextTick(O,N)}function K(A,O,N,G){var Y;return N===null?Y=new d:typeof N!="string"&&!O.objectMode&&(Y=new w("chunk",["string","Buffer"],N)),Y?(I(A,Y),process.nextTick(G,Y),!1):!0}M.prototype.write=function(A,O,N){var G=this._writableState,Y=!1,v=!G.objectMode&&o(A);return v&&!r.isBuffer(A)&&(A=s(A)),typeof O=="function"&&(N=O,O=null),v?O="buffer":O||(O=G.defaultEncoding),typeof N!="function"&&(N=D),G.ending?j(this,N):(v||K(this,G,A,N))&&(G.pendingcb++,Y=V(this,G,v,A,O,N)),Y},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){var A=this._writableState;A.corked&&(A.corked--,!A.writing&&!A.corked&&!A.bufferProcessing&&A.bufferedRequest&&ne(this,A))},M.prototype.setDefaultEncoding=function(O){if(typeof O=="string"&&(O=O.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((O+"").toLowerCase())>-1))throw new T(O);return this._writableState.defaultEncoding=O,this},Object.defineProperty(M.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Q(A,O,N){return!A.objectMode&&A.decodeStrings!==!1&&typeof O=="string"&&(O=r.from(O,N)),O}Object.defineProperty(M.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function V(A,O,N,G,Y,v){if(!N){var g=Q(O,G,Y);G!==g&&(N=!0,Y="buffer",G=g)}var z=O.objectMode?1:G.length;O.length+=z;var k=O.length<O.highWaterMark;if(k||(O.needDrain=!0),O.writing||O.corked){var de=O.lastBufferedRequest;O.lastBufferedRequest={chunk:G,encoding:Y,isBuf:N,callback:v,next:null},de?de.next=O.lastBufferedRequest:O.bufferedRequest=O.lastBufferedRequest,O.bufferedRequestCount+=1}else B(A,O,!1,z,G,Y,v);return k}function B(A,O,N,G,Y,v,g){O.writelen=G,O.writecb=g,O.writing=!0,O.sync=!0,O.destroyed?O.onwrite(new b("write")):N?A._writev(Y,O.onwrite):A._write(Y,v,O.onwrite),O.sync=!1}function q(A,O,N,G,Y){--O.pendingcb,N?(process.nextTick(Y,G),process.nextTick(we,A,O),A._writableState.errorEmitted=!0,I(A,G)):(Y(G),A._writableState.errorEmitted=!0,I(A,G),we(A,O))}function J(A){A.writing=!1,A.writecb=null,A.length-=A.writelen,A.writelen=0}function oe(A,O){var N=A._writableState,G=N.sync,Y=N.writecb;if(typeof Y!="function")throw new c;if(J(N),O)q(A,N,G,O,Y);else{var v=X(N)||A.destroyed;!v&&!N.corked&&!N.bufferProcessing&&N.bufferedRequest&&ne(A,N),G?process.nextTick(ae,A,N,v,Y):ae(A,N,v,Y)}}function ae(A,O,N,G){N||se(A,O),O.pendingcb--,G(),we(A,O)}function se(A,O){O.length===0&&O.needDrain&&(O.needDrain=!1,A.emit("drain"))}function ne(A,O){O.bufferProcessing=!0;var N=O.bufferedRequest;if(A._writev&&N&&N.next){var G=O.bufferedRequestCount,Y=new Array(G),v=O.corkedRequestsFree;v.entry=N;for(var g=0,z=!0;N;)Y[g]=N,N.isBuf||(z=!1),N=N.next,g+=1;Y.allBuffers=z,B(A,O,!0,O.length,Y,"",v.finish),O.pendingcb++,O.lastBufferedRequest=null,v.next?(O.corkedRequestsFree=v.next,v.next=null):O.corkedRequestsFree=new t(O),O.bufferedRequestCount=0}else{for(;N;){var k=N.chunk,de=N.encoding,ee=N.callback,ue=O.objectMode?1:k.length;if(B(A,O,!1,ue,k,de,ee),N=N.next,O.bufferedRequestCount--,O.writing)break}N===null&&(O.lastBufferedRequest=null)}O.bufferedRequest=N,O.bufferProcessing=!1}M.prototype._write=function(A,O,N){N(new l("_write()"))},M.prototype._writev=null,M.prototype.end=function(A,O,N){var G=this._writableState;return typeof A=="function"?(N=A,A=null,O=null):typeof O=="function"&&(N=O,O=null),A!=null&&this.write(A,O),G.corked&&(G.corked=1,this.uncork()),G.ending||he(this,G,N),this},Object.defineProperty(M.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function X(A){return A.ending&&A.length===0&&A.bufferedRequest===null&&!A.finished&&!A.writing}function Ee(A,O){A._final(function(N){O.pendingcb--,N&&I(A,N),O.prefinished=!0,A.emit("prefinish"),we(A,O)})}function Pe(A,O){!O.prefinished&&!O.finalCalled&&(typeof A._final=="function"&&!O.destroyed?(O.pendingcb++,O.finalCalled=!0,process.nextTick(Ee,A,O)):(O.prefinished=!0,A.emit("prefinish")))}function we(A,O){var N=X(O);if(N&&(Pe(A,O),O.pendingcb===0&&(O.finished=!0,A.emit("finish"),O.autoDestroy))){var G=A._readableState;(!G||G.autoDestroy&&G.endEmitted)&&A.destroy()}return N}function he(A,O,N){O.ending=!0,we(A,O),N&&(O.finished?process.nextTick(N):A.once("finish",N)),O.ended=!0,A.writable=!1}function xe(A,O,N){var G=A.entry;for(A.entry=null;G;){var Y=G.callback;O.pendingcb--,Y(N),G=G.next}O.corkedRequestsFree.next=A}return Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(O){this._writableState&&(this._writableState.destroyed=O)}}),M.prototype.destroy=f.destroy,M.prototype._undestroy=f.undestroy,M.prototype._destroy=function(A,O){O(A)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var t=Object.keys||function(p){var h=[];for(var E in p)h.push(E);return h};_stream_duplex=s;var e=require_stream_readable(),a=require_stream_writable();inherits_browserExports(s,e);for(var n=t(a.prototype),r=0;r<n.length;r++){var i=n[r];s.prototype[i]||(s.prototype[i]=a.prototype[i])}function s(p){if(!(this instanceof s))return new s(p);e.call(this,p),a.call(this,p),this.allowHalfOpen=!0,p&&(p.readable===!1&&(this.readable=!1),p.writable===!1&&(this.writable=!1),p.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",o)))}Object.defineProperty(s.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(s.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(s.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function o(){this._writableState.ended||process.nextTick(f,this)}function f(p){p.end()}return Object.defineProperty(s.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(h){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=h,this._writableState.destroyed=h)}}),_stream_duplex}var string_decoder={},safeBufferExports={},safeBuffer={get exports(){return safeBufferExports},set exports(t){safeBufferExports=t}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,function(t,e){var a=require$$0,n=a.Buffer;function r(s,o){for(var f in s)o[f]=s[f]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=a:(r(a,e),e.Buffer=i);function i(s,o,f){return n(s,o,f)}i.prototype=Object.create(n.prototype),r(n,i),i.from=function(s,o,f){if(typeof s=="number")throw new TypeError("Argument must not be a number");return n(s,o,f)},i.alloc=function(s,o,f){if(typeof s!="number")throw new TypeError("Argument must be a number");var p=n(s);return o!==void 0?typeof f=="string"?p.fill(o,f):p.fill(o):p.fill(0),p},i.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return n(s)},i.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return a.SlowBuffer(s)}}(safeBuffer,safeBufferExports)),safeBufferExports}var hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var t=requireSafeBuffer().Buffer,e=t.isEncoding||function(d){switch(d=""+d,d&&d.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(d){if(!d)return"utf8";for(var _;;)switch(d){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return d;default:if(_)return;d=(""+d).toLowerCase(),_=!0}}function n(d){var _=a(d);if(typeof _!="string"&&(t.isEncoding===e||!e(d)))throw new Error("Unknown encoding: "+d);return _||d}string_decoder.StringDecoder=r;function r(d){this.encoding=n(d);var _;switch(this.encoding){case"utf16le":this.text=E,this.end=w,_=4;break;case"utf8":this.fillLast=f,_=4;break;case"base64":this.text=l,this.end=c,_=3;break;default:this.write=y,this.end=b;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(_)}r.prototype.write=function(d){if(d.length===0)return"";var _,T;if(this.lastNeed){if(_=this.fillLast(d),_===void 0)return"";T=this.lastNeed,this.lastNeed=0}else T=0;return T<d.length?_?_+this.text(d,T):this.text(d,T):_||""},r.prototype.end=h,r.prototype.text=p,r.prototype.fillLast=function(d){if(this.lastNeed<=d.length)return d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,d.length),this.lastNeed-=d.length};function i(d){return d<=127?0:d>>5===6?2:d>>4===14?3:d>>3===30?4:d>>6===2?-1:-2}function s(d,_,T){var I=_.length-1;if(I<T)return 0;var D=i(_[I]);return D>=0?(D>0&&(d.lastNeed=D-1),D):--I<T||D===-2?0:(D=i(_[I]),D>=0?(D>0&&(d.lastNeed=D-2),D):--I<T||D===-2?0:(D=i(_[I]),D>=0?(D>0&&(D===2?D=0:d.lastNeed=D-3),D):0))}function o(d,_,T){if((_[0]&192)!==128)return d.lastNeed=0,"";if(d.lastNeed>1&&_.length>1){if((_[1]&192)!==128)return d.lastNeed=1,"";if(d.lastNeed>2&&_.length>2&&(_[2]&192)!==128)return d.lastNeed=2,""}}function f(d){var _=this.lastTotal-this.lastNeed,T=o(this,d);if(T!==void 0)return T;if(this.lastNeed<=d.length)return d.copy(this.lastChar,_,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);d.copy(this.lastChar,_,0,d.length),this.lastNeed-=d.length}function p(d,_){var T=s(this,d,_);if(!this.lastNeed)return d.toString("utf8",_);this.lastTotal=T;var I=d.length-(T-this.lastNeed);return d.copy(this.lastChar,0,I),d.toString("utf8",_,I)}function h(d){var _=d&&d.length?this.write(d):"";return this.lastNeed?_+"":_}function E(d,_){if((d.length-_)%2===0){var T=d.toString("utf16le",_);if(T){var I=T.charCodeAt(T.length-1);if(I>=55296&&I<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1],T.slice(0,-1)}return T}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=d[d.length-1],d.toString("utf16le",_,d.length-1)}function w(d){var _=d&&d.length?this.write(d):"";if(this.lastNeed){var T=this.lastTotal-this.lastNeed;return _+this.lastChar.toString("utf16le",0,T)}return _}function l(d,_){var T=(d.length-_)%3;return T===0?d.toString("base64",_):(this.lastNeed=3-T,this.lastTotal=3,T===1?this.lastChar[0]=d[d.length-1]:(this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1]),d.toString("base64",_,d.length-T))}function c(d){var _=d&&d.length?this.write(d):"";return this.lastNeed?_+this.lastChar.toString("base64",0,3-this.lastNeed):_}function y(d){return d.toString(this.encoding)}function b(d){return d&&d.length?this.write(d):""}return string_decoder}var ERR_STREAM_PREMATURE_CLOSE=errorsBrowser.codes.ERR_STREAM_PREMATURE_CLOSE;function once$1(t){var e=!1;return function(){if(!e){e=!0;for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];t.apply(this,n)}}}function noop$1(){}function isRequest$1(t){return t.setHeader&&typeof t.abort=="function"}function eos$1(t,e,a){if(typeof e=="function")return eos$1(t,null,e);e||(e={}),a=once$1(a||noop$1);var n=e.readable||e.readable!==!1&&t.readable,r=e.writable||e.writable!==!1&&t.writable,i=function(){t.writable||o()},s=t._writableState&&t._writableState.finished,o=function(){r=!1,s=!0,n||a.call(t)},f=t._readableState&&t._readableState.endEmitted,p=function(){n=!1,f=!0,r||a.call(t)},h=function(c){a.call(t,c)},E=function(){var c;if(n&&!f)return(!t._readableState||!t._readableState.ended)&&(c=new ERR_STREAM_PREMATURE_CLOSE),a.call(t,c);if(r&&!s)return(!t._writableState||!t._writableState.ended)&&(c=new ERR_STREAM_PREMATURE_CLOSE),a.call(t,c)},w=function(){t.req.on("finish",o)};return isRequest$1(t)?(t.on("complete",o),t.on("abort",E),t.req?w():t.on("request",w)):r&&!t._writableState&&(t.on("end",i),t.on("close",i)),t.on("end",p),t.on("finish",o),e.error!==!1&&t.on("error",h),t.on("close",E),function(){t.removeListener("complete",o),t.removeListener("abort",E),t.removeListener("request",w),t.req&&t.req.removeListener("finish",o),t.removeListener("end",i),t.removeListener("close",i),t.removeListener("finish",o),t.removeListener("end",p),t.removeListener("error",h),t.removeListener("close",E)}}var endOfStream=eos$1,async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var t;function e(d,_,T){return _ in d?Object.defineProperty(d,_,{value:T,enumerable:!0,configurable:!0,writable:!0}):d[_]=T,d}var a=endOfStream,n=Symbol("lastResolve"),r=Symbol("lastReject"),i=Symbol("error"),s=Symbol("ended"),o=Symbol("lastPromise"),f=Symbol("handlePromise"),p=Symbol("stream");function h(d,_){return{value:d,done:_}}function E(d){var _=d[n];if(_!==null){var T=d[p].read();T!==null&&(d[o]=null,d[n]=null,d[r]=null,_(h(T,!1)))}}function w(d){process.nextTick(E,d)}function l(d,_){return function(T,I){d.then(function(){if(_[s]){T(h(void 0,!0));return}_[f](T,I)},I)}}var c=Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((t={get stream(){return this[p]},next:function(){var _=this,T=this[i];if(T!==null)return Promise.reject(T);if(this[s])return Promise.resolve(h(void 0,!0));if(this[p].destroyed)return new Promise(function(H,M){process.nextTick(function(){_[i]?M(_[i]):H(h(void 0,!0))})});var I=this[o],D;if(I)D=new Promise(l(I,this));else{var L=this[p].read();if(L!==null)return Promise.resolve(h(L,!1));D=new Promise(this[f])}return this[o]=D,D}},e(t,Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var _=this;return new Promise(function(T,I){_[p].destroy(null,function(D){if(D){I(D);return}T(h(void 0,!0))})})}),t),c),b=function(_){var T,I=Object.create(y,(T={},e(T,p,{value:_,writable:!0}),e(T,n,{value:null,writable:!0}),e(T,r,{value:null,writable:!0}),e(T,i,{value:null,writable:!0}),e(T,s,{value:_._readableState.endEmitted,writable:!0}),e(T,f,{value:function(L,H){var M=I[p].read();M?(I[o]=null,I[n]=null,I[r]=null,L(h(M,!1))):(I[n]=L,I[r]=H)},writable:!0}),T));return I[o]=null,a(_,function(D){if(D&&D.code!=="ERR_STREAM_PREMATURE_CLOSE"){var L=I[r];L!==null&&(I[o]=null,I[n]=null,I[r]=null,L(D)),I[i]=D;return}var H=I[n];H!==null&&(I[o]=null,I[n]=null,I[r]=null,H(h(void 0,!0))),I[s]=!0}),_.on("readable",w.bind(null,I)),I};return async_iterator=b,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1,_stream_readable=j;var t;j.ReadableState=M,require$$0.EventEmitter;var e=function(g,z){return g.listeners(z).length},a=streamBrowser,n=require$$0.Buffer,r={}.Uint8Array||function(){};function i(v){return n.from(v)}function s(v){return n.isBuffer(v)||v instanceof r}var o=require$$0,f;o&&o.debuglog?f=o.debuglog("stream"):f=function(){};var p=requireBuffer_list(),h=destroy_1,E=state,w=E.getHighWaterMark,l=errorsBrowser.codes,c=l.ERR_INVALID_ARG_TYPE,y=l.ERR_STREAM_PUSH_AFTER_EOF,b=l.ERR_METHOD_NOT_IMPLEMENTED,d=l.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,_,T,I;inherits_browserExports(j,a);var D=h.errorOrDestroy,L=["error","close","destroy","pause","resume"];function H(v,g,z){if(typeof v.prependListener=="function")return v.prependListener(g,z);!v._events||!v._events[g]?v.on(g,z):Array.isArray(v._events[g])?v._events[g].unshift(z):v._events[g]=[z,v._events[g]]}function M(v,g,z){t=t||require_stream_duplex(),v=v||{},typeof z!="boolean"&&(z=g instanceof t),this.objectMode=!!v.objectMode,z&&(this.objectMode=this.objectMode||!!v.readableObjectMode),this.highWaterMark=w(this,v,"readableHighWaterMark",z),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=v.emitClose!==!1,this.autoDestroy=!!v.autoDestroy,this.destroyed=!1,this.defaultEncoding=v.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,v.encoding&&(_||(_=requireString_decoder().StringDecoder),this.decoder=new _(v.encoding),this.encoding=v.encoding)}function j(v){if(t=t||require_stream_duplex(),!(this instanceof j))return new j(v);var g=this instanceof t;this._readableState=new M(v,this,g),this.readable=!0,v&&(typeof v.read=="function"&&(this._read=v.read),typeof v.destroy=="function"&&(this._destroy=v.destroy)),a.call(this)}Object.defineProperty(j.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(g){this._readableState&&(this._readableState.destroyed=g)}}),j.prototype.destroy=h.destroy,j.prototype._undestroy=h.undestroy,j.prototype._destroy=function(v,g){g(v)},j.prototype.push=function(v,g){var z=this._readableState,k;return z.objectMode?k=!0:typeof v=="string"&&(g=g||z.defaultEncoding,g!==z.encoding&&(v=n.from(v,g),g=""),k=!0),K(this,v,g,!1,k)},j.prototype.unshift=function(v){return K(this,v,null,!0,!1)};function K(v,g,z,k,de){f("readableAddChunk",g);var ee=v._readableState;if(g===null)ee.reading=!1,oe(v,ee);else{var ue;if(de||(ue=V(ee,g)),ue)D(v,ue);else if(ee.objectMode||g&&g.length>0)if(typeof g!="string"&&!ee.objectMode&&Object.getPrototypeOf(g)!==n.prototype&&(g=i(g)),k)ee.endEmitted?D(v,new d):Q(v,ee,g,!0);else if(ee.ended)D(v,new y);else{if(ee.destroyed)return!1;ee.reading=!1,ee.decoder&&!z?(g=ee.decoder.write(g),ee.objectMode||g.length!==0?Q(v,ee,g,!1):ne(v,ee)):Q(v,ee,g,!1)}else k||(ee.reading=!1,ne(v,ee))}return!ee.ended&&(ee.length<ee.highWaterMark||ee.length===0)}function Q(v,g,z,k){g.flowing&&g.length===0&&!g.sync?(g.awaitDrain=0,v.emit("data",z)):(g.length+=g.objectMode?1:z.length,k?g.buffer.unshift(z):g.buffer.push(z),g.needReadable&&ae(v)),ne(v,g)}function V(v,g){var z;return!s(g)&&typeof g!="string"&&g!==void 0&&!v.objectMode&&(z=new c("chunk",["string","Buffer","Uint8Array"],g)),z}j.prototype.isPaused=function(){return this._readableState.flowing===!1},j.prototype.setEncoding=function(v){_||(_=requireString_decoder().StringDecoder);var g=new _(v);this._readableState.decoder=g,this._readableState.encoding=this._readableState.decoder.encoding;for(var z=this._readableState.buffer.head,k="";z!==null;)k+=g.write(z.data),z=z.next;return this._readableState.buffer.clear(),k!==""&&this._readableState.buffer.push(k),this._readableState.length=k.length,this};var B=1073741824;function q(v){return v>=B?v=B:(v--,v|=v>>>1,v|=v>>>2,v|=v>>>4,v|=v>>>8,v|=v>>>16,v++),v}function J(v,g){return v<=0||g.length===0&&g.ended?0:g.objectMode?1:v!==v?g.flowing&&g.length?g.buffer.head.data.length:g.length:(v>g.highWaterMark&&(g.highWaterMark=q(v)),v<=g.length?v:g.ended?g.length:(g.needReadable=!0,0))}j.prototype.read=function(v){f("read",v),v=parseInt(v,10);var g=this._readableState,z=v;if(v!==0&&(g.emittedReadable=!1),v===0&&g.needReadable&&((g.highWaterMark!==0?g.length>=g.highWaterMark:g.length>0)||g.ended))return f("read: emitReadable",g.length,g.ended),g.length===0&&g.ended?N(this):ae(this),null;if(v=J(v,g),v===0&&g.ended)return g.length===0&&N(this),null;var k=g.needReadable;f("need readable",k),(g.length===0||g.length-v<g.highWaterMark)&&(k=!0,f("length less than watermark",k)),g.ended||g.reading?(k=!1,f("reading or ended",k)):k&&(f("do read"),g.reading=!0,g.sync=!0,g.length===0&&(g.needReadable=!0),this._read(g.highWaterMark),g.sync=!1,g.reading||(v=J(z,g)));var de;return v>0?de=O(v,g):de=null,de===null?(g.needReadable=g.length<=g.highWaterMark,v=0):(g.length-=v,g.awaitDrain=0),g.length===0&&(g.ended||(g.needReadable=!0),z!==v&&g.ended&&N(this)),de!==null&&this.emit("data",de),de};function oe(v,g){if(f("onEofChunk"),!g.ended){if(g.decoder){var z=g.decoder.end();z&&z.length&&(g.buffer.push(z),g.length+=g.objectMode?1:z.length)}g.ended=!0,g.sync?ae(v):(g.needReadable=!1,g.emittedReadable||(g.emittedReadable=!0,se(v)))}}function ae(v){var g=v._readableState;f("emitReadable",g.needReadable,g.emittedReadable),g.needReadable=!1,g.emittedReadable||(f("emitReadable",g.flowing),g.emittedReadable=!0,process.nextTick(se,v))}function se(v){var g=v._readableState;f("emitReadable_",g.destroyed,g.length,g.ended),!g.destroyed&&(g.length||g.ended)&&(v.emit("readable"),g.emittedReadable=!1),g.needReadable=!g.flowing&&!g.ended&&g.length<=g.highWaterMark,A(v)}function ne(v,g){g.readingMore||(g.readingMore=!0,process.nextTick(X,v,g))}function X(v,g){for(;!g.reading&&!g.ended&&(g.length<g.highWaterMark||g.flowing&&g.length===0);){var z=g.length;if(f("maybeReadMore read 0"),v.read(0),z===g.length)break}g.readingMore=!1}j.prototype._read=function(v){D(this,new b("_read()"))},j.prototype.pipe=function(v,g){var z=this,k=this._readableState;switch(k.pipesCount){case 0:k.pipes=v;break;case 1:k.pipes=[k.pipes,v];break;default:k.pipes.push(v);break}k.pipesCount+=1,f("pipe count=%d opts=%j",k.pipesCount,g);var de=(!g||g.end!==!1)&&v!==process.stdout&&v!==process.stderr,ee=de?Fe:Ge;k.endEmitted?process.nextTick(ee):z.once("end",ee),v.on("unpipe",ue);function ue(qe,Xe){f("onunpipe"),qe===z&&Xe&&Xe.hasUnpiped===!1&&(Xe.hasUnpiped=!0,rr())}function Fe(){f("onend"),v.end()}var Se=Ee(z);v.on("drain",Se);var je=!1;function rr(){f("cleanup"),v.removeListener("close",Oe),v.removeListener("finish",Me),v.removeListener("drain",Se),v.removeListener("error",$e),v.removeListener("unpipe",ue),z.removeListener("end",Fe),z.removeListener("end",Ge),z.removeListener("data",Te),je=!0,k.awaitDrain&&(!v._writableState||v._writableState.needDrain)&&Se()}z.on("data",Te);function Te(qe){f("ondata");var Xe=v.write(qe);f("dest.write",Xe),Xe===!1&&((k.pipesCount===1&&k.pipes===v||k.pipesCount>1&&Y(k.pipes,v)!==-1)&&!je&&(f("false write response, pause",k.awaitDrain),k.awaitDrain++),z.pause())}function $e(qe){f("onerror",qe),Ge(),v.removeListener("error",$e),e(v,"error")===0&&D(v,qe)}H(v,"error",$e);function Oe(){v.removeListener("finish",Me),Ge()}v.once("close",Oe);function Me(){f("onfinish"),v.removeListener("close",Oe),Ge()}v.once("finish",Me);function Ge(){f("unpipe"),z.unpipe(v)}return v.emit("pipe",z),k.flowing||(f("pipe resume"),z.resume()),v};function Ee(v){return function(){var z=v._readableState;f("pipeOnDrain",z.awaitDrain),z.awaitDrain&&z.awaitDrain--,z.awaitDrain===0&&e(v,"data")&&(z.flowing=!0,A(v))}}j.prototype.unpipe=function(v){var g=this._readableState,z={hasUnpiped:!1};if(g.pipesCount===0)return this;if(g.pipesCount===1)return v&&v!==g.pipes?this:(v||(v=g.pipes),g.pipes=null,g.pipesCount=0,g.flowing=!1,v&&v.emit("unpipe",this,z),this);if(!v){var k=g.pipes,de=g.pipesCount;g.pipes=null,g.pipesCount=0,g.flowing=!1;for(var ee=0;ee<de;ee++)k[ee].emit("unpipe",this,{hasUnpiped:!1});return this}var ue=Y(g.pipes,v);return ue===-1?this:(g.pipes.splice(ue,1),g.pipesCount-=1,g.pipesCount===1&&(g.pipes=g.pipes[0]),v.emit("unpipe",this,z),this)},j.prototype.on=function(v,g){var z=a.prototype.on.call(this,v,g),k=this._readableState;return v==="data"?(k.readableListening=this.listenerCount("readable")>0,k.flowing!==!1&&this.resume()):v==="readable"&&!k.endEmitted&&!k.readableListening&&(k.readableListening=k.needReadable=!0,k.flowing=!1,k.emittedReadable=!1,f("on readable",k.length,k.reading),k.length?ae(this):k.reading||process.nextTick(we,this)),z},j.prototype.addListener=j.prototype.on,j.prototype.removeListener=function(v,g){var z=a.prototype.removeListener.call(this,v,g);return v==="readable"&&process.nextTick(Pe,this),z},j.prototype.removeAllListeners=function(v){var g=a.prototype.removeAllListeners.apply(this,arguments);return(v==="readable"||v===void 0)&&process.nextTick(Pe,this),g};function Pe(v){var g=v._readableState;g.readableListening=v.listenerCount("readable")>0,g.resumeScheduled&&!g.paused?g.flowing=!0:v.listenerCount("data")>0&&v.resume()}function we(v){f("readable nexttick read 0"),v.read(0)}j.prototype.resume=function(){var v=this._readableState;return v.flowing||(f("resume"),v.flowing=!v.readableListening,he(this,v)),v.paused=!1,this};function he(v,g){g.resumeScheduled||(g.resumeScheduled=!0,process.nextTick(xe,v,g))}function xe(v,g){f("resume",g.reading),g.reading||v.read(0),g.resumeScheduled=!1,v.emit("resume"),A(v),g.flowing&&!g.reading&&v.read(0)}j.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function A(v){var g=v._readableState;for(f("flow",g.flowing);g.flowing&&v.read()!==null;);}j.prototype.wrap=function(v){var g=this,z=this._readableState,k=!1;v.on("end",function(){if(f("wrapped end"),z.decoder&&!z.ended){var ue=z.decoder.end();ue&&ue.length&&g.push(ue)}g.push(null)}),v.on("data",function(ue){if(f("wrapped data"),z.decoder&&(ue=z.decoder.write(ue)),!(z.objectMode&&ue==null)&&!(!z.objectMode&&(!ue||!ue.length))){var Fe=g.push(ue);Fe||(k=!0,v.pause())}});for(var de in v)this[de]===void 0&&typeof v[de]=="function"&&(this[de]=function(Fe){return function(){return v[Fe].apply(v,arguments)}}(de));for(var ee=0;ee<L.length;ee++)v.on(L[ee],this.emit.bind(this,L[ee]));return this._read=function(ue){f("wrapped _read",ue),k&&(k=!1,v.resume())},this},typeof Symbol=="function"&&(j.prototype[Symbol.asyncIterator]=function(){return T===void 0&&(T=requireAsync_iterator()),T(this)}),Object.defineProperty(j.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(j.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(j.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(g){this._readableState&&(this._readableState.flowing=g)}}),j._fromList=O,Object.defineProperty(j.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function O(v,g){if(g.length===0)return null;var z;return g.objectMode?z=g.buffer.shift():!v||v>=g.length?(g.decoder?z=g.buffer.join(""):g.buffer.length===1?z=g.buffer.first():z=g.buffer.concat(g.length),g.buffer.clear()):z=g.buffer.consume(v,g.decoder),z}function N(v){var g=v._readableState;f("endReadable",g.endEmitted),g.endEmitted||(g.ended=!0,process.nextTick(G,g,v))}function G(v,g){if(f("endReadableNT",v.endEmitted,v.length),!v.endEmitted&&v.length===0&&(v.endEmitted=!0,g.readable=!1,g.emit("end"),v.autoDestroy)){var z=g._writableState;(!z||z.autoDestroy&&z.finished)&&g.destroy()}}typeof Symbol=="function"&&(j.from=function(v,g){return I===void 0&&(I=requireFromBrowser()),I(j,v,g)});function Y(v,g){for(var z=0,k=v.length;z<k;z++)if(v[z]===g)return z;return-1}return _stream_readable}var _stream_transform=Transform$2,_require$codes$1=errorsBrowser.codes,ERR_METHOD_NOT_IMPLEMENTED=_require$codes$1.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes$1.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING=_require$codes$1.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0=_require$codes$1.ERR_TRANSFORM_WITH_LENGTH_0,Duplex=require_stream_duplex();inherits_browserExports(Transform$2,Duplex);function afterTransform(t,e){var a=this._transformState;a.transforming=!1;var n=a.writecb;if(n===null)return this.emit("error",new ERR_MULTIPLE_CALLBACK);a.writechunk=null,a.writecb=null,e!=null&&this.push(e),n(t);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function Transform$2(t){if(!(this instanceof Transform$2))return new Transform$2(t);Duplex.call(this,t),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",prefinish)}function prefinish(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,a){done(t,e,a)}):done(this,null,null)}Transform$2.prototype.push=function(t,e){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,t,e)};Transform$2.prototype._transform=function(t,e,a){a(new ERR_METHOD_NOT_IMPLEMENTED("_transform()"))};Transform$2.prototype._write=function(t,e,a){var n=this._transformState;if(n.writecb=a,n.writechunk=t,n.writeencoding=e,!n.transforming){var r=this._readableState;(n.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}};Transform$2.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Transform$2.prototype._destroy=function(t,e){Duplex.prototype._destroy.call(this,t,function(a){e(a)})};function done(t,e,a){if(e)return t.emit("error",e);if(a!=null&&t.push(a),t._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0;if(t._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING;return t.push(null)}var _stream_passthrough=PassThrough,Transform$1=_stream_transform;inherits_browserExports(PassThrough,Transform$1);function PassThrough(t){if(!(this instanceof PassThrough))return new PassThrough(t);Transform$1.call(this,t)}PassThrough.prototype._transform=function(t,e,a){a(null,t)};var eos;function once(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var _require$codes=errorsBrowser.codes,ERR_MISSING_ARGS=_require$codes.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED;function noop(t){if(t)throw t}function isRequest(t){return t.setHeader&&typeof t.abort=="function"}function destroyer(t,e,a,n){n=once(n);var r=!1;t.on("close",function(){r=!0}),eos===void 0&&(eos=endOfStream),eos(t,{readable:e,writable:a},function(s){if(s)return n(s);r=!0,n()});var i=!1;return function(s){if(!r&&!i){if(i=!0,isRequest(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(s||new ERR_STREAM_DESTROYED("pipe"))}}}function call(t){t()}function pipe(t,e){return t.pipe(e)}function popCallback(t){return!t.length||typeof t[t.length-1]!="function"?noop:t.pop()}function pipeline(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];var n=popCallback(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new ERR_MISSING_ARGS("streams");var r,i=e.map(function(s,o){var f=o<e.length-1,p=o>0;return destroyer(s,f,p,function(h){r||(r=h),h&&i.forEach(call),!f&&(i.forEach(call),n(r))})});return e.reduce(pipe)}var pipeline_1=pipeline;(function(t,e){e=t.exports=require_stream_readable(),e.Stream=e,e.Readable=e,e.Writable=require_stream_writable(),e.Duplex=require_stream_duplex(),e.Transform=_stream_transform,e.PassThrough=_stream_passthrough,e.finished=endOfStream,e.pipeline=pipeline_1})(readableBrowser,readableBrowserExports);const Transform=readableBrowserExports.Transform;class Serializer extends Transform{constructor(e,a){super({writableObjectMode:!0}),this.proto=e,this.mainType=a,this.queue=Buffer.alloc(0)}createPacketBuffer(e){return this.proto.createPacketBuffer(this.mainType,e)}_transform(e,a,n){let r;try{r=this.createPacketBuffer(e)}catch(i){return n(i)}return this.push(r),n()}}class Parser extends Transform{constructor(e,a){super({readableObjectMode:!0}),this.proto=e,this.mainType=a,this.queue=Buffer.alloc(0)}parsePacketBuffer(e){return this.proto.parsePacketBuffer(this.mainType,e)}_transform(e,a,n){for(this.queue=Buffer.concat([this.queue,e]);;){let r;try{r=this.parsePacketBuffer(this.queue)}catch(i){return i.partialReadError?n():(i.buffer=this.queue,this.queue=Buffer.alloc(0),n(i))}this.push(r),this.queue=this.queue.slice(r.metadata.size)}}}class FullPacketParser extends Transform{constructor(e,a,n=!1){super({readableObjectMode:!0}),this.proto=e,this.mainType=a,this.noErrorLogging=n}parsePacketBuffer(e){return this.proto.parsePacketBuffer(this.mainType,e)}_transform(e,a,n){let r;try{r=this.parsePacketBuffer(e),r.metadata.size!==e.length&&!this.noErrorLogging&&console.log("Chunk size is "+e.length+" but only "+r.metadata.size+" was read ; partial packet : "+JSON.stringify(r.data)+"; buffer :"+e.toString("hex"))}catch(i){return i.partialReadError?(this.noErrorLogging||console.log(i.stack),n()):n(i)}this.push(r),n()}}var serializer={Serializer,Parser,FullPacketParser},compilerConditional={Read:{switch:["parametrizable",(t,e)=>{let a=e.compareTo?e.compareTo:e.compareToValue;const n=[];a.startsWith("$")?n.push(a):e.compareTo&&(a=t.getField(a));let r=`switch (${a}) {
`;for(const i in e.fields){let s=i;s.startsWith("/")?s="ctx."+s.slice(1):isNaN(s)&&s!=="true"&&s!=="false"&&(s=`"${s}"`),r+=t.indent(`case ${s}: return `+t.callType(e.fields[i]))+`
`}return r+=t.indent("default: return "+t.callType(e.default?e.default:"void"))+`
`,r+="}",t.wrapCode(r,n)}],option:["parametrizable",(t,e)=>{let a=`const {value} = ctx.bool(buffer, offset)
`;return a+=`if (value) {
`,a+="  const { value, size } = "+t.callType(e,"offset + 1")+`
`,a+=`  return { value, size: size + 1 }
`,a+=`}
`,a+="return { value: undefined, size: 1}",t.wrapCode(a)}]},Write:{switch:["parametrizable",(t,e)=>{let a=e.compareTo?e.compareTo:e.compareToValue;const n=[];a.startsWith("$")?n.push(a):e.compareTo&&(a=t.getField(a));let r=`switch (${a}) {
`;for(const i in e.fields){let s=i;s.startsWith("/")?s="ctx."+s.slice(1):isNaN(s)&&s!=="true"&&s!=="false"&&(s=`"${s}"`),r+=t.indent(`case ${s}: return `+t.callType("value",e.fields[i]))+`
`}return r+=t.indent("default: return "+t.callType("value",e.default?e.default:"void"))+`
`,r+="}",t.wrapCode(r,n)}],option:["parametrizable",(t,e)=>{let a=`if (value != null) {
`;return a+=`  offset = ctx.bool(1, buffer, offset)
`,a+="  offset = "+t.callType("value",e)+`
`,a+=`} else {
`,a+=`  offset = ctx.bool(0, buffer, offset)
`,a+=`}
`,a+="return offset",t.wrapCode(a)}]},SizeOf:{switch:["parametrizable",(t,e)=>{let a=e.compareTo?e.compareTo:e.compareToValue;const n=[];a.startsWith("$")?n.push(a):e.compareTo&&(a=t.getField(a));let r=`switch (${a}) {
`;for(const i in e.fields){let s=i;s.startsWith("/")?s="ctx."+s.slice(1):isNaN(s)&&s!=="true"&&s!=="false"&&(s=`"${s}"`),r+=t.indent(`case ${s}: return `+t.callType("value",e.fields[i]))+`
`}return r+=t.indent("default: return "+t.callType("value",e.default?e.default:"void"))+`
`,r+="}",t.wrapCode(r,n)}],option:["parametrizable",(t,e)=>{let a=`if (value != null) {
`;return a+="  return 1 + "+t.callType("value",e)+`
`,a+=`}
`,a+="return 1",t.wrapCode(a)}]}},compilerStructures={Read:{array:["parametrizable",(t,e)=>{let a="";if(e.countType)a+="const { value: count, size: countSize } = "+t.callType(e.countType)+`
`;else if(e.count)a+="const count = "+e.count+`
`,a+=`const countSize = 0
`;else throw new Error("Array must contain either count or countType");return a+=`if (count > 0xffffff) throw new Error("array size is abnormally large, not reading: " + count)
`,a+=`const data = []
`,a+=`let size = countSize
`,a+=`for (let i = 0; i < count; i++) {
`,a+="  const elem = "+t.callType(e.type,"offset + size")+`
`,a+=`  data.push(elem.value)
`,a+=`  size += elem.size
`,a+=`}
`,a+="return { value: data, size }",t.wrapCode(a)}],count:["parametrizable",(t,e)=>{const a="return "+t.callType(e.type);return t.wrapCode(a)}],container:["parametrizable",(t,e)=>{e=containerInlining(e);let a="",n="offset";const r=[];for(const s in e){const{type:o,name:f,anon:p}=e[s];let h,E;if(o instanceof Array&&o[0]==="bitfield"&&p){const w=[];for(const{name:l}of o[1]){const c=t.getField(l);l===c?(r.push(l),w.push(l)):(r.push(`${l}: ${c}`),w.push(`${l}: ${c}`))}h="{"+w.join(", ")+"}",E=`anon${s}Size`}else h=t.getField(f),E=`${h}Size`,f===h?r.push(f):r.push(`${f}: ${h}`);a+=`let { value: ${h}, size: ${E} } = `+t.callType(o,n)+`
`,n+=` + ${E}`}const i=n.split(" + ");return i.shift(),i.length===0&&i.push("0"),a+="return { value: { "+r.join(", ")+" }, size: "+i.join(" + ")+"}",t.wrapCode(a)}]},Write:{array:["parametrizable",(t,e)=>{let a="";if(e.countType)a+="offset = "+t.callType("value.length",e.countType)+`
`;else if(e.count===null)throw new Error("Array must contain either count or countType");return a+=`for (let i = 0; i < value.length; i++) {
`,a+="  offset = "+t.callType("value[i]",e.type)+`
`,a+=`}
`,a+="return offset",t.wrapCode(a)}],count:["parametrizable",(t,e)=>{const a="return "+t.callType("value",e.type);return t.wrapCode(a)}],container:["parametrizable",(t,e)=>{e=containerInlining(e);let a="";for(const n in e){const{type:r,name:i,anon:s}=e[n];let o;if(r instanceof Array&&r[0]==="bitfield"&&s){const f=[];for(const{name:p}of r[1]){const h=t.getField(p);a+=`const ${h} = value.${p}
`,p===h?f.push(p):f.push(`${p}: ${h}`)}o="{"+f.join(", ")+"}"}else o=t.getField(i),a+=`let ${o} = value.${i}
`;a+="offset = "+t.callType(o,r)+`
`}return a+="return offset",t.wrapCode(a)}]},SizeOf:{array:["parametrizable",(t,e)=>{let a="";if(e.countType)a+="let size = "+t.callType("value.length",e.countType)+`
`;else if(e.count)a+=`let size = 0
`;else throw new Error("Array must contain either count or countType");return isNaN(t.callType("value[i]",e.type))?(a+=`for (let i = 0; i < value.length; i++) {
`,a+="  size += "+t.callType("value[i]",e.type)+`
`,a+=`}
`):a+="size += value.length * "+t.callType("value[i]",e.type)+`
`,a+="return size",t.wrapCode(a)}],count:["parametrizable",(t,e)=>{const a="return "+t.callType("value",e.type);return t.wrapCode(a)}],container:["parametrizable",(t,e)=>{e=containerInlining(e);let a=`let size = 0
`;for(const n in e){const{type:r,name:i,anon:s}=e[n];let o;if(r instanceof Array&&r[0]==="bitfield"&&s){const f=[];for(const{name:p}of r[1]){const h=t.getField(p);a+=`const ${h} = value.${p}
`,p===h?f.push(p):f.push(`${p}: ${h}`)}o="{"+f.join(", ")+"}"}else o=t.getField(i),a+=`let ${o} = value.${i}
`;a+="size += "+t.callType(o,r)+`
`}return a+="return size",t.wrapCode(a)}]}};function containerInlining(t){const e=[];for(const a in t){const{type:n,anon:r}=t[a];if(r&&!(n instanceof Array&&n[0]==="bitfield"))if(n instanceof Array&&n[0]==="container")for(const i in n[1])e.push(n[1][i]);else if(n instanceof Array&&n[0]==="switch"){const i=n[1],s=new Set;for(const o in i.fields)if(i.fields[o]instanceof Array&&i.fields[o][0]==="container")for(const f in i.fields[o][1]){const p=i.fields[o][1][f];s.add(p.name)}if(i.default instanceof Array&&i.default[0]==="container")for(const o in i.default[1]){const f=i.default[1][o];s.add(f.name)}for(const o of s.keys()){const f={};let p=i.default;if(p instanceof Array&&p[0]==="container")for(const h in p[1]){const E=p[1][h];if(E.name===o){p=E.type;break}}for(const h in i.fields)if(i.fields[h]instanceof Array&&i.fields[h][0]==="container"){for(const E in i.fields[h][1])if(i.fields[h][1][E].name===o){f[h]=i.fields[h][1][E].type;break}}else f[h]=i.fields[h];p||(p="void"),e.push({name:o,type:["switch",{compareTo:i.compareTo,compareToValue:i.compareToValue,default:p,fields:f}]})}}else throw new Error("Cannot inline anonymous type: "+n);else e.push(t[a])}return e}var compilerUtils={Read:{pstring:["parametrizable",(t,e)=>{let a="";if(e.countType)a+="const { value: count, size: countSize } = "+t.callType(e.countType)+`
`;else if(e.count)a+="const count = "+e.count+`
`,a+=`const countSize = 0
`;else throw new Error("pstring must contain either count or countType");return a+=`offset += countSize
`,a+=`if (offset + count > buffer.length) {
`,a+=`  throw new PartialReadError("Missing characters in string, found size is " + buffer.length + " expected size was " + (offset + count))
`,a+=`}
`,a+=`return { value: buffer.toString("${e.encoding||"utf8"}", offset, offset + count), size: count + countSize }`,t.wrapCode(a)}],buffer:["parametrizable",(t,e)=>{let a="";if(e.countType)a+="const { value: count, size: countSize } = "+t.callType(e.countType)+`
`;else if(e.count)a+="const count = "+e.count+`
`,a+=`const countSize = 0
`;else throw new Error("buffer must contain either count or countType");return a+=`offset += countSize
`,a+=`if (offset + count > buffer.length) {
`,a+=`  throw new PartialReadError()
`,a+=`}
`,a+="return { value: buffer.slice(offset, offset + count), size: count + countSize }",t.wrapCode(a)}],bitfield:["parametrizable",(t,e)=>{let a="";const n=Math.ceil(e.reduce((s,{size:o})=>s+o,0)/8);a+=`if ( offset + ${n} > buffer.length) { throw new PartialReadError() }
`;const r=[];let i=8;a+=`let bits = buffer[offset++]
`;for(const s in e){const{name:o,size:f,signed:p}=e[s],h=t.getField(o);for(;i<f;)i+=8,a+=`bits = (bits << 8) | buffer[offset++]
`;a+=`let ${h} = (bits >> `+(i-f)+") & 0x"+((1<<f)-1).toString(16)+`
`,p&&(a+=`${h} -= (${h} & 0x`+(1<<f-1).toString(16)+`) << 1
`),i-=f,o===h?r.push(o):r.push(`${o}: ${h}`)}return a+="return { value: { "+r.join(", ")+` }, size: ${n} }`,t.wrapCode(a)}],mapper:["parametrizable",(t,e)=>{let a="const { value, size } = "+t.callType(e.type)+`
`;return a+="return { value: "+JSON.stringify(sanitizeMappings(e.mappings))+"[value] || value, size }",t.wrapCode(a)}]},Write:{pstring:["parametrizable",(t,e)=>{let a=`const length = Buffer.byteLength(value, "${e.encoding||"utf8"}")
`;if(e.countType)a+="offset = "+t.callType("length",e.countType)+`
`;else if(e.count===null)throw new Error("pstring must contain either count or countType");return a+=`buffer.write(value, offset, length, "${e.encoding||"utf8"}")
`,a+="return offset + length",t.wrapCode(a)}],buffer:["parametrizable",(t,e)=>{let a=`if (!(value instanceof Buffer)) value = Buffer.from(value)
`;if(e.countType)a+="offset = "+t.callType("value.length",e.countType)+`
`;else if(e.count===null)throw new Error("buffer must contain either count or countType");return a+=`value.copy(buffer, offset)
`,a+="return offset + value.length",t.wrapCode(a)}],bitfield:["parametrizable",(t,e)=>{let a="",n=0,r="";for(const i in e){let{name:s,size:o}=e[i];const f=t.getField(s);for(r+=`let ${f} = value.${s}
`;o>0;){const p=Math.min(8-n,o),h=(1<<p)-1;a!==""&&(a=`((${a}) << ${p}) | `),a+=`((${f} >> `+(o-p)+") & 0x"+h.toString(16)+")",o-=p,n+=p,n===8&&(r+="buffer[offset++] = "+a+`
`,n=0,a="")}}return n!==0&&(r+="buffer[offset++] = ("+a+") << "+(8-n)+`
`),r+="return offset",t.wrapCode(r)}],mapper:["parametrizable",(t,e)=>{const a=JSON.stringify(swapMappings(e.mappings)),n="return "+t.callType(`${a}[value] || value`,e.type);return t.wrapCode(n)}]},SizeOf:{pstring:["parametrizable",(t,e)=>{let a=`let size = Buffer.byteLength(value, "${e.encoding||"utf8"}")
`;if(e.countType)a+="size += "+t.callType("size",e.countType)+`
`;else if(e.count===null)throw new Error("pstring must contain either count or countType");return a+="return size",t.wrapCode(a)}],buffer:["parametrizable",(t,e)=>{let a=`let size = value instanceof Buffer ? value.length : Buffer.from(value).length
`;if(e.countType)a+="size += "+t.callType("size",e.countType)+`
`;else if(e.count===null)throw new Error("buffer must contain either count or countType");return a+="return size",t.wrapCode(a)}],bitfield:["parametrizable",(t,e)=>`${Math.ceil(e.reduce((n,{size:r})=>n+r,0)/8)}`],mapper:["parametrizable",(t,e)=>{const a=JSON.stringify(swapMappings(e.mappings)),n="return "+t.callType(`${a}[value] || value`,e.type);return t.wrapCode(n)}]}};function sanitizeMappings(t){const e={};for(let a in t){let n=t[a];a=hex2dec(a),isNaN(n)||(n=Number(n)),n==="true"&&(n=!0),n==="false"&&(n=!1),e[a]=n}return e}function swapMappings(t){const e={};for(let a in t){const n=t[a];a=hex2dec(a),e[n]=isNaN(a)?a:parseInt(a,10)}return e}function hex2dec(t){return t.match(/^0x[0-9a-f]+$/i)?parseInt(t.substring(2),16):t}const numeric=numeric$1,utils=utils$1,conditionalDatatypes=compilerConditional,structuresDatatypes=compilerStructures,utilsDatatypes=compilerUtils,{tryCatch}=utils$2;let ProtoDefCompiler$1=class{constructor(){this.readCompiler=new ReadCompiler,this.writeCompiler=new WriteCompiler,this.sizeOfCompiler=new SizeOfCompiler}addTypes(e){this.readCompiler.addTypes(e.Read),this.writeCompiler.addTypes(e.Write),this.sizeOfCompiler.addTypes(e.SizeOf)}addTypesToCompile(e){this.readCompiler.addTypesToCompile(e),this.writeCompiler.addTypesToCompile(e),this.sizeOfCompiler.addTypesToCompile(e)}addProtocol(e,a){this.readCompiler.addProtocol(e,a),this.writeCompiler.addProtocol(e,a),this.sizeOfCompiler.addProtocol(e,a)}addVariable(e,a){this.readCompiler.addContextType(e,a),this.writeCompiler.addContextType(e,a),this.sizeOfCompiler.addContextType(e,a)}compileProtoDefSync(e={printCode:!1}){const a=this.sizeOfCompiler.generate(),n=this.writeCompiler.generate(),r=this.readCompiler.generate();e.printCode&&(console.log("// SizeOf:"),console.log(a),console.log("// Write:"),console.log(n),console.log("// Read:"),console.log(r));const i=this.sizeOfCompiler.compile(a),s=this.writeCompiler.compile(n),o=this.readCompiler.compile(r);return new CompiledProtodef(i,s,o)}};class CompiledProtodef{constructor(e,a,n){this.sizeOfCtx=e,this.writeCtx=a,this.readCtx=n}read(e,a,n){const r=this.readCtx[n];if(!r)throw new Error("missing data type: "+n);return r(e,a)}write(e,a,n,r){const i=this.writeCtx[r];if(!i)throw new Error("missing data type: "+r);return i(e,a,n)}setVariable(e,a){this.sizeOfCtx[e]=a,this.readCtx[e]=a,this.writeCtx[e]=a}sizeOf(e,a){const n=this.sizeOfCtx[a];if(!n)throw new Error("missing data type: "+a);return typeof n=="function"?n(e):n}createPacketBuffer(e,a){const n=tryCatch(()=>this.sizeOf(a,e),i=>{throw i.message=`SizeOf error for ${i.field} : ${i.message}`,i}),r=Buffer.allocUnsafe(n);return tryCatch(()=>this.write(a,r,0,e),i=>{throw i.message=`Write error for ${i.field} : ${i.message}`,i}),r}parsePacketBuffer(e,a,n=0){const{value:r,size:i}=tryCatch(()=>this.read(a,n,e),s=>{throw s.message=`Read error for ${s.field} : ${s.message}`,s});return{data:r,metadata:{size:i},buffer:a.slice(0,i),fullBuffer:a}}}class Compiler{constructor(){this.primitiveTypes={},this.native={},this.context={},this.types={},this.scopeStack=[],this.parameterizableTypes={}}addNativeType(t,e){this.primitiveTypes[t]=`native.${t}`,this.native[t]=e,this.types[t]="native"}addContextType(t,e){this.primitiveTypes[t]=`ctx.${t}`,this.context[t]=e.toString()}addParametrizableType(t,e){this.parameterizableTypes[t]=e}addTypes(t){for(const[e,[a,n]]of Object.entries(t))a==="native"?this.addNativeType(e,n):a==="context"?this.addContextType(e,n):a==="parametrizable"&&this.addParametrizableType(e,n)}addTypesToCompile(t){for(const[e,a]of Object.entries(t))(!this.types[e]||this.types[e]==="native")&&(this.types[e]=a)}addProtocol(t,e){const a=this;function n(r,i){r!==void 0&&(r.types&&a.addTypesToCompile(r.types),n(r[i.shift()],i))}n(t,e.slice(0))}indent(t,e="  "){return t.split(`
`).map(a=>e+a).join(`
`)}getField(t){const e=t.split("/");let a=this.scopeStack.length-1;const n=["value","enum","default","size","offset"];for(;e.length;){const r=this.scopeStack[a],i=e.shift();if(i===".."){a--;continue}if(r[i])return r[i]+(e.length?"."+e.join("."):"");if(e.length!==0)throw new Error("Cannot access properties of undefined field");let s=0;n.includes(i)&&s++;for(let o=0;o<a;o++)this.scopeStack[o][i]&&s++;return r[i]=i+(s||""),r[i]}throw new Error("Unknown field "+e)}generate(){this.scopeStack=[{}];const t=[];for(const e in this.context)t[e]=this.context[e];for(const e in this.types)t[e]||(this.types[e]!=="native"?(t[e]=this.compileType(this.types[e]),t[e].startsWith("ctx")&&(t[e]="function () { return "+t[e]+"(...arguments) }"),isNaN(t[e])||(t[e]=this.wrapCode("  return "+t[e]))):t[e]=`native.${e}`);return`() => {
`+this.indent(`const ctx = {
`+this.indent(Object.keys(t).map(e=>e+": "+t[e]).join(`,
`))+`
}
return ctx`)+`
}`}compile(code){return this.native,eval(code)()}}class ReadCompiler extends Compiler{constructor(){super(),this.addTypes(conditionalDatatypes.Read),this.addTypes(structuresDatatypes.Read),this.addTypes(utilsDatatypes.Read);for(const e in numeric)this.addNativeType(e,numeric[e][0]);for(const e in utils)this.addNativeType(e,utils[e][0])}compileType(e){if(e instanceof Array){if(this.parameterizableTypes[e[0]])return this.parameterizableTypes[e[0]](this,e[1]);if(this.types[e[0]]&&this.types[e[0]]!=="native")return this.wrapCode("return "+this.callType(e[0],"offset",Object.values(e[1])));throw new Error("Unknown parametrizable type: "+JSON.stringify(e[0]))}else return e==="native"?"null":this.types[e]?"ctx."+e:this.primitiveTypes[e]}wrapCode(e,a=[]){return a.length>0?"(buffer, offset, "+a.join(", ")+`) => {
`+this.indent(e)+`
}`:`(buffer, offset) => {
`+this.indent(e)+`
}`}callType(e,a="offset",n=[]){if(e instanceof Array&&this.types[e[0]]&&this.types[e[0]]!=="native")return this.callType(e[0],a,Object.values(e[1]));e instanceof Array&&e[0]==="container"&&this.scopeStack.push({});const r=this.compileType(e);return e instanceof Array&&e[0]==="container"&&this.scopeStack.pop(),n.length>0?"("+r+`)(buffer, ${a}, `+n.map(i=>this.getField(i)).join(", ")+")":"("+r+`)(buffer, ${a})`}}class WriteCompiler extends Compiler{constructor(){super(),this.addTypes(conditionalDatatypes.Write),this.addTypes(structuresDatatypes.Write),this.addTypes(utilsDatatypes.Write);for(const e in numeric)this.addNativeType(e,numeric[e][1]);for(const e in utils)this.addNativeType(e,utils[e][1])}compileType(e){if(e instanceof Array){if(this.parameterizableTypes[e[0]])return this.parameterizableTypes[e[0]](this,e[1]);if(this.types[e[0]]&&this.types[e[0]]!=="native")return this.wrapCode("return "+this.callType("value",e[0],"offset",Object.values(e[1])));throw new Error("Unknown parametrizable type: "+e[0])}else return e==="native"?"null":this.types[e]?"ctx."+e:this.primitiveTypes[e]}wrapCode(e,a=[]){return a.length>0?"(value, buffer, offset, "+a.join(", ")+`) => {
`+this.indent(e)+`
}`:`(value, buffer, offset) => {
`+this.indent(e)+`
}`}callType(e,a,n="offset",r=[]){if(a instanceof Array&&this.types[a[0]]&&this.types[a[0]]!=="native")return this.callType(e,a[0],n,Object.values(a[1]));a instanceof Array&&a[0]==="container"&&this.scopeStack.push({});const i=this.compileType(a);return a instanceof Array&&a[0]==="container"&&this.scopeStack.pop(),r.length>0?"("+i+`)(${e}, buffer, ${n}, `+r.map(s=>this.getField(s)).join(", ")+")":"("+i+`)(${e}, buffer, ${n})`}}class SizeOfCompiler extends Compiler{constructor(){super(),this.addTypes(conditionalDatatypes.SizeOf),this.addTypes(structuresDatatypes.SizeOf),this.addTypes(utilsDatatypes.SizeOf);for(const e in numeric)this.addNativeType(e,numeric[e][2]);for(const e in utils)this.addNativeType(e,utils[e][2])}addNativeType(e,a){this.primitiveTypes[e]=`native.${e}`,isNaN(a)?this.native[e]=a:this.native[e]=n=>a,this.types[e]="native"}compileType(e){if(e instanceof Array){if(this.parameterizableTypes[e[0]])return this.parameterizableTypes[e[0]](this,e[1]);if(this.types[e[0]]&&this.types[e[0]]!=="native")return this.wrapCode("return "+this.callType("value",e[0],Object.values(e[1])));throw new Error("Unknown parametrizable type: "+e[0])}else return e==="native"?"null":isNaN(this.primitiveTypes[e])?this.types[e]?"ctx."+e:this.primitiveTypes[e]:this.primitiveTypes[e]}wrapCode(e,a=[]){return a.length>0?"(value, "+a.join(", ")+`) => {
`+this.indent(e)+`
}`:`(value) => {
`+this.indent(e)+`
}`}callType(e,a,n=[]){if(a instanceof Array&&this.types[a[0]]&&this.types[a[0]]!=="native")return this.callType(e,a[0],Object.values(a[1]));a instanceof Array&&a[0]==="container"&&this.scopeStack.push({});const r=this.compileType(a);return a instanceof Array&&a[0]==="container"&&this.scopeStack.pop(),isNaN(r)?n.length>0?"("+r+`)(${e}, `+n.map(i=>this.getField(i)).join(", ")+")":"("+r+`)(${e})`:r}}var compiler={ReadCompiler,WriteCompiler,SizeOfCompiler,ProtoDefCompiler:ProtoDefCompiler$1,CompiledProtodef};const ProtoDef=protodef,proto=new ProtoDef;var src={ProtoDef,Serializer:serializer.Serializer,Parser:serializer.Parser,FullPacketParser:serializer.FullPacketParser,Compiler:compiler,types:proto.types,utils:utils$2};(function(t){t.exports=src})(protodef$1);const container$1="native",i8$1="native",compound$1="native",i16$1="native",u16="native",i32$1="native",i64$1="native",f32$1="native",f64$1="native",pstring$1="native",shortString$1=["pstring",{countType:"u16"}],byteArray$1=["array",{countType:"i32",type:"i8"}],list$1=["container",[{name:"type",type:"nbtMapper"},{name:"value",type:["array",{countType:"i32",type:["nbtSwitch",{type:"type"}]}]}]],intArray$1=["array",{countType:"i32",type:"i32"}],longArray$1=["array",{countType:"i32",type:"i64"}],nbtMapper$1=["mapper",{type:"i8",mappings:{0:"end",1:"byte",2:"short",3:"int",4:"long",5:"float",6:"double",7:"byteArray",8:"string",9:"list",10:"compound",11:"intArray",12:"longArray"}}],nbtSwitch$1=["switch",{compareTo:"$type",fields:{end:"void",byte:"i8",short:"i16",int:"i32",long:"i64",float:"f32",double:"f64",byteArray:"byteArray",string:"shortString",list:"list",compound:"compound",intArray:"intArray",longArray:"longArray"}}],nbt$2=["container",[{name:"type",type:"nbtMapper"},{name:"name",type:"nbtTagName"},{name:"value",type:["nbtSwitch",{type:"type"}]}]],require$$2={void:"native",container:container$1,i8:i8$1,switch:"native",compound:compound$1,i16:i16$1,u16,i32:i32$1,i64:i64$1,f32:f32$1,f64:f64$1,pstring:pstring$1,shortString:shortString$1,byteArray:byteArray$1,list:list$1,intArray:intArray$1,longArray:longArray$1,nbtMapper:nbtMapper$1,nbtSwitch:nbtSwitch$1,nbt:nbt$2},container="native",i8="native",compound="native",zigzag32="native",zigzag64="native",i16="native",i32="native",i64="native",f32="native",f64="native",pstring="native",shortString=["pstring",{countType:"varint"}],byteArray=["array",{countType:"zigzag32",type:"i8"}],list=["container",[{name:"type",type:"nbtMapper"},{name:"value",type:["array",{countType:"zigzag32",type:["nbtSwitch",{type:"type"}]}]}]],intArray=["array",{countType:"zigzag32",type:"i32"}],longArray=["array",{countType:"zigzag32",type:"i64"}],nbtMapper=["mapper",{type:"i8",mappings:{0:"end",1:"byte",2:"short",3:"int",4:"long",5:"float",6:"double",7:"byteArray",8:"string",9:"list",10:"compound",11:"intArray",12:"longArray"}}],nbtSwitch=["switch",{compareTo:"$type",fields:{end:"void",byte:"i8",short:"i16",int:"zigzag32",long:"zigzag64",float:"f32",double:"f64",byteArray:"byteArray",string:"shortString",list:"list",compound:"compound",intArray:"intArray",longArray:"longArray"}}],nbt$1=["container",[{name:"type",type:"nbtMapper"},{name:"name",type:"nbtTagName"},{name:"value",type:["nbtSwitch",{type:"type"}]}]],require$$3={void:"native",container,i8,switch:"native",compound,zigzag32,zigzag64,i16,i32,i64,f32,f64,pstring,shortString,byteArray,list,intArray,longArray,nbtMapper,nbtSwitch,nbt:nbt$1};var compilerCompound,hasRequiredCompilerCompound;function requireCompilerCompound(){return hasRequiredCompilerCompound||(hasRequiredCompilerCompound=1,compilerCompound={Read:{compound:["context",(t,e)=>{const a={value:{},size:0};for(;e!==t.length;){const n=ctx.i8(t,e);if(n.value===0){a.size+=n.size;break}if(n.value>20)throw new Error(`Invalid tag: ${n.value} > 20`);const r=ctx.nbt(t,e);e+=r.size,a.size+=r.size,a.value[r.value.name]={type:r.value.type,value:r.value.value}}return a}]},Write:{compound:["context",(t,e,a)=>{for(const n in t)a=ctx.nbt({name:n,type:t[n].type,value:t[n].value},e,a);return a=ctx.i8(0,e,a),a}]},SizeOf:{compound:["context",t=>{let e=1;for(const a in t)e+=ctx.nbt({name:a,type:t[a].type,value:t[a].value});return e}]}}),compilerCompound}var compilerTagname,hasRequiredCompilerTagname;function requireCompilerTagname(){if(hasRequiredCompilerTagname)return compilerTagname;hasRequiredCompilerTagname=1;function t(n,r){const{value:i,size:s}=ctx.shortString(n,r);for(const o of i)if(o==="\0")throw new Error("unexpected tag end");return{value:i,size:s}}function e(...n){return ctx.shortString(...n)}function a(...n){return ctx.shortString(...n)}return compilerTagname={Read:{nbtTagName:["context",t]},Write:{nbtTagName:["context",e]},SizeOf:{nbtTagName:["context",a]}},compilerTagname}var compilerZigzag,hasRequiredCompilerZigzag;function requireCompilerZigzag(){if(hasRequiredCompilerZigzag)return compilerZigzag;hasRequiredCompilerZigzag=1;function t(s){s=s<<1^s>>63;let o=0;for(;s&-128;)s>>>=7,o++;return o+1}function e(s){typeof s.valueOf()=="object"?s=BigInt(s[0])<<32n|BigInt(s[1]):typeof s!="bigint"&&(s=BigInt(s)),s=s<<1n^s>>63n;let o=0;for(;s>127n;)s>>=7n,o++;return o+1}function a(s,o){let f=BigInt(0),p=0n,h=o,E=0;for(;;){if(h+1>s.length)throw new Error("unexpected buffer end");const l=s.readUInt8(h);if(f|=(BigInt(l)&0x7fn)<<p,h++,!(l&128)){E=h-o;break}if(p+=7n,p>63n)throw new Error(`varint is too big: ${p}`)}return{value:f>>1n^-(f&1n),size:E}}function n(s,o,f){typeof s.valueOf()=="object"?s=BigInt.asIntN(64,BigInt(s[0])<<32n)|BigInt(s[1]):typeof s!="bigint"&&(s=BigInt(s)),s=s<<1n^s>>63n;let p=0;for(;s>127n;){const h=Number(s&0xFFn);o.writeUInt8(h|128,f+p),p++,s>>=7n}return o.writeUInt8(Number(s),f+p),f+p+1}function r(s,o){let f=0,p=0,h=o,E=0;for(;;){if(h+1>s.length)throw new Error("unexpected buffer end");const l=s.readUInt8(h);if(f|=(l&127)<<p,h++,!(l&128)){E=h-o;break}if(p+=7,p>31)throw new Error(`varint is too big: ${p}`)}return{value:(f<<63>>63^f)>>1^f&1<<63,size:E}}function i(s,o,f){s=s<<1^s>>31;let p=0;for(;s&-128;){const h=Number(s&255|128);o.writeUInt8(h,f+p),p++,s>>>=7}return o.writeUInt8(s,f+p),f+p+1}return compilerZigzag={Read:{zigzag64:["native",a],zigzag32:["native",r]},Write:{zigzag64:["native",n],zigzag32:["native",i]},SizeOf:{zigzag64:["native",e],zigzag32:["native",t]}},compilerZigzag}var tagType,hasRequiredTagType;function requireTagType(){return hasRequiredTagType||(hasRequiredTagType=1,tagType={Byte:"byte",Short:"short",Int:"int",Long:"long",Float:"float",Double:"double",ByteArray:"byteArray",String:"string",List:"list",Compound:"compound",IntArray:"intArray",LongArray:"longArray"}),tagType}const zlib=require$$0,{ProtoDefCompiler}=protodefExports.Compiler,beNbtJson=JSON.stringify(require$$2),leNbtJson=beNbtJson.replace(/([iuf][0-7]+)/g,"l$1"),varintJson=JSON.stringify(require$$3).replace(/([if][0-7]+)/g,"l$1");function createProto(t){const e=new ProtoDefCompiler;e.addTypes(requireCompilerCompound()),e.addTypes(requireCompilerTagname());let a=beNbtJson;return t==="littleVarint"?(e.addTypes(requireCompilerZigzag()),a=varintJson):t==="little"&&(a=leNbtJson),e.addTypesToCompile(JSON.parse(a)),e.compileProtoDefSync()}const protoBE=createProto("big"),protoLE=createProto("little"),protoVarInt=createProto("littleVarint"),protos={big:protoBE,little:protoLE,littleVarint:protoVarInt};function writeUncompressed(t,e="big"){return e===!0&&(e="little"),protos[e].createPacketBuffer("nbt",t)}function parseUncompressed(t,e="big"){return e===!0&&(e="little"),protos[e].parsePacketBuffer("nbt",t,t.startOffset).data}const hasGzipHeader=function(t){let e=!0;return t[0]!==31&&(e=!1),t[1]!==139&&(e=!1),e},hasBedrockLevelHeader=t=>t[1]===0&&t[2]===0&&t[3]===0;async function parseAs(t,e){hasGzipHeader(t)&&(t=await new Promise((n,r)=>{zlib.gunzip(t,(i,s)=>{i?r(i):n(s)})}));const a=protos[e].parsePacketBuffer("nbt",t,t.startOffset);return a.metadata.buffer=t,a.type=e,a}async function parse$1(t,e,a){let n=null;if(typeof e=="function")a=e;else if(e===!0||e==="little")n="little";else if(e==="big")n="big";else if(e==="littleVarint")n="littleVarint";else if(e)throw new Error("Unrecognized format: "+e);if(t.startOffset=t.startOffset||0,!n&&!t.startOffset&&hasBedrockLevelHeader(t)&&(t.startOffset+=8,n="little"),n)try{const s=await parseAs(t,n);return a&&a(null,s.data,s.type,s.metadata),{parsed:s.data,type:s.type,metadata:s.metadata}}catch(s){if(a)return a(s);throw s}const r=({buffer:s,size:o})=>{const f=o,p=s.length-s.startOffset,E=s[f+s.startOffset]===10;if(f<p&&!E)throw new Error(`Unexpected EOF at ${f}: still have ${p-f} bytes to read !`)};let i=null;try{i=await parseAs(t,"big"),r(i.metadata)}catch(s){try{i=await parseAs(t,"little"),r(i.metadata)}catch{try{i=await parseAs(t,"littleVarint"),r(i.metadata)}catch{if(a)return a(s);throw s}}}return a&&a(null,i.data,i.type,i.metadata),{parsed:i.data,type:i.type,metadata:i.metadata}}function simplify(t){function e(a,n){return n==="compound"?Object.keys(a).reduce(function(r,i){return r[i]=simplify(a[i]),r},{}):n==="list"?a.value.map(function(r){return e(r,a.type)}):a}return e(t.value,t.type)}const builder={bool(t=!1){return{type:"bool",value:t}},short(t){return{type:"short",value:t}},byte(t){return{type:"byte",value:t}},string(t){return{type:"string",value:t}},comp(t,e=""){return{type:"compound",name:e,value:t}},int(t){return{type:"int",value:t}},float(t){return{type:"float",value:t}},double(t){return{type:"double",value:t}},long(t){return{type:"long",value:t}},list(t){return{type:"list",value:{type:(t==null?void 0:t.type)??"end",value:(t==null?void 0:t.value)??[]}}},byteArray(t=[]){return{type:"byteArray",value:t}},shortArray(t=[]){return{type:"shortArray",value:t}},intArray(t=[]){return{type:"intArray",value:t}},longArray(t=[]){return{type:"longArray",value:t}}};var nbt={writeUncompressed,parseUncompressed,simplify,hasBedrockLevelHeader,parse:parse$1,parseAs,proto:protoBE,protoLE,protos,TagType:requireTagType(),...builder},TagType;(function(t){t[t.End=0]="End",t[t.Byte=1]="Byte",t[t.Short=2]="Short",t[t.Int=3]="Int",t[t.Long=4]="Long",t[t.Float=5]="Float",t[t.Double=6]="Double",t[t.ByteArray=7]="ByteArray",t[t.String=8]="String",t[t.List=9]="List",t[t.Compound=10]="Compound",t[t.IntArray=11]="IntArray",t[t.LongArray=12]="LongArray"})(TagType||(TagType={}));class Byte{constructor(e){this.value=e}valueOf(){return this.value}}class Short{constructor(e){this.value=e}valueOf(){return this.value}}let Int$1=class{constructor(e){this.value=e}valueOf(){return this.value}};class Float{constructor(e){this.value=e}valueOf(){return this.value}}function getTagType(t){if(t instanceof Byte)return TagType.Byte;if(t instanceof Short)return TagType.Short;if(t instanceof Int$1)return TagType.Int;if(typeof t=="bigint")return TagType.Long;if(t instanceof Float)return TagType.Float;if(typeof t=="number")return TagType.Double;if(t instanceof Buffer||t instanceof Int8Array)return TagType.ByteArray;if(typeof t=="string")return TagType.String;if(t instanceof Array)return TagType.List;if(t.constructor==Object||t instanceof Map)return TagType.Compound;if(t instanceof Int32Array)return TagType.IntArray;if(t instanceof BigInt64Array)return TagType.LongArray;throw new Error("Invalid tag value")}const unquotedRegExp=/^[0-9A-Za-z.+_-]+$/;function stringify(t,e={}){const a=!!e.pretty,n=e.breakLength||70,r=e.quote=="single"?"'":e.quote=="double"?'"':null,i=" ".repeat(4);function s(f){let p=r??'"';if(r==null)for(let h=0;h<f.length&&h<8;h++){switch(f[h]){case"'":p='"';break;case'"':p="'";break;default:continue}break}return`${p}${f.replace(RegExp(`[${p}\\\\]`,"g"),h=>`\\${h}`)}${p}`}function o(f,p){const h=a?" ":"",E=a?", ":",";if(f instanceof Byte)return`${f.value}b`;if(f instanceof Short)return`${f.value}s`;if(f instanceof Int$1)return`${f.value|0}`;if(typeof f=="bigint")return`${f}l`;if(f instanceof Float)return`${f.value}f`;if(typeof f=="number")return Number.isInteger(f)?`${f}.0`:f.toString();if(typeof f=="string")return s(f);if(f instanceof Buffer||f instanceof Int8Array)return`[B;${h}${[...f].join(E)}]`;if(f instanceof Int32Array)return`[I;${h}${[...f].join(E)}]`;if(f instanceof BigInt64Array)return`[L;${h}${[...f].join(E)}]`;if(f instanceof Array){const w=f.map(l=>o(l,p+1));return w.reduce((l,c)=>l+c.length,0)>n||w.some(l=>l.includes(`
`))?`[
${w.map(l=>i.repeat(p)+l).join(`,
`)}
${i.repeat(p-1)}]`:`[${w.join(E)}]`}else{const w=(f instanceof Map?[...f]:Object.entries(f).filter(([l,c])=>c!=null)).map(([l,c])=>(unquotedRegExp.test(l)||(l=s(l)),`${l}:${h}${o(c,p+1)}`));return a&&w.reduce((l,c)=>l+c.length,0)>n?`{
${w.map(l=>i.repeat(p)+l).join(`,
`)}
${i.repeat(p-1)}}`:`{${h}${w.join(E)}${h}}`}}return o(t,1)}function parse(t,e={}){let a=0,n=0,r="";const i=()=>new Error("Unexpected end"),s=_=>new Error(`Unexpected character ${t[a]} at position ${a}`);function o(){for(;a<t.length;){if(t[a]!=" "&&t[a]!=`
`)return;a+=1}}function f(){if(!"-0123456789".includes(t[a]))return null;n=a++;let _=!1;for(;a<t.length;)if(r=t[a++],!"0123456789".includes(r))if(r=="."){if(_)return a--,null;_=!0}else return r=="f"||r=="F"?new Float(+t.slice(n,a-1)):r=="d"||r=="D"?+t.slice(n,a-1):r=="b"||r=="B"?new Byte(+t.slice(n,a-1)):r=="s"||r=="S"?new Short(+t.slice(n,a-1)):r=="l"||r=="L"?BigInt(t.slice(n,a-1)):_?+t.slice(n,--a):new Int$1(+t.slice(n,--a));return _?+t.slice(n,a):new Int$1(+t.slice(n,a))}function p(){for(n=a;a<t.length&&unquotedRegExp.test(t[a]);)a++;if(a-n==0)throw a==t.length?i():s();return t.slice(n,a)}function h(){const _=t[a];n=++a;let T="";for(;a<t.length;)if(r=t[a++],r=="\\")T+=t.slice(n,a-1)+t[a],n=++a;else if(r==_)return T+t.slice(n,a-1);throw i()}function E(){return t[a]=='"'||t[a]=="'"?h():p()}function w(_,T){if(o(),t[a]==","){if(_)throw s();a++,o()}else if(!_&&t[a]!=T)throw s()}function l(){const _=[];let T=!0;for(;;){if(w(T,"}"),T=!1,t[a]=="}")return a++,e.useMaps?new Map(_):_.reduce((D,[L,H])=>(D[L]=H,D),{});const I=E();if(o(),t[a++]!=":")throw s();_.push([I,b()])}}function c(_){const T=[];for(;a<t.length;){if(w(T.length==0,"]"),t[a]=="]"){if(a++,_=="B")return Buffer.from(T.map(I=>+I));if(_=="I")return Int32Array.from(T.map(I=>+I));if(_=="L")return BigInt64Array.from(T.map(I=>BigInt(I)))}for(n=a,t[a]=="-"&&a++;a<t.length&&"0123456789".includes(t[a]);)a++;if(a-n==0||unquotedRegExp.test(t[a]))throw s();T.push(t.slice(n,a))}throw i()}function y(){if("BILbil".includes(t[a])&&t[a+1]==";")return c(t[(a+=2)-2].toUpperCase());const _=[];for(;a<t.length;){if(o(),t[a]==","){if(_.length==0)throw s();a++,o()}else if(_.length>0&&t[a]!="]")throw s();if(t[a]=="]")return a++,_;_.push(b())}throw i()}function b(){if(o(),n=a,r=t[a],r=="{")return a++,l();if(r=="[")return a++,y();if(r=='"'||r=="'")return h();const _=f();return _!=null&&(a==t.length||!unquotedRegExp.test(t[a]))?_:t.slice(n,a)+p()}return b()}function decode(t,e={}){const a=t.readUInt8(0);if(a==TagType.End)return{name:null,value:null,length:1};let n=null,r=1;if(!e.unnamed){const s=t.readUInt16BE(r);r+=2,n=t.toString("utf-8",r,r+=s)}const i=decodeTagValue(a,t,r,!!e.useMaps);return{name:n,value:i.value,length:i.offset}}function encode(t,e){let a=Buffer.alloc(1024),n=0;return n=a.writeUInt8(e==null?TagType.End:getTagType(e),n),e!=null&&t!=null&&({buffer:a,offset:n}=writeString(t,a,n)),e!=null&&({buffer:a,offset:n}=encodeTagValue(e,a,n)),a.slice(0,n)}function writeString(t,e,a){const n=Buffer.from(t);return e=accommodate(e,a,n.length+2),a=e.writeUInt16BE(n.length,a),n.copy(e,a),a+=n.length,{buffer:e,offset:a}}function accommodate(t,e,a){for(;t.length<e+a;)t=Buffer.concat([t,Buffer.alloc(t.length)]);return t}function decodeTagValue(t,e,a,n){let r;switch(t){case TagType.Byte:r=new Byte(e.readInt8((a+=1)-1));break;case TagType.Short:r=new Short(e.readInt16BE((a+=2)-2));break;case TagType.Int:r=new Int$1(e.readInt32BE((a+=4)-4));break;case TagType.Long:r=new DataView(e.buffer,e.byteOffset,e.byteLength).getBigInt64(a),a+=8;break;case TagType.Float:r=new Float(e.readFloatBE((a+=4)-4));break;case TagType.Double:r=e.readDoubleBE((a+=8)-8);break;case TagType.ByteArray:{const i=e.readUInt32BE(a);a+=4,r=e.slice(a,a+=i);break}case TagType.String:{const i=e.readUInt16BE(a);r=(a+=2,e.toString("utf-8",a,a+=i));break}case TagType.List:{const i=e.readUInt8(a),s=e.readUInt32BE(a+1);a+=5;const o=[];for(let f=0;f<s;f++)({value:r,offset:a}=decodeTagValue(i,e,a,n)),o.push(r);r=o;break}case TagType.Compound:{const i=n?new Map:{};for(;;){const s=e.readUInt8(a);if(a+=1,s==TagType.End)break;const o=e.readUInt16BE(a);a+=2;const f=e.toString("utf-8",a,a+=o);({value:r,offset:a}=decodeTagValue(s,e,a,n)),n?i.set(f,r):i[f]=r}r=i;break}case TagType.IntArray:{const i=e.readUInt32BE(a);a+=4;const s=r=new Int32Array(i);for(let o=0;o<i;o++)s[o]=e.readInt32BE(a+o*4);a+=s.buffer.byteLength;break}case TagType.LongArray:{const i=e.readUInt32BE(a);a+=4;const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=r=new BigInt64Array(i);for(let f=0;f<i;f++)o[f]=s.getBigInt64(a+f*8);a+=o.buffer.byteLength;break}default:throw new Error(`Tag type ${t} not implemented`)}return{value:r,offset:a}}function encodeTagValue(t,e,a){if(e=accommodate(e,a,8),t instanceof Byte)a=t.value<0?e.writeInt8(t.value,a):e.writeUInt8(t.value,a);else if(t instanceof Short)a=t.value<0?e.writeInt16BE(t.value,a):e.writeUInt16BE(t.value,a);else if(t instanceof Int$1)a=t.value<0?e.writeInt32BE(t.value,a):e.writeUInt32BE(t.value,a);else if(typeof t=="bigint")new DataView(e.buffer,e.byteOffset,e.byteLength).setBigInt64(a,t),a+=8;else if(t instanceof Float)a=e.writeFloatBE(t.value,a);else if(typeof t=="number")a=e.writeDoubleBE(t,a);else if(t instanceof Buffer||t instanceof Int8Array)a=e.writeUInt32BE(t.length,a),e=accommodate(e,a,t.length),(t instanceof Buffer?t:Buffer.from(t)).copy(e,a),a+=t.length;else if(t instanceof Array){const n=t.length>0?getTagType(t[0]):TagType.End;a=e.writeUInt8(n,a),a=e.writeUInt32BE(t.length,a);for(const r of t){if(getTagType(r)!=n)throw new Error("Odd tag type in list");({buffer:e,offset:a}=encodeTagValue(r,e,a))}}else if(typeof t=="string")({buffer:e,offset:a}=writeString(t,e,a));else if(t instanceof Int32Array){a=e.writeUInt32BE(t.length,a),e=accommodate(e,a,t.byteLength);for(let n=0;n<t.length;n++)e.writeInt32BE(t[n],a+n*4);a+=t.byteLength}else if(t instanceof BigInt64Array){a=e.writeUInt32BE(t.length,a),e=accommodate(e,a,t.byteLength);const n=new DataView(e.buffer,e.byteOffset,e.byteLength);for(let r=0;r<t.length;r++)n.setBigInt64(a+r*8,t[r]);a+=t.byteLength}else{for(const[n,r]of t instanceof Map?t:Object.entries(t).filter(([i,s])=>s!=null))a=e.writeUInt8(getTagType(r),a),{buffer:e,offset:a}=writeString(n,e,a),{buffer:e,offset:a}=encodeTagValue(r,e,a),e=accommodate(e,a,1);a=e.writeUInt8(0,a)}return{buffer:e,offset:a}}const nbtts=Object.freeze(Object.defineProperty({__proto__:null,Byte,Float,Int:Int$1,Short,get TagType(){return TagType},decode,encode,getTagType,parse,stringify},Symbol.toStringTag,{value:"Module"})),{Int}=nbtts;$("#outputArea");let file;async function submit(){let t=document.getElementById("fileInput"),e=$("#submitBtn");e.attr("disabled",!0),file=t.files[0];let a=await file.text();try{await convert(a)}catch{alert(": ")}e.attr("disabled",!1)}async function convert(t,e){let a=t.replace(/[\r\n\t]/g,""),n=parse(a),r={format_version:new Int(1),size:[new Int(1),new Int(1),new Int(1)],structure:{block_indices:[[new Int(0)],[new Int(-1)]],entities:[{Item:n,Pos:[],identifier:"minecraft:item"}],palette:{default:{block_palette:[{name:"minecraft:air"}],block_position_data:{}}}},structure_world_origin:[new Int(0),new Int(0),new Int(0)]},i=encode("",r),s=await nbt.parse(i),o=nbt.writeUncompressed(s.parsed,"little");const f=new Blob([o]),p=URL.createObjectURL(f),h=document.createElement("a");document.body.appendChild(h),h.download=file.name+".mcstructure",h.href=p,h.click(),h.remove(),URL.revokeObjectURL(p)}window.submit=submit;
